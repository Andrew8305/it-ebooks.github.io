<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>计算机电子书</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://it-ebooks.flygon.net/"/>
  <updated>2016-03-05T03:03:23.213Z</updated>
  <id>http://it-ebooks.flygon.net/</id>
  
  <author>
    <name>Flygon</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>面向程序员的数据挖掘指南</title>
    <link href="http://it-ebooks.flygon.net/%E9%9D%A2%E5%90%91%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E6%8C%87%E5%8D%97/"/>
    <id>http://it-ebooks.flygon.net/面向程序员的数据挖掘指南/</id>
    <published>2016-03-05T03:00:45.000Z</published>
    <updated>2016-03-05T03:03:23.213Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/guide-to-data-mining.jpg?build=1451813674472&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://zacharski.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ron Zacharski&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原文：&lt;a href=&quot;http://guidetodatamining.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;A Programmer’s Guide to Data Mining&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/egrcc/guidetodatamining&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;guidetodatamining&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc/3.0/deed.en_US&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CC BY-NC 3.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/wizardforcel/guide-to-data-mining/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/wizardforcel/guide-to-data-mining&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/wizardforcel/guide-to-data-mining&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/wizardforcel/guide-to-data-mining&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/guide-to-data-mining.jpg?build=1451813674472&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://zacharski.org/&quot;&gt;Ron Zacharski&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原文：&lt;a href=&quot;http://guidetodatamining.com/&quot;&gt;A Programmer’s Guide to Data Mining&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/egrcc/guidetodatamining&quot;&gt;guidetodatamining&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc/3.0/deed.en_US&quot;&gt;CC BY-NC 3.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="数据挖掘" scheme="http://it-ebooks.flygon.net/tags/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/"/>
    
  </entry>
  
  <entry>
    <title>精通 Python 设计模式</title>
    <link href="http://it-ebooks.flygon.net/%E7%B2%BE%E9%80%9APython%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <id>http://it-ebooks.flygon.net/精通Python设计模式/</id>
    <published>2016-03-05T02:35:33.000Z</published>
    <updated>2016-03-05T02:37:16.651Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://dz13w8afd47il.cloudfront.net/sites/default/files/imagecache/ppv4_main_book_cover/9324OS_Mastering%20Python%20Design%20Patterns_Frontcover.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;原书名：&lt;a href=&quot;https://www.packtpub.com/application-development/mastering-python-design-patterns&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mastering Python Design Patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/cundi&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;cundi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/cundi/Mastering.Python.Design.Patterns&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mastering.Python.Design.Patterns&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cundi/Mastering.Python.Design.Patterns&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cundi/Mastering.Python.Design.Patterns/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Markdown格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://dz13w8afd47il.cloudfront.net/sites/default/files/imagecache/ppv4_main_book_cover/9324OS_Mastering%20Python%20Design%20Patterns_Frontcover.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;原书名：&lt;a href=&quot;https://www.packtpub.com/application-development/mastering-python-design-patterns&quot;&gt;Mastering Python Design Patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/cundi&quot;&gt;cundi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/cundi/Mastering.Python.Design.Patterns&quot;&gt;Mastering.Python.Design.Patterns&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="设计模式" scheme="http://it-ebooks.flygon.net/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Django 设计模式与最佳实践</title>
    <link href="http://it-ebooks.flygon.net/django-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
    <id>http://it-ebooks.flygon.net/django-设计模式与最佳实践/</id>
    <published>2016-03-05T02:31:11.000Z</published>
    <updated>2016-03-05T02:33:31.515Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://dz13w8afd47il.cloudfront.net/sites/default/files/imagecache/ppv4_main_book_cover/6644OS.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;原书名：&lt;a href=&quot;https://www.packtpub.com/web-development/django-design-patterns-and-best-practices&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Django Design Patterns and Best Practices&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/cundi&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;cundi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/cundi/Django-Design-Patterns-and-Best-Practices&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Django-Design-Patterns-and-Best-Practices&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CC BY-NC-ND 3.0&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cundi/Django-Design-Patterns-and-Best-Practices&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cundi/Django-Design-Patterns-and-Best-Practices/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Markdown格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://dz13w8afd47il.cloudfront.net/sites/default/files/imagecache/ppv4_main_book_cover/6644OS.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;原书名：&lt;a href=&quot;https://www.packtpub.com/web-development/django-design-patterns-and-best-practices&quot;&gt;Django Design Patterns and Best Practices&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/cundi&quot;&gt;cundi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/cundi/Django-Design-Patterns-and-Best-Practices&quot;&gt;Django-Design-Patterns-and-Best-Practices&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh&quot;&gt;CC BY-NC-ND 3.0&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="django" scheme="http://it-ebooks.flygon.net/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>Django 网站开发 Cookbook</title>
    <link href="http://it-ebooks.flygon.net/django-%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91-cookbook/"/>
    <id>http://it-ebooks.flygon.net/django-网站开发-cookbook/</id>
    <published>2016-03-05T02:26:40.000Z</published>
    <updated>2016-03-05T02:29:19.974Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://d255esdrn735hr.cloudfront.net/sites/default/files/imagecache/ppv4_main_book_cover/6898OS_Web%20Development%20with%20Django%20Cookbook_Cover_0.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;原书名：&lt;a href=&quot;https://www.packtpub.com/web-development/web-development-django-cookbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Web.Development.with.Django.Cookbook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/cundi&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;cundi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/cundi/Web.Development.with.Django.Cookbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Web.Development.with.Django.Cookbook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CC BY-NC-ND 3.0&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cundi/Web.Development.with.Django.Cookbook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cundi/Web.Development.with.Django.Cookbook/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Markdown格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://d255esdrn735hr.cloudfront.net/sites/default/files/imagecache/ppv4_main_book_cover/6898OS_Web%20Development%20with%20Django%20Cookbook_Cover_0.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;原书名：&lt;a href=&quot;https://www.packtpub.com/web-development/web-development-django-cookbook&quot;&gt;Web.Development.with.Django.Cookbook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/cundi&quot;&gt;cundi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/cundi/Web.Development.with.Django.Cookbook&quot;&gt;Web.Development.with.Django.Cookbook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh&quot;&gt;CC BY-NC-ND 3.0&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
      <category term="django" scheme="http://it-ebooks.flygon.net/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>像计算机科学家一样思考python</title>
    <link href="http://it-ebooks.flygon.net/think-python/"/>
    <id>http://it-ebooks.flygon.net/think-python/</id>
    <published>2016-03-04T02:02:48.000Z</published>
    <updated>2016-03-04T02:10:28.302Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://img3.doubanio.com/lpic/s27053465.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://greenteapress.com/wp/think-python/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Allen B. Downey&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/carfly/thinkpython-cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;thinkpython-cn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;格式：PDF&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;p&gt;暂无。&lt;/p&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://vdisk.weibo.com/s/aADaW4YRjuH2J&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;微盘下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://1000eb.com/1izcy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;千易下载&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;第二版翻译&quot;&gt;&lt;a href=&quot;#第二版翻译&quot; class=&quot;headerlink&quot; title=&quot;第二版翻译&quot;&gt;&lt;/a&gt;第二版翻译&lt;/h2&gt;&lt;p&gt;该书的第二版（Python 3）正在由&lt;a href=&quot;http://www.codingpy.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;编程派&lt;/a&gt;组织翻译，请见&lt;a href=&quot;https://github.com/bingjin/ThinkPython2-CN&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://img3.doubanio.com/lpic/s27053465.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://greenteapress.com/wp/think-python/&quot;&gt;Allen B. Downey&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/carfly/thinkpython-cn&quot;&gt;thinkpython-cn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;格式：PDF&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Oracle Java SE Tutorials</title>
    <link href="http://it-ebooks.flygon.net/java-se-tutorials-oracle/"/>
    <id>http://it-ebooks.flygon.net/java-se-tutorials-oracle/</id>
    <published>2016-03-02T12:04:07.000Z</published>
    <updated>2016-03-03T07:19:13.686Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://docs.oracle.com/javase/tutorial/images/ThinkingDuke.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.oracle.com/javase/tutorial/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/java-tutorial-downloads-2005894.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://docs.oracle.com/javase/tutorial/images/ThinkingDuke.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; t
    
    </summary>
    
    
      <category term="java" scheme="http://it-ebooks.flygon.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Programming Abstractions in C++</title>
    <link href="http://it-ebooks.flygon.net/programming-abstractions-in-cpp/"/>
    <id>http://it-ebooks.flygon.net/programming-abstractions-in-cpp/</id>
    <published>2016-03-02T12:00:03.000Z</published>
    <updated>2016-03-03T07:19:13.792Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://ecx.images-amazon.com/images/I/517sK-24wcL._SX400_BO1,204,203,200_.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：Eric Roberts&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://www.stanford.edu/class/cs106b/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CS106B: Programming Abstractions&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;格式：PDF&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://vdisk.weibo.com/s/aADaW4YRjvf0y&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;微盘下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://1000eb.com/1iz4j&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;千易下载&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ecx.images-amazon.com/images/I/517sK-24wcL._SX400_BO1,204,203,200_.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：Eric Roberts&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://www.stanford.edu/class/cs106b/&quot;&gt;CS106B: Programming Abstractions&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;格式：PDF&lt;/p&gt;
    
    </summary>
    
    
      <category term="cpp" scheme="http://it-ebooks.flygon.net/tags/cpp/"/>
    
      <category term="数据结构·算法" scheme="http://it-ebooks.flygon.net/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%C2%B7%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Foundations of Computation</title>
    <link href="http://it-ebooks.flygon.net/foundations-of-computation/"/>
    <id>http://it-ebooks.flygon.net/foundations-of-computation/</id>
    <published>2016-03-02T09:04:44.000Z</published>
    <updated>2016-03-03T07:19:13.635Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://math.hws.edu/FoundationsOfComputation/FoundationsOfComputation_small_cover.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://math.hws.edu/eck/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;David J. Eck&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://math.hws.edu/FoundationsOfComputation/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Foundations of Computation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CC BY-NC-ND 3.0&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/FoundationsOfComputation/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/FoundationsOfComputation/FoundationsOfComputation_2.3.1_6x9.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式 6x9&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/FoundationsOfComputation/FoundationsOfComputation_2.3.1_8.5x11.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式 8.5x11&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://math.hws.edu/FoundationsOfComputation/FoundationsOfComputation_small_cover.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://math.hws.edu/eck/&quot;&gt;David J. Eck&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://math.hws.edu/FoundationsOfComputation/&quot;&gt;Foundations of Computation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/&quot;&gt;CC BY-NC-ND 3.0&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="数理逻辑·数学" scheme="http://it-ebooks.flygon.net/tags/%E6%95%B0%E7%90%86%E9%80%BB%E8%BE%91%C2%B7%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>Introduction to Computer Graphics</title>
    <link href="http://it-ebooks.flygon.net/introduction-to-computer-graphics/"/>
    <id>http://it-ebooks.flygon.net/introduction-to-computer-graphics/</id>
    <published>2016-03-02T09:01:47.000Z</published>
    <updated>2016-03-03T07:19:13.673Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://math.hws.edu/graphicsbook/resource/graphicstext-cover-180x235.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://math.hws.edu/eck/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;David J. Eck&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://math.hws.edu/graphicsbook/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Introduction to Computer Graphics&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/graphicsbook/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/eck/cs424/downloads/graphicsbook-web-site.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/eck/cs424/downloads/graphicsbook-linked.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://math.hws.edu/graphicsbook/resource/graphicstext-cover-180x235.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://math.hws.edu/eck/&quot;&gt;David J. Eck&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://math.hws.edu/graphicsbook/&quot;&gt;Introduction to Computer Graphics&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="图形" scheme="http://it-ebooks.flygon.net/tags/%E5%9B%BE%E5%BD%A2/"/>
    
  </entry>
  
  <entry>
    <title>Introduction to Programming Using Java 7e</title>
    <link href="http://it-ebooks.flygon.net/introduction-to-programming-using-java/"/>
    <id>http://it-ebooks.flygon.net/introduction-to-programming-using-java/</id>
    <published>2016-03-02T08:56:39.000Z</published>
    <updated>2016-03-03T07:19:13.676Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://math.hws.edu/javanotes/javanotes7-cover-180x235.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://math.hws.edu/eck/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;David J. Eck&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://math.hws.edu/javanotes/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Introduction to Programming Using Java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CC BY-NC-ND 3.0&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/javanotes/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/eck/cs124/downloads/javanotes7.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://math.hws.edu/eck/cs124/downloads/javanotes7-linked.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;翻译&quot;&gt;&lt;a href=&quot;#翻译&quot; class=&quot;headerlink&quot; title=&quot;翻译&quot;&gt;&lt;/a&gt;翻译&lt;/h2&gt;&lt;p&gt;ImportNew 网站正在翻译此书，译名为《Java编程入门》，请见&lt;a href=&quot;http://www.importnew.com/?s=java+%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://math.hws.edu/javanotes/javanotes7-cover-180x235.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;http://math.hws.edu/eck/&quot;&gt;David J. Eck&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://math.hws.edu/javanotes/&quot;&gt;Introduction to Programming Using Java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;协议：&lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/&quot;&gt;CC BY-NC-ND 3.0&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="java" scheme="http://it-ebooks.flygon.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>深入理解 Android 卷III</title>
    <link href="http://it-ebooks.flygon.net/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-android-vol3/"/>
    <id>http://it-ebooks.flygon.net/深入理解-android-vol3/</id>
    <published>2016-03-01T10:02:07.000Z</published>
    <updated>2016-03-03T07:19:13.959Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/deepin-android-vol3.jpg?build=1439249362341&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：张大伟&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://blog.csdn.net/innost&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Innost的专栏&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/wizardforcel/deepin-android-vol3/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/wizardforcel/deepin-android-vol3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/wizardforcel/deepin-android-vol3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/wizardforcel/deepin-android-vol3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/deepin-android-vol3.jpg?build=1439249362341&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：张大伟&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://blog.csdn.net/innost&quot;&gt;Innost的专栏&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="android" scheme="http://it-ebooks.flygon.net/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>安全备忘单翻译项目（OWASP Cheat Sheet Series）</title>
    <link href="http://it-ebooks.flygon.net/owasp-cheat-sheet-zh/"/>
    <id>http://it-ebooks.flygon.net/owasp-cheat-sheet-zh/</id>
    <published>2016-02-29T08:47:26.000Z</published>
    <updated>2016-03-03T07:19:13.782Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/owasp-cheat-sheet-zh.jpg?build=1452420957958&amp;amp;v=12.0.4&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/wizardforcel/owasp-cheat-sheet-zh/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/wizardforcel/owasp-cheat-sheet-zh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/wizardforcel/owasp-cheat-sheet-zh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/wizardforcel/owasp-cheat-sheet-zh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/owasp-cheat-sheet-zh.jpg?build=1452420957958&amp;amp;v=12.0.4&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="渗透" scheme="http://it-ebooks.flygon.net/tags/%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>python 安全编程教程</title>
    <link href="http://it-ebooks.flygon.net/py-sec-tutorial/"/>
    <id>http://it-ebooks.flygon.net/py-sec-tutorial/</id>
    <published>2016-02-29T07:01:53.000Z</published>
    <updated>2016-03-03T07:19:13.795Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/py-sec-tutorial.jpg?build=1452128971588&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;原文：&lt;a href=&quot;http://www.primalsecurity.net/tutorials/python-tutorials/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python Tutorials&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/smartFlash&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;smartFlash&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/smartFlash&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;pySecurity&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/wizardforcel/py-sec-tutorial/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/wizardforcel/py-sec-tutorial&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/wizardforcel/py-sec-tutorial&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/wizardforcel/py-sec-tutorial&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/py-sec-tutorial.jpg?build=1452128971588&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;原文：&lt;a href=&quot;http://www.primalsecurity.net/tutorials/python-tutorials/&quot;&gt;Python Tutorials&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;译者：&lt;a href=&quot;https://github.com/smartFlash&quot;&gt;smartFlash&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/smartFlash&quot;&gt;pySecurity&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="渗透" scheme="http://it-ebooks.flygon.net/tags/%E6%B8%97%E9%80%8F/"/>
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Git 参考手册</title>
    <link href="http://it-ebooks.flygon.net/git-ref/"/>
    <id>http://it-ebooks.flygon.net/git-ref/</id>
    <published>2016-02-29T06:47:41.000Z</published>
    <updated>2016-03-03T07:19:13.647Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Git-手册简介&quot;&gt;&lt;a href=&quot;#Git-手册简介&quot; class=&quot;headerlink&quot; title=&quot;Git 手册简介&quot;&gt;&lt;/a&gt;Git 手册简介&lt;/h1&gt;&lt;p&gt;本站为 Git 参考手册。目的是为学习与记忆 Git 使用中最重要、最普遍的命令提供快速翻阅。 这些命令以你可能需要的操作类型划分，并且将提供日常使用中需要的一些常用的命令以及参数。&lt;/p&gt;
&lt;p&gt;每个章节都有到下一个章节的链接，所以本手册也可以当作一个入门指导。 每个页面还有一个深度 Git 文档阅读的链接，比如官方的使用手册页面或者 &lt;a href=&quot;http://git-scm.com/book&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《Pro Git》&lt;/a&gt; 书中的相关章节，以便于你学习了解更多的 Git 命令。首先，我们要从如何以 Git 的思维方式管理源代码开始。&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;如何以-Git-的方式思考&quot;&gt;&lt;a href=&quot;#如何以-Git-的方式思考&quot; class=&quot;headerlink&quot; title=&quot;如何以 Git 的方式思考&quot;&gt;&lt;/a&gt;如何以 Git 的方式思考&lt;/h2&gt;&lt;p&gt;懂得 Git，第一件重要的事情就是要知道它与 Subversion、Perforce 或者任何你用过的版本控制工具都有着很大的差别。 通常，忘掉你预想的版本控制方式，改以 Git 的方式思考，能够帮助你更好地学习 Git。&lt;/p&gt;
&lt;p&gt;让我们从头开始。假设你正在设计一个新的源代码管理系统。在你使用某个工具之前，是如何完成基本的源码版本控制工作的呢？ 十有八九，你只是在项目到达某些阶段的时候，对项目做一份拷贝。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cp -R project project.bak&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这样，你就可以在事情变得一团糟的时候很方便的返回到之前的状态，或者通过对比当前的项目与之前的拷贝，看看自己在之后的工作中，都做了哪些修改。&lt;/p&gt;
&lt;p&gt;如果你有点偏执，你可能会经常作上面说的事情，或许还会给项目拷贝加个日期：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cp -R project project.2010-06-01.bak&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如此，你就有了一堆项目在各个阶段的快照，来作比较、查看。使用这种模式，你还可以有效地与人分享项目变更。 如果你会在项目到达一定阶段的时候给它打个包，丢到自己的网站上，那其他的开发者们，就能很方便地下载它，做点改动，并给你补丁回馈。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ wget http://example.com/project.2010-06-01.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ unzip project.2010-06-01.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cp -R project.2010-06-01 project-my-copy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cd project-my-copy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ (做了某些修改)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ diff project-my-copy project.2010-06-01 &amp;gt; change.patch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ (通过E-mail发送修改补丁)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以此方式，原先的开发者就能将其他人的改动应用到他的项目中去，其他开发者也能了解你做的变更。其实这便是许多开源项目采用过多年的协作方式。&lt;/p&gt;
&lt;p&gt;这办法其实很好使，所以假设我们现在想要写个工具，让这个办法更快、更简单。 我们与其实现一个工具以记录每个文件的版本，可能不如去实现个工具以使创建、储存项目的快照更加方便，不用每次都去人肉作整个项目的拷贝。&lt;/p&gt;
&lt;p&gt;这就是 Git 的精要所在。你通过 &lt;code&gt;git commit&lt;/code&gt;告诉 Git 你想保存一份项目快照， Git 就会为你的项目中的各个文件的当前状态存一份记录。之后，绝大部分的 Git 命令都围绕这些记录展开。 比如查看它们的区别（diff），提取它们的内容，等等。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/git-ref/snapshots.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果你将 Git 看作一个排序、对比以及合并项目更新的工具，那就容易理解状况和正确做事了。&lt;/p&gt;
&lt;h1 id=&quot;获取与创建项目&quot;&gt;&lt;a href=&quot;#获取与创建项目&quot; class=&quot;headerlink&quot; title=&quot;获取与创建项目&quot;&gt;&lt;/a&gt;获取与创建项目&lt;/h1&gt;&lt;p&gt;你得先有一个 Git 仓库，才能用它进行操作。仓库是 Git 存放你要保存的快照的数据的地方。&lt;/p&gt;
&lt;p&gt;拥有一个 Git 仓库的途径有两种。在已有的目录中，初始化一个新的，其一。 比如一个新的项目，或者一个已存在的项目，但该项目尚未有版本控制。如果你想要复制一份别人的项目， 或者与别人合作某个项目，也可以从一个公开的 Git 仓库克隆，其二。本章将对两者都做介绍。&lt;/p&gt;
&lt;h2 id=&quot;git-init-将一个目录初始化为-Git-仓库&quot;&gt;&lt;a href=&quot;#git-init-将一个目录初始化为-Git-仓库&quot; class=&quot;headerlink&quot; title=&quot;git init 将一个目录初始化为 Git 仓库&quot;&gt;&lt;/a&gt;&lt;code&gt;git init&lt;/code&gt; 将一个目录初始化为 Git 仓库&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-init&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository#Initializing-a-Repository-in-an-Existing-Directory&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在目录中执行 &lt;code&gt;git init&lt;/code&gt;，就可以创建一个 Git 仓库了。比如，我们恰好有个目录，里头有些许文件，如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cd konichiwa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在这个项目里头，我们会用各种编程语言写 “Hello World” 实例。 到目前为止，我们只有 Ruby 的，不过，这才刚上路嘛。为了开始用 Git 对这个项目作版本控制，我们执行一下 &lt;code&gt;git init&lt;/code&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Initialized empty Git repository in /opt/konichiwa/.git/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 在 /opt/konichiwa/.git 目录初始化空 Git 仓库完毕。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在你可以看到在你的项目目录中有个 &lt;code&gt;.git&lt;/code&gt; 的子目录。 这就是你的 Git 仓库了，所有有关你的此项目的快照数据都存放在这里。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ls -a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.        ..       .git     README   hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;恭喜，现在你就有了一个 Git 仓库的架子，可以开始快照你的项目了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt;，用 &lt;code&gt;git init&lt;/code&gt; 来在目录中创建新的 Git 仓库。 你可以在任何时候、任何目录中这么做，完全是本地化的。&lt;/p&gt;
&lt;h2 id=&quot;git-clone-复制一个-Git-仓库，以上下其手&quot;&gt;&lt;a href=&quot;#git-clone-复制一个-Git-仓库，以上下其手&quot; class=&quot;headerlink&quot; title=&quot;git clone 复制一个 Git 仓库，以上下其手&quot;&gt;&lt;/a&gt;&lt;code&gt;git clone&lt;/code&gt; 复制一个 Git 仓库，以上下其手&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-clone&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository#Cloning-an-Existing-Repository&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;如果你需要与他人合作一个项目，或者想要复制一个项目，看看代码，你就可以克隆那个项目。 执行 &lt;code&gt;git clone [url]&lt;/code&gt;，[url] 为你想要复制的项目，就可以了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git clone git://github.com/schacon/simplegit.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Initialized empty Git repository in /private/tmp/simplegit/.git/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remote: Counting objects: 100, done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remote: Compressing objects: 100% (86/86), done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remote: Total 100 (delta 35), reused 0 (delta 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Receiving objects: 100% (100/100), 9.51 KiB, done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Resolving deltas: 100% (35/35), done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cd simplegit/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   Rakefile lib&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上述操作将复制该项目的全部记录，让你本地拥有这些。并且该操作将拷贝该项目的主分支， 使你能够查看代码，或编辑、修改。进到该目录中，你会看到 &lt;code&gt;.git&lt;/code&gt; 子目录。 所有的项目数据都存在那里。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ls -a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.        ..       .git     README   Rakefile lib&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cd .git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HEAD        description info        packed-refs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;branches    hooks       logs        refs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;config      index       objects&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;默认情况下，Git 会按照你提供的 URL 所指示的项目的名称创建你的本地项目目录。 通常就是该 URL 最后一个 &lt;code&gt;/&lt;/code&gt; 之后的任何东西。如果你想要一个不一样的名字， 你可以在该命令后加上它，就在那个 URL 后面。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt;，使用 &lt;code&gt;git clone&lt;/code&gt; 拷贝一个 Git 仓库到本地，让自己能够查看该项目，或者进行修改。&lt;/p&gt;
&lt;h1 id=&quot;基本快照&quot;&gt;&lt;a href=&quot;#基本快照&quot; class=&quot;headerlink&quot; title=&quot;基本快照&quot;&gt;&lt;/a&gt;基本快照&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Git 的工作就是创建和保存你的项目的快照及与之后的快照进行对比。本章将对有关创建与提交你的项目的快照的命令作介绍。&lt;/p&gt;
&lt;p&gt;这里有个重要的概念，Git 有一个叫做“索引”的东东，有点像是你的快照的缓存区。这就使你能够从更改的文件中创建出一系列组织良好的快照，而不是一次提交所有的更改。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt;，使用 &lt;code&gt;git add&lt;/code&gt; 添加需要追踪的新文件和待提交的更改， 然后使用 &lt;code&gt;git status&lt;/code&gt; 和 &lt;code&gt;git diff&lt;/code&gt; 查看有何改动， 最后用 &lt;code&gt;git commit&lt;/code&gt; 将你的快照记录。这就是你要用的基本流程，绝大部分时候都是这样的。&lt;/p&gt;
&lt;h2 id=&quot;git-add-添加文件到缓存&quot;&gt;&lt;a href=&quot;#git-add-添加文件到缓存&quot; class=&quot;headerlink&quot; title=&quot;git add 添加文件到缓存&quot;&gt;&lt;/a&gt;&lt;code&gt;git add&lt;/code&gt; 添加文件到缓存&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-add&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Tracking-New-Files&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;在 Git 中，在提交你修改的文件之前，你需要把它们添加到缓存。如果该文件是新创建的，你可以执行 &lt;code&gt;git add&lt;/code&gt; 将该文件添加到缓存，但是，即使该文件已经被追踪了 —— 也就是说，曾经提交过了 —— 你仍然需要执行 &amp;lt;cpde&amp;gt;git add 将新更改的文件添加到缓存去。让我们看几个例子：&amp;lt;/cpde&amp;gt;&lt;/p&gt;
&lt;p&gt;回到我们的 Hello World 示例，初始化该项目之后，我们就要用 &lt;code&gt;git add&lt;/code&gt; 将我们的文件添加进去了。 我们可以用 &lt;code&gt;git status&lt;/code&gt; 看看我们的项目的当前状态。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;?? README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;?? hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们有俩尚未被追踪的文件，得添加一下。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git add README hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在我们再执行 &lt;code&gt;git status&lt;/code&gt;，就可以看到这俩文件已经加上去了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A  README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A  hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;新项目中，添加所有文件很普遍，可以在当前工作目录执行命令：&lt;code&gt;git add .&lt;/code&gt;。 因为 Git 会递归地将你执行命令时所在的目录中的所有文件添加上去，所以如果你将当前的工作目录作为参数， 它就会追踪那儿的所有文件了。如此，&lt;code&gt;git add .&lt;/code&gt; 就和 &lt;code&gt;git add README hello.rb&lt;/code&gt; 有一样的效果。 此外，效果一致的还有 &lt;code&gt;git add *&lt;/code&gt;，不过那只是因为我们这还木有子目录，不需要递归地添加新文件。&lt;/p&gt;
&lt;p&gt;好了，现在我们改个文件，再跑一下 &lt;code&gt;git status&lt;/code&gt;，有点古怪。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AM README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A  hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;“AM” 状态的意思是，这个文件在我们将它添加到缓存之后又有改动。这意味着如果我们现在提交快照， 我们记录的将是上次跑 &lt;code&gt;git add&lt;/code&gt; 的时候的文件版本，而不是现在在磁盘中的这个。 Git 并不认为磁盘中的文件与你想快照的文件必须是一致的 —— （如果你需要它们一致，）得用 &lt;code&gt;git add&lt;/code&gt; 命令告诉它。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一言以蔽之&lt;/strong&gt;， 当你要将你的修改包含在即将提交的快照里的时候，执行 &lt;code&gt;git add&lt;/code&gt;。 任何你没有添加的改动都不会被包含在内 —— 这意味着你可以比绝大多数其他源代码版本控制系统更精确地归置你的快照。&lt;/p&gt;
&lt;p&gt;请查看《Pro Git》中 &lt;code&gt;git add&lt;/code&gt; 的 “-p” 参数，以了解更多关于提交文件的灵活性的例子。&lt;/p&gt;
&lt;h2 id=&quot;git-status-查看你的文件在工作目录与缓存的状态&quot;&gt;&lt;a href=&quot;#git-status-查看你的文件在工作目录与缓存的状态&quot; class=&quot;headerlink&quot; title=&quot;git status 查看你的文件在工作目录与缓存的状态&quot;&gt;&lt;/a&gt;&lt;code&gt;git status&lt;/code&gt; 查看你的文件在工作目录与缓存的状态&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-status&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Checking-the-Status-of-Your-Files&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;正如你在 &lt;code&gt;git add&lt;/code&gt; 小节中所看到的，你可以执行 &lt;code&gt;git status&lt;/code&gt; 命令查看你的代码在缓存与当前工作目录的状态。我演示该命令的时候加了 &lt;code&gt;-s&lt;/code&gt; 参数，以获得简短的结果输出。 若没有这个标记，命令 &lt;code&gt;git status&lt;/code&gt; 将告诉你更多的提示与上下文欣喜。 以下便是同样状态下，有跟没有 &lt;code&gt;-s&lt;/code&gt; 参数的输出对比。简短的输出如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AM README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A  hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;而同样的状态，详细的输出看起来是这样的：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# On branch master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Initial commit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Changes to be committed:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   (use &amp;quot;git rm --cached &amp;lt;file&amp;gt;...&amp;quot; to unstage)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# new file:   README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# new file:   hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Changed but not updated:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   (use &amp;quot;git add &amp;lt;file&amp;gt;...&amp;quot; to update what will be committed)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   (use &amp;quot;git checkout -- &amp;lt;file&amp;gt;...&amp;quot; to discard changes in working directory)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# modified:   README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你很容易发现简短的输出看起来很紧凑。而详细输出则很有帮助，提示你可以用何种命令完成你接下来可能要做的事情。&lt;/p&gt;
&lt;p&gt;Git 还会告诉你在你上次提交之后，有哪些文件被删除、修改或者存入缓存了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M  README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; D hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你可以看到，在简短输出中，有两栏。第一栏是缓存的，第二栏则是工作目录的。 所以假设你临时提交了 README 文件，然后又改了些，并且没有执行 &lt;code&gt;git add&lt;/code&gt;，你会看到这个：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MM README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; D hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;一言以蔽之&lt;/strong&gt;，执行 &lt;code&gt;git status&lt;/code&gt; 以查看在你上次提交之后有啥被修改或者临时提交了， 从而决定自己是否需要提交一次快照，同时也能知道有什么改变被记录进去了。&lt;/p&gt;
&lt;h2 id=&quot;git-diff-显示已写入缓存与已修改但尚未写入缓存的改动的区别&quot;&gt;&lt;a href=&quot;#git-diff-显示已写入缓存与已修改但尚未写入缓存的改动的区别&quot; class=&quot;headerlink&quot; title=&quot;git diff 显示已写入缓存与已修改但尚未写入缓存的改动的区别&quot;&gt;&lt;/a&gt;&lt;code&gt;git diff&lt;/code&gt; 显示已写入缓存与已修改但尚未写入缓存的改动的区别&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-diff&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Viewing-Your-Staged-and-Unstaged-Changes&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;git diff&lt;/code&gt; 有两个主要的应用场景。我们将在此介绍其一， 在 &lt;a href=&quot;/inspect&quot;&gt;检阅与对照&lt;/a&gt; 一章中，我们将介绍其二。 我们这里介绍的方式是用此命令描述已临时提交的或者已修改但尚未提交的改动。&lt;/p&gt;
&lt;h3 id=&quot;git-diff-尚未缓存的改动&quot;&gt;&lt;a href=&quot;#git-diff-尚未缓存的改动&quot; class=&quot;headerlink&quot; title=&quot;git diff #尚未缓存的改动&quot;&gt;&lt;/a&gt;&lt;code&gt;git diff&lt;/code&gt; #尚未缓存的改动&lt;/h3&gt;&lt;p&gt;如果没有其他参数，&lt;code&gt;git diff&lt;/code&gt; 会以规范化的 diff 格式（一个补丁）显示自从你上次提交快照之后尚未缓存的所有更改。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; M hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/hello.rb b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index d62ac43..8d15d50 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,7 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-    puts &amp;quot;hello world&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    puts &amp;quot;hola mundo&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;所以，&lt;code&gt;git status&lt;/code&gt;显示你上次提交更新至后所更改或者写入缓存的改动， 而 &lt;code&gt;git diff&lt;/code&gt; 一行一行地显示这些改动具体是啥。 通常执行完 &lt;code&gt;git status&lt;/code&gt; 之后接着跑一下 &lt;code&gt;git diff&lt;/code&gt; 是个好习惯。&lt;/p&gt;
&lt;h3 id=&quot;git-diff-cached-查看已缓存的改动&quot;&gt;&lt;a href=&quot;#git-diff-cached-查看已缓存的改动&quot; class=&quot;headerlink&quot; title=&quot;git diff --cached #查看已缓存的改动&quot;&gt;&lt;/a&gt;&lt;code&gt;git diff --cached&lt;/code&gt; #查看已缓存的改动&lt;/h3&gt;&lt;p&gt;&lt;code&gt;git diff --cached&lt;/code&gt; 命令会告诉你有哪些内容已经写入缓存了。 也就是说，此命令显示的是接下来要写入快照的内容。所以，如果你将上述示例中的 &lt;code&gt;hello.rb&lt;/code&gt; 写入缓存，因为 &lt;code&gt;git diff&lt;/code&gt; 显示的是尚未缓存的改动，所以在此执行它不会显示任何信息。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; M hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git add hello.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M  hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果你想看看已缓存的改动，你需要执行的是 &lt;code&gt;git diff --cached&lt;/code&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M  hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --cached&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/hello.rb b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index d62ac43..8d15d50 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,7 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-    puts &amp;quot;hello world&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    puts &amp;quot;hola mundo&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;git-diff-HEAD-查看已缓存的与未缓存的所有改动&quot;&gt;&lt;a href=&quot;#git-diff-HEAD-查看已缓存的与未缓存的所有改动&quot; class=&quot;headerlink&quot; title=&quot;git diff HEAD 查看已缓存的与未缓存的所有改动&quot;&gt;&lt;/a&gt;&lt;code&gt;git diff HEAD&lt;/code&gt; 查看已缓存的与未缓存的所有改动&lt;/h3&gt;&lt;p&gt;如果你想一并查看已缓存的与未缓存的改动，可以执行 &lt;code&gt;git diff HEAD&lt;/code&gt; —— 也就是说你要看到的是工作目录与上一次提交的更新的区别，无视缓存。 假设我们又改了些 &lt;code&gt;ruby.rb&lt;/code&gt; 的内容，那缓存的与未缓存的改动我们就都有了。 以上三个 &lt;code&gt;diff&lt;/code&gt; 命令的结果如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim hello.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/hello.rb b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 4f40006..2ae9ba4 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,7 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+  # says hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     puts &amp;quot;hola mundo&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --cached&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/hello.rb b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 2aabb6e..4f40006 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,7 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-    puts &amp;quot;hello world&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    puts &amp;quot;hola mundo&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff HEAD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/hello.rb b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 2aabb6e..2ae9ba4 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,7 +1,8 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+  # says hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-    puts &amp;quot;hello world&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    puts &amp;quot;hola mundo&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;git-diff-stat-显示摘要而非整个-diff&quot;&gt;&lt;a href=&quot;#git-diff-stat-显示摘要而非整个-diff&quot; class=&quot;headerlink&quot; title=&quot;git diff --stat 显示摘要而非整个 diff&quot;&gt;&lt;/a&gt;&lt;code&gt;git diff --stat&lt;/code&gt; 显示摘要而非整个 diff&lt;/h3&gt;&lt;p&gt;如果我们不想要看整个 diff 输出，但是又想比 &lt;code&gt;git status&lt;/code&gt; 详细点， 就可以用 &lt;code&gt;--stat&lt;/code&gt; 选项。该选项使它显示摘要而非全文。上文示例在使用 &lt;code&gt;--stat&lt;/code&gt; 选项时，输出如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MM hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --stat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; hello.rb |    1 +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 1 insertions(+), 0 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --cached --stat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; hello.rb |    2 +-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 1 insertions(+), 1 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff HEAD --stat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; hello.rb |    3 ++-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 2 insertions(+), 1 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你还可以在上述命令后面制定一个目录，从而只查看特定文件或子目录的 &lt;code&gt;diff&lt;/code&gt; 输出。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt;， 执行 &lt;code&gt;git diff&lt;/code&gt; 来查看执行 &lt;code&gt;git status&lt;/code&gt; 的结果的详细信息 —— 一行一行地显示这些文件是如何被修改或写入缓存的。&lt;/p&gt;
&lt;h2 id=&quot;git-commit-记录缓存内容的快照&quot;&gt;&lt;a href=&quot;#git-commit-记录缓存内容的快照&quot; class=&quot;headerlink&quot; title=&quot;git commit 记录缓存内容的快照&quot;&gt;&lt;/a&gt;&lt;code&gt;git commit&lt;/code&gt; 记录缓存内容的快照&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-commit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Committing-Your-Changes&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;现在你使用 &lt;code&gt;git add&lt;/code&gt; 命令将想要快照的内容写入了缓存， 执行 &lt;code&gt;git commit&lt;/code&gt; 就将它实际存储快照了。 Git 为你的每一个提交都记录你的名字与电子邮箱地址，所以第一步是告诉 Git 这些都是啥。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git config --global user.name &amp;apos;Your Name&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git config --global user.email you@somedomain.com&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;让我们写入缓存，并提交对 &lt;code&gt;hello.rb&lt;/code&gt; 的所有改动。在首个例子中，我们使用 &lt;code&gt;-m&lt;/code&gt; 选项以在命令行中提供提交注释。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git add hello.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M  hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -m &amp;apos;my hola mundo changes&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[master 68aa034] my hola mundo changes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 2 insertions(+), 1 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在我们已经记录了快照。如果我们再执行 &lt;code&gt;git status&lt;/code&gt;，会看到我们有一个“干净的工作目录”。 这意味着我们在最近一次提交之后，没有做任何改动 —— 在我们的项目中没有未快照的工作。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# On branch master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nothing to commit (working directory clean)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果你漏掉了 &lt;code&gt;-m&lt;/code&gt; 选项，Git 会尝试为你打开一个编辑器以填写提交信息。 如果 Git 在你对它的配置中找不到相关信息，默认会打开 &lt;code&gt;vim&lt;/code&gt;。屏幕会像这样：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# Please enter the commit message for your changes. Lines starting&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# with &amp;apos;#&amp;apos; will be ignored, and an empty message aborts the commit.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# On branch master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Changes to be committed:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   (use &amp;quot;git reset HEAD &amp;lt;file&amp;gt;...&amp;quot; to unstage)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# modified:   hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;.git/COMMIT_EDITMSG&amp;quot; 9L, 257C&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在此，你在文件头部添加实际的提交信息。以“#”开头的行都会被无视 ——Git 将 &lt;code&gt;git status&lt;/code&gt; 的输出结果放在那儿以提示你都改了、缓存了啥。&lt;/p&gt;
&lt;p&gt;通常，撰写良好的提交信息是很重要的。以开放源代码项目为例，多多少少以以下格式写你的提示消息是个不成文的规定：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;简短的关于改动的总结（25个字或者更少）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果有必要，更详细的解释文字。约 36 字时换行。在某些情况下，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;第一行会被作为电子邮件的开头，而剩余的则会作为邮件内容。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;将小结从内容隔开的空行是至关重要的（除非你没有内容）；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果这两个待在一起，有些 git 工具会犯迷糊。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;空行之后是更多的段落。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; - 列表也可以&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; - 通常使用连字符（-）或者星号（*）来标记列表，前面有个空格，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   在列表项之间有空行，不过这些约定也会有些变化。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Please enter the commit message for your changes. Lines starting&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# with &amp;apos;#&amp;apos; will be ignored, and an empty message aborts the commit.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# On branch master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Changes to be committed:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   (use &amp;quot;git reset HEAD &amp;lt;file&amp;gt;...&amp;quot; to unstage)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# modified:   hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;.git/COMMIT_EDITMSG&amp;quot; 25L, 884C written&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;提交注解是很重要的。因为 Git 很大一部分能耐就是它在组织本地提交和与他人分享的弹性， 它很给力地能够让你为逻辑独立的改变写三到四条提交注解，以便你的工作被同仁审阅。因为提交与推送改动是有区别的， 请务必花时间将各个逻辑独立的改动放到另外一个提交，并附上一份良好的提交注解， 以使与你合作的人能够方便地了解你所做的，以及你为何要这么做。&lt;/p&gt;
&lt;h3 id=&quot;git-commit-a-自动将在提交前将已记录、修改的文件放入缓存区&quot;&gt;&lt;a href=&quot;#git-commit-a-自动将在提交前将已记录、修改的文件放入缓存区&quot; class=&quot;headerlink&quot; title=&quot;git commit -a 自动将在提交前将已记录、修改的文件放入缓存区&quot;&gt;&lt;/a&gt;&lt;code&gt;git commit -a&lt;/code&gt; 自动将在提交前将已记录、修改的文件放入缓存区&lt;/h3&gt;&lt;p&gt;如果你觉得 &lt;code&gt;git add&lt;/code&gt; 提交缓存的流程太过繁琐，Git 也允许你用 &lt;code&gt;-a&lt;/code&gt; 选项跳过这一步。 基本上这句话的意思就是，为任何已有记录的文件执行 &lt;code&gt;git add&lt;/code&gt; —— 也就是说，任何在你最近的提交中已经存在，并且之后被修改的文件。 这让你能够用更 Subversion 方式的流程，修改些文件，然后想要快照所有所做的改动的时候执行 &lt;code&gt;git commit -a&lt;/code&gt;。 不过你仍然需要执行 &lt;code&gt;git add&lt;/code&gt; 来添加新文件，就像 Subversion 一样。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; M  hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -m &amp;apos;changes to hello file&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# On branch master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Changed but not updated:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   (use &amp;quot;git add &amp;lt;file&amp;gt;...&amp;quot; to update what will be committed)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   (use &amp;quot;git checkout -- &amp;lt;file&amp;gt;...&amp;quot; to discard changes in working directory)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# modified:   hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;no changes added to commit (use &amp;quot;git add&amp;quot; and/or &amp;quot;git commit -a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -am &amp;apos;changes to hello file&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[master 78b2670] changes to hello file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 2 insertions(+), 1 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意，如果你不缓存改动，直接执行 &lt;code&gt;git commit&lt;/code&gt;，Git 会直接给出 &lt;code&gt;git status&lt;/code&gt; 命令的输出，提醒你啥也没缓存。我已将该消息中的重要部分高亮，它说没有添加需要提交的缓存。 如果你使用 &lt;code&gt;-a&lt;/code&gt;，它会缓存并提交每个改动（不含新文件）。&lt;/p&gt;
&lt;p&gt;现在你就完成了整个快照的流程 ——改些文件，然后用 &lt;code&gt;git add&lt;/code&gt; 将要提交的改动提交到缓存， 用 &lt;code&gt;git status&lt;/code&gt; 和 &lt;code&gt;git diff&lt;/code&gt; 看看你都改了啥，最后 &lt;code&gt;git commit&lt;/code&gt; 永久地保存快照。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt;，执行 &lt;code&gt;git commit&lt;/code&gt; 记录缓存区的快照。如果需要的话，这个快照可以用来做比较、共享以及恢复。&lt;/p&gt;
&lt;h2 id=&quot;git-reset-HEAD-取消缓存已缓存的内容&quot;&gt;&lt;a href=&quot;#git-reset-HEAD-取消缓存已缓存的内容&quot; class=&quot;headerlink&quot; title=&quot;git reset HEAD 取消缓存已缓存的内容&quot;&gt;&lt;/a&gt;&lt;code&gt;git reset HEAD&lt;/code&gt; 取消缓存已缓存的内容&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-reset&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Undoing-Things#Unstaging-a-Staged-File&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;code&gt;git reset&lt;/code&gt; 可能是人类写的最费解的命令了。 我用 Git 有些年头了，甚至还写了本书，但有的时候还是会搞不清它会做什么。 所以，我只说三个明确的，通常有用的调用。请你跟我一样尽管用它 —— 因为它可以很有用。&lt;/p&gt;
&lt;p&gt;在此例中，我们可以用它来将不小心缓存的东东取消缓存。假设你修改了两个文件，想要将它们记录到两个不同的提交中去。 你应该缓存并提交一个，再缓存并提交另外一个。如果你不小心两个都缓存了，那要如何才能&lt;em&gt;取消&lt;/em&gt;缓存呢？ 你可以用 &lt;code&gt;git reset HEAD -- file&lt;/code&gt;。 技术上说，在这里你不需要使用 &lt;code&gt;--&lt;/code&gt; —— 它用来告诉 Git 这时你已经不再列选项，剩下的是文件路径了。 不过养成使用它分隔选项与路径的习惯很重要，即使在你可能并不需要的时候。&lt;/p&gt;
&lt;p&gt;好，让我们看看取消缓存是什么样子的。这里我们有两个最近提交之后又有所改动的文件。我们将两个都缓存，并取消缓存其中一个。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; M README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; M hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git add .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M  README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M  hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git reset HEAD -- hello.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Unstaged changes after reset:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M  README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; M hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在你执行 &lt;code&gt;git commit&lt;/code&gt; 将只记录 &lt;code&gt;README&lt;/code&gt; 文件的改动，并不含现在并不在缓存中的 &lt;code&gt;hello.rb&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如果你好奇，它实际的操作是将该文件在“索引”中的校验和重置为最近一次提交中的值。 &lt;code&gt;git add&lt;/code&gt; 会计算一个文件的校验和，将它添加到“索引”中， 而 &lt;code&gt;git reset HEAD&lt;/code&gt; 将它改写回原先的，从而取消缓存操作。&lt;/p&gt;
&lt;p&gt;如果你想直接执行 &lt;code&gt;git unstage&lt;/code&gt;，你可以在 Git 中配置个别名。 执行 &lt;code&gt;git config --global alias.unstage &amp;quot;reset HEAD&amp;quot;&lt;/code&gt; 即可。 一旦执行完它，你就可以直接用 &lt;code&gt;git unstage [file]&lt;/code&gt; 作为代替了。&lt;/p&gt;
&lt;p&gt;如果你忘了取消缓存的命令，Git 的常规 &lt;code&gt;git status&lt;/code&gt; 输出的提示会很有帮助。 例如，在你有已缓存的文件时，如果你不带 &lt;code&gt;-s&lt;/code&gt; 执行 &lt;code&gt;git status&lt;/code&gt;，它将告诉你怎样取消缓存：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# On branch master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Changes to be committed:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   (use &amp;quot;git reset HEAD &amp;lt;file&amp;gt;...&amp;quot; to unstage)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   modified:   README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   modified:   hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt;，执行 &lt;code&gt;git reset HEAD&lt;/code&gt; 以取消之前 &lt;code&gt;git add&lt;/code&gt; 添加，但不希望包含在下一提交快照中的缓存。&lt;/p&gt;
&lt;h2 id=&quot;git-rm-将文件从缓存区移除&quot;&gt;&lt;a href=&quot;#git-rm-将文件从缓存区移除&quot; class=&quot;headerlink&quot; title=&quot;git rm 将文件从缓存区移除&quot;&gt;&lt;/a&gt;&lt;code&gt;git rm&lt;/code&gt; 将文件从缓存区移除&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-rm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Removing-Files&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;git rm&lt;/code&gt; 会将条目从缓存区中移除。这与 &lt;code&gt;git reset HEAD&lt;/code&gt; 将条目取消缓存是有区别的。 “取消缓存”的意思就是将缓存区恢复为我们做出修改之前的样子。 在另一方面，&lt;code&gt;git rm&lt;/code&gt; 则将该文件彻底从缓存区踢出，因此它不再下一个提交快照之内，进而有效地删除它。&lt;/p&gt;
&lt;p&gt;默认情况下，&lt;code&gt;git rm file&lt;/code&gt; 会将文件从缓存区和你的硬盘中（工作目录）删除。 如果要在工作目录中留着该文件，可以使用 &lt;code&gt;git rm --cached&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;git-mv-git-rm-cached-orig-mv-orig-new-git-add-new&quot;&gt;&lt;a href=&quot;#git-mv-git-rm-cached-orig-mv-orig-new-git-add-new&quot; class=&quot;headerlink&quot; title=&quot;git mv git rm --cached orig; mv orig new; git add new&quot;&gt;&lt;/a&gt;&lt;code&gt;git mv git rm --cached orig; mv orig new; git add new&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;不像绝大多数其他版本控制系统，Git 并不记录记录文件重命名。它反而只记录快照，并对比快照以找到有啥文件可能被重命名了。 如果一个文件从更新中删除了，而在下次快照中新添加的另一个文件的内容与它很相似，Git 就知道这极有可能是个重命名。 因此，虽然有 &lt;code&gt;git mv&lt;/code&gt; 命令，但它有点多余 —— 它做得所有事情就是 &lt;code&gt;git rm --cached&lt;/code&gt;， 重命名磁盘上的文件，然后再执行 &lt;code&gt;git add&lt;/code&gt; 把新文件添加到缓存区。 你并不需要用它，不过如果觉得这样容易些，尽管用吧。&lt;/p&gt;
&lt;p&gt;我自己并不使用此命令的普通形式 —— 删除文件。通常直接从硬盘删除文件，然后执行 &lt;code&gt;git commit -a&lt;/code&gt; 会简单些。 它会自动将删除的文件从索引中移除。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt;， 执行 &lt;code&gt;git rm&lt;/code&gt; 来删除 Git 追踪的文件。它还会删除你的工作目录中的相应文件。&lt;/p&gt;
&lt;h1 id=&quot;分支与合并&quot;&gt;&lt;a href=&quot;#分支与合并&quot; class=&quot;headerlink&quot; title=&quot;分支与合并&quot;&gt;&lt;/a&gt;分支与合并&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Branching&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;分支是我最喜欢的 Git 特性之一。如果你用过其他版本控制系统，把你所知的分支给忘记，倒可能更有帮助些 —— 事实上，以我们使用分支的方式，把 Git 的分支看作 &lt;em&gt;上下文&lt;/em&gt; 反而更合适。 当你检出分支时，你可以在两三个不同的分支之间来回切换。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt;，你可以执行 &lt;code&gt;git branch (branchname)&lt;/code&gt; 来创建分支， 使用 &lt;code&gt;git checkout (branchname)&lt;/code&gt; 命令切换到该分支，在该分支的上下文环境中， 提交快照等，之后可以很容易地来回切换。当你切换分支的时候，Git 会用该分支的最后提交的快照替换你的工作目录的内容， 所以多个分支不需要多个目录。使用 &lt;code&gt;git merge&lt;/code&gt; 来合并分支。你可以多次合并到统一分支， 也可以选择在合并之后直接删除被并入的分支。&lt;/p&gt;
&lt;h2 id=&quot;git-branch-列出、创建与管理工作上下文&quot;&gt;&lt;a href=&quot;#git-branch-列出、创建与管理工作上下文&quot; class=&quot;headerlink&quot; title=&quot;git branch 列出、创建与管理工作上下文&quot;&gt;&lt;/a&gt;&lt;code&gt;git branch&lt;/code&gt; 列出、创建与管理工作上下文&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-branch&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Branching-What-a-Branch-Is&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;h2 id=&quot;git-checkout-切换到新的分支上下文&quot;&gt;&lt;a href=&quot;#git-checkout-切换到新的分支上下文&quot; class=&quot;headerlink&quot; title=&quot;git checkout 切换到新的分支上下文&quot;&gt;&lt;/a&gt;&lt;code&gt;git checkout&lt;/code&gt; 切换到新的分支上下文&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-checkout&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;code&gt;git branch&lt;/code&gt; 命令是 Git 中的通用分支管理工具，可以通过它完成多项任务。 我们先说你会用到的最多的命令 —— 列出分支、创建分支和删除分支。 我们还会介绍用来切换分支的 &lt;code&gt;git checkout&lt;/code&gt; 命令。&lt;/p&gt;
&lt;h3 id=&quot;git-branch-列出可用的分支&quot;&gt;&lt;a href=&quot;#git-branch-列出可用的分支&quot; class=&quot;headerlink&quot; title=&quot;git branch 列出可用的分支&quot;&gt;&lt;/a&gt;&lt;code&gt;git branch&lt;/code&gt; 列出可用的分支&lt;/h3&gt;&lt;p&gt;没有参数时，&lt;code&gt;git branch&lt;/code&gt; 会列出你在本地的分支。你所在的分支的行首会有个星号作标记。 如果你开启了&lt;a href=&quot;http://git-scm.com/book/en/Customizing-Git-Git-Configuration#Colors-in-Git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;彩色模式&lt;/a&gt;，当前分支会用绿色显示。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;此例的意思就是，我们有一个叫做“master”的分支，并且该分支是当前分支。 当你执行 &lt;code&gt;git init&lt;/code&gt; 的时候，缺省情况下 Git 就会为你创建“master”分支。 但是这名字一点特殊意味都没有 —— 事实上你并不非得要一个叫做“master”的分支。 不过由于它是缺省分支名的缘故，绝大部分项目都有这个分支。&lt;/p&gt;
&lt;h3 id=&quot;git-branch-branchname-创建新分支&quot;&gt;&lt;a href=&quot;#git-branch-branchname-创建新分支&quot; class=&quot;headerlink&quot; title=&quot;git branch (branchname) 创建新分支&quot;&gt;&lt;/a&gt;&lt;code&gt;git branch (branchname)&lt;/code&gt; 创建新分支&lt;/h3&gt;&lt;p&gt;我们动手创建一个分支，并切换过去。执行 &lt;code&gt;git branch (branchname)&lt;/code&gt; 即可。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git branch testing&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  testing&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在我们可以看到，有了一个新分支。当你以此方式在上次提交更新之后创建了新分支，如果后来又有更新提交， 然后又切换到了“testing”分支，Git 将还原你的工作目录到你创建分支时候的样子 —— 你可以把它看作一个记录你当前进度的书签。让我们实际运用看看 —— 我们用 &lt;code&gt;git checkout (branch)&lt;/code&gt; 切换到我们要修改的分支。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ echo &amp;apos;test content&amp;apos; &amp;gt; test.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ echo &amp;apos;more content&amp;apos; &amp;gt; more.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git add *.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -m &amp;apos;added two files&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[master 8bd6d8b] added two files&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2 files changed, 2 insertions(+), 0 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; create mode 100644 more.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; create mode 100644 test.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb more.txt test.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout testing&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to branch &amp;apos;testing&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当我们切换到“测试”分支的时候，我们添加的新文件被移除了。切换回“master”分支的时候，它们有重新出现了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to branch &amp;apos;master&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb more.txt test.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;git-checkout-b-branchname-创建新分支，并立即切换到它&quot;&gt;&lt;a href=&quot;#git-checkout-b-branchname-创建新分支，并立即切换到它&quot; class=&quot;headerlink&quot; title=&quot;git checkout -b (branchname) 创建新分支，并立即切换到它&quot;&gt;&lt;/a&gt;&lt;code&gt;git checkout -b (branchname)&lt;/code&gt; 创建新分支，并立即切换到它&lt;/h3&gt;&lt;p&gt;通常情况下，你会更希望立即切换到新分支，从而在该分支中操作，然后当此分支的开发日趋稳定时， 将它合并到稳定版本的分支（例如“master”）中去。 执行 &lt;code&gt;git branch newbranch; git checkout newbranch&lt;/code&gt; 也很简单， 不过 Git 还为你提供了快捷方式：&lt;code&gt;git checkout -b newbranch&lt;/code&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb more.txt test.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout -b removals&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to a new branch &amp;apos;removals&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git rm more.txt &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm &amp;apos;more.txt&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git rm test.txt &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm &amp;apos;test.txt&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -am &amp;apos;removed useless files&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[removals 8f7c949] removed useless files&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2 files changed, 0 insertions(+), 2 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; delete mode 100644 more.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; delete mode 100644 test.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to branch &amp;apos;master&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb more.txt test.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如你所见，我们创建了一个分支，在该分支的上下文中移除了一些文件，然后切换回我们的主分支，那些文件又回来了。 使用分支将工作切分开来，从而让我们能够在不同上下文中做事，并来回切换。&lt;/p&gt;
&lt;p&gt;创建新分支，在其中完成一部分工作，完成之后将它合并到主分支并删除。你会觉得这很方便，因为这么做很快很容易。 如此，当你觉得这部分工作并不靠谱，舍弃它很容易。并且，如果你必须回到稳定分支做些事情， 也可以很方便地这个独立分支的工作先丢在一边，完成要事之后再切换回来。&lt;/p&gt;
&lt;h3 id=&quot;git-branch-d-branchname-删除分支&quot;&gt;&lt;a href=&quot;#git-branch-d-branchname-删除分支&quot; class=&quot;headerlink&quot; title=&quot;git branch -d (branchname) 删除分支&quot;&gt;&lt;/a&gt;&lt;code&gt;git branch -d (branchname)&lt;/code&gt; 删除分支&lt;/h3&gt;&lt;p&gt;假设我们要删除一个分支（比如上例中的“testing”分支，该分支没啥特殊的内容了）， 可以执行 &lt;code&gt;git branch -d (branch)&lt;/code&gt; 把它删掉。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  testing&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git branch -d testing&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Deleted branch testing (was 78b2670).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 使用 &lt;code&gt;git branch&lt;/code&gt; 列出现有的分支、创建新分支以及删除不必要或者已合并的分支。&lt;/p&gt;
&lt;h2 id=&quot;git-merge-将分支合并到你的当前分支&quot;&gt;&lt;a href=&quot;#git-merge-将分支合并到你的当前分支&quot; class=&quot;headerlink&quot; title=&quot;git merge 将分支合并到你的当前分支&quot;&gt;&lt;/a&gt;&lt;code&gt;git merge&lt;/code&gt; 将分支合并到你的当前分支&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-merge&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;docs&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#Basic-Merging&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;book&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;一旦某分支有了独立内容，你终究会希望将它合并回到你的主分支。 你可以使用 &lt;code&gt;git merge&lt;/code&gt; 命令将任何分支合并到当前分支中去。 我们那上例中的“removals”分支为例。假设我们创建了一个分支，移除了一些文件，并将它提交到该分支， 其实该分支是与我们的主分支（也就是“master”）独立开来的。 要想将这些移除操作包含在主分支中，你可以将“removals”分支合并回去。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  removals&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb more.txt test.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git merge removals&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Updating 8bd6d8b..8f7c949&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fast-forward&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; more.txt |    1 -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; test.txt |    1 -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2 files changed, 0 insertions(+), 2 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; delete mode 100644 more.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; delete mode 100644 test.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README   hello.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;更多复杂合并&quot;&gt;&lt;a href=&quot;#更多复杂合并&quot; class=&quot;headerlink&quot; title=&quot;更多复杂合并&quot;&gt;&lt;/a&gt;更多复杂合并&lt;/h3&gt;&lt;p&gt;当然，合并并不仅仅是简单的文件添加、移除的操作，Git 也会合并修改 —— 事实上，它很会合并修改。 举例，我们看看在某分支中编辑某个文件，然后在另一个分支中把它的名字改掉再做些修改， 最后将这俩分支合并起来。你觉得会变成一坨 shi？我们试试看。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat hello.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    puts &amp;quot;Hello World&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HelloWorld.hello&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;首先，我们创建一个叫做“change_class”的分支，切换过去，从而将重命名类等操作独立出来。我们将类名从 “HelloWorld” 改为 “HiWorld”。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout -b change_class&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M hello.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to a new branch &amp;apos;change_class&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim hello.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -1 hello.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class HiWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -am &amp;apos;changed the class name&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[change_class 3467b0a] changed the class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 2 insertions(+), 4 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后，将重命名类操作提交到 “change_class” 分支中。 现在，假如切换回 “master” 分支我们可以看到类名恢复到了我们切换到 “change_class” 分支之前的样子。 现在，再做些修改（即代码中的输出），同时将文件名从 &lt;code&gt;hello.rb&lt;/code&gt; 改为 &lt;code&gt;ruby.rb&lt;/code&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to branch &amp;apos;master&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git mv hello.rb ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim ruby.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/ruby.rb b/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 2aabb6e..bf64b17 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,7 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-    puts &amp;quot;Hello World&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    puts &amp;quot;Hello World from Ruby&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -am &amp;apos;added from ruby&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[master b7ae93b] added from ruby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 1 insertions(+), 1 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; rename hello.rb =&amp;gt; ruby.rb (65%)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在这些改变已经记录到我的 “master” 分支了。请注意，这里类名还是 “HelloWorld”，而不是 “HiWorld”。 然后我想将类名的改变合并过来，我把 “change_class” 分支合并过来就行了。 但是，我已经将文件名都改掉了，Git 知道该怎么办么？&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  change_class&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git merge change_class&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Renaming hello.rb =&amp;gt; ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Auto-merging ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Merge made by recursive.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ruby.rb |    6 ++----&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 2 insertions(+), 4 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class HiWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    puts &amp;quot;Hello World from Ruby&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HiWorld.hello&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;不错，它就是发现了。请注意，在这部操作，我没有遇到合并冲突，并且文件已经重命名、类名也换掉了。挺酷。&lt;/p&gt;
&lt;h3 id=&quot;合并冲突&quot;&gt;&lt;a href=&quot;#合并冲突&quot; class=&quot;headerlink&quot; title=&quot;合并冲突&quot;&gt;&lt;/a&gt;合并冲突&lt;/h3&gt;&lt;p&gt;那么，Git 合并很有魔力，我们再也不用处理合并冲突了，对吗？不太确切。 不同分支中修改了相同区块的代码，电脑自己猜不透神马的情况下，冲突就摆在我们面前了。 我们看看两个分支中改了同一行代码的例子。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git branch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout -b fix_readme&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to a new branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim README &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -am &amp;apos;fixed readme title&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[fix_readme 3ac015d] fixed readme title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 1 insertions(+), 1 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们在某分支中修改了 README 文件中的一行，并提交了。我们再在 “master” 分支中对同个文件的同一行内容作不同的修改。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to branch &amp;apos;master&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim README &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -am &amp;apos;fixed readme title differently&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[master 3cbb6aa] fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 1 insertions(+), 1 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;有意思的来了 —— 我们将前一个分支合并到 “master” 分支，一个合并冲突就出现了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git merge fix_readme&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Auto-merging README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CONFLICT (content): Merge conflict in README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Automatic merge failed; fix conflicts and then commit the result.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat README &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEAD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Many Hello World Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;=======&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hello World Lang Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; fix_readme&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;This project has examples of hello world in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nearly every programming language.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你可以看到，Git 在产生合并冲突的地方插入了标准的与 Subversion 很像的合并冲突标记。 轮到我们去解决这些冲突了。在这里我们就手动把它解决。如果你要 Git 打开一个图形化的合并工具， 可以看看 &lt;a href=&quot;http://git-scm.com/docs/git-mergetool&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;git 合并工具&lt;/a&gt; （比如 kdiff3、emerge、p4merge 等）。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim README   here I&amp;apos;m fixing the conflict&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --cc README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 9103e27,69cad1a..0000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@@ -1,4 -1,4 +1,4 @@@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- Many Hello World Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; -Hello World Lang Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;++Many Hello World Lang Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  This project has examples of hello world in&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在 Git 中，处理合并冲突的时候有个很酷的提示。 如果你执行 &lt;code&gt;git diff&lt;/code&gt;，就像我演示的这样，它会告诉你冲突的两方，和你是如何解决的。 现在是时候把它标记为已解决了。在 Git 中，我们可以用 &lt;code&gt;git add&lt;/code&gt; —— 要告诉 Git 文件冲突已经解决，你必须把它写入缓存区。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UU README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git add README &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git status -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M  README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[master 8d585ea] Merge branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在我们成功解决了合并中的冲突，并提交了结果&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 使用 &lt;code&gt;git merge&lt;/code&gt; 将另一个分支并入当前的分支中去。 Git 会自动以最佳方式将两个不同快照中独特的工作合并到一个新快照中去。&lt;/p&gt;
&lt;h2 id=&quot;git-log-显示一个分支中提交的更改记录&quot;&gt;&lt;a href=&quot;#git-log-显示一个分支中提交的更改记录&quot; class=&quot;headerlink&quot; title=&quot;git log 显示一个分支中提交的更改记录&quot;&gt;&lt;/a&gt;&lt;code&gt;git log&lt;/code&gt; 显示一个分支中提交的更改记录&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-log&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Tools-Revision-Selection#Commit-Ranges&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;到目前为止，我们已经提交快照到项目中，在不同的各自分离的上下文中切换， 但假如我们忘了自己是如何到目前这一步的那该怎么办？或者假如我们想知道此分支与彼分支到底有啥区别？ Git 提供了一个告诉你使你达成当前快照的所有提交消息的工具，叫做 &lt;code&gt;git log&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;要理解日志（log）命令，你需要了解当执行 &lt;code&gt;git commit&lt;/code&gt; 以存储一个快照的时候，都有啥信息被保存了。 除了文件详单、提交消息和提交者的信息，Git 还保存了你的此次提交所基于的快照。 也就是，假如你克隆了一个项目，你是在什么快照的基础上做的修改而得到新保存的快照的？ 这有益于为项目进程提供上下文，使 Git 能够弄明白谁做了什么改动。 如果 Git 有你的快照所基于的快照的话，它就能自动判断你都改变了什么。而新提交所基于的提交，被称作新提交的“父亲”。&lt;/p&gt;
&lt;p&gt;某分支的按时间排序的“父亲”列表，当你在该分支时，可以执行 &lt;code&gt;git log&lt;/code&gt; 以查看。 例如，如果我们在本章中操作的 Hello World 项目中执行 &lt;code&gt;git log&lt;/code&gt;，我们可以看到已提交的消息。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 8d585ea6faf99facd39b55d6f6a3b3f481ad0d3d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Merge: 3cbb6aa 3ac015d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Fri Jun 4 12:59:47 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Merge branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Conflicts:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 3cbb6aae5c0cbd711c098e113ae436801371c95e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Fri Jun 4 12:58:53 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 3ac015da8ade34d4c7ebeffa2053fcac33fb495b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Fri Jun 4 12:58:36 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fixed readme title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 558151a95567ba4181bab5746bc8f34bd87143d6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Merge: b7ae93b 3467b0a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Fri Jun 4 12:37:05 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Merge branch &amp;apos;change_class&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们可以用 &lt;code&gt;--oneline&lt;/code&gt; 选项来查看历史记录的紧凑简洁的版本。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --oneline&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8d585ea Merge branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3cbb6aa fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3ac015d fixed readme title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;558151a Merge branch &amp;apos;change_class&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b7ae93b added from ruby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3467b0a changed the class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17f4acf first commit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这告诉我们的是，此项目的开发历史。如果提交消息描述性很好，这就能为我们提供关于有啥改动被应用、或者影响了当前快照的状态、以及这快照里头都有啥。&lt;/p&gt;
&lt;p&gt;我们还可以用它的十分有帮助的 &lt;code&gt;--graph&lt;/code&gt; 选项，查看历史中什么时候出现了分支、合并。以下为相同的命令，开启了拓扑图选项：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --oneline --graph&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*   8d585ea Merge branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| * 3ac015d fixed readme title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* | 3cbb6aa fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*   558151a Merge branch &amp;apos;change_class&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| * 3467b0a changed the class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* | b7ae93b added from ruby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* 17f4acf first commit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在我们可以更清楚明了地看到何时工作分叉、又何时归并。 这对查看发生了什么、应用了什么改变很有帮助，并且极大地帮助你管理你的分支。 让我们创建一个分支，在里头做些事情，然后切回到主分支，也做点事情，然后看看 &lt;code&gt;log&lt;/code&gt; 命令是如何帮助我们理清这俩分支上都发生了啥的。&lt;/p&gt;
&lt;p&gt;首先我们创建一个分支，来添加 Erlang 编程语言的 Hello World 示例 —— 我们想要在一个分支里头做这个，以避免让可能还不能工作的代码弄乱我们的稳定分支。 这样就可以切来切去，片叶不沾身。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout -b erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to a new branch &amp;apos;erlang&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim erlang_hw.erl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git add erlang_hw.erl &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -m &amp;apos;added erlang&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[erlang ab5ab4c] added erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 5 insertions(+), 0 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; create mode 100644 erlang_hw.erl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;由于我们玩函数式编程很开心，以至于沉迷其中，又在“erlang”分支中添加了一个 Haskell 的示例程序。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ vim haskell.hs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git add haskell.hs &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -m &amp;apos;added haskell&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[erlang 1834130] added haskell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 4 insertions(+), 0 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; create mode 100644 haskell.hs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后，我们决定还是把 Ruby 程序的类名改回原先的样子。与其创建另一个分支，我们可以返回主分支，改变它，然后直接提交。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Switched to branch &amp;apos;master&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;README  ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vim ruby.rb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git commit -am &amp;apos;reverted to old class name&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[master 594f90b] reverted to old class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 2 insertions(+), 2 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在假设我们有段时间不做这个项目了，我们做别的去了。 当我们回来的时候，我们想知道“erlang”分支都是啥，而主分支的进度又是怎样。 仅仅看分支的名字，我们是无从知道自己还在里面有 Haskell 的改动的，但是用 &lt;code&gt;git log&lt;/code&gt; 我们就可以。 如果你在命令行中提供一个分支名字，它就会显示该分支历史中“可及”的提交，即从该分支创立起可追溯的影响了最终的快照的提交。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --oneline erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1834130 added haskell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ab5ab4c added erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8d585ea Merge branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3cbb6aa fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3ac015d fixed readme title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;558151a Merge branch &amp;apos;change_class&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b7ae93b added from ruby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3467b0a changed the class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17f4acf first commit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如此，我们很容易就看到分支里头还包括了 Haskell 代码（高亮显示了）。 更酷的是，我们很容易地告诉 Git，我们只对某个分支中可及的提交感兴趣。换句话说，某分支中与其他分支相比唯一的提交。&lt;/p&gt;
&lt;p&gt;在此例中，如果我们想要合并“erlang”分支，我们需要看当合并的时候，都有啥提交会作用到我们的快照上去。 我们告诉 Git 的方式是，在不想要看到的分支前放一个 &lt;code&gt;^&lt;/code&gt;。 例如，如果我们想要看“erlang”分支中但不在主分支中的提交，我们可以用 &lt;code&gt;erlang ^master&lt;/code&gt;，或者反之。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --oneline erlang ^master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1834130 added haskell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ab5ab4c added erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git log --oneline master ^erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;594f90b reverted to old class name&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这为我们提供了一个良好的、简易的分支管理工具。它使我们能够非常容易地查看对某个分支唯一的提交，从而知道我们缺少什么，以及当我们要合并时，会有什么被合并进去。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 使用 &lt;code&gt;git log&lt;/code&gt; 列出促成当前分支目前的快照的提交历史记录。这使你能够看到项目是如何到达现在的状况的。&lt;/p&gt;
&lt;h2 id=&quot;git-tag-给历史记录中的某个重要的一点打上标签&quot;&gt;&lt;a href=&quot;#git-tag-给历史记录中的某个重要的一点打上标签&quot; class=&quot;headerlink&quot; title=&quot;git tag 给历史记录中的某个重要的一点打上标签&quot;&gt;&lt;/a&gt;&lt;code&gt;git tag&lt;/code&gt; 给历史记录中的某个重要的一点打上标签&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-tag&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Tagging&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;如果你达到一个重要的阶段，并希望永远记住那个特别的提交快照，你可以使用 &lt;code&gt;git tag&lt;/code&gt; 给它打上标签。 该 &lt;code&gt;tag&lt;/code&gt; 命令基本上会给该特殊提交打上永久的书签，从而使你在将来能够用它与其他提交比较。 通常，你会在切取一个发布版本或者交付一些东西的时候打个标签。&lt;/p&gt;
&lt;p&gt;比如说，我们想为我们的 Hello World 项目发布一个“1.0”版本。 我们可以用 &lt;code&gt;git tag -a v1.0&lt;/code&gt; 命令给最新一次提交打上（&lt;code&gt;HEAD&lt;/code&gt;）“v1.0”的标签。 &lt;code&gt;-a&lt;/code&gt; 选项意为“创建一个带注解的标签”，从而使你为标签添加注解。绝大部分时候都会这么做的。 不用 &lt;code&gt;-a&lt;/code&gt; 选项也可以执行的，但它不会记录这标签是啥时候打的，谁打的，也不会让你添加个标签的注解。 我推荐一直创建带注解的标签。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git tag -a v1.0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当你执行 &lt;code&gt;git tag -a&lt;/code&gt; 命令时，Git 会打开你的编辑器，让你写一句标签注解，就像你给提交写注解一样。&lt;/p&gt;
&lt;p&gt;现在，注意当我们执行 &lt;code&gt;git log --decorate&lt;/code&gt; 时，我们可以看到我们的标签了：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --oneline --decorate --graph&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* 594f90b (HEAD, tag: v1.0, master) reverted to old class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*   8d585ea Merge branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| * 3ac015d (fix_readme) fixed readme title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* | 3cbb6aa fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*   558151a Merge branch &amp;apos;change_class&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| * 3467b0a changed the class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* | b7ae93b added from ruby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* 17f4acf first commit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果我们有新提交，该标签依然会待在该提交的边上，所以我们已经给那个特定快照永久打上标签，并且能够将它与未来的快照做比较。&lt;/p&gt;
&lt;p&gt;不过我们并不需要给当前提交打标签。如果我们忘了给某个提交打标签，又将它发布了，我们可以给它追加标签。 在相同的命令末尾加上提交的 SHA，执行，就可以了。 例如，假设我们发布了提交 &lt;code&gt;558151a&lt;/code&gt;（几个提交之前的事情了），但是那时候忘了给它打标签。 我们现在也可以：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git tag -a v0.9 558151a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git log --oneline --decorate --graph&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* 594f90b (HEAD, tag: v1.0, master) reverted to old class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*   8d585ea Merge branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| * 3ac015d (fix_readme) fixed readme title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* | 3cbb6aa fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*   558151a (tag: v0.9) Merge branch &amp;apos;change_class&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| * 3467b0a changed the class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* | b7ae93b added from ruby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* 17f4acf first commit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;分享与更新项目&quot;&gt;&lt;a href=&quot;#分享与更新项目&quot; class=&quot;headerlink&quot; title=&quot;分享与更新项目&quot;&gt;&lt;/a&gt;分享与更新项目&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Working-with-Remotes&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Git 并不像 Subversion 那样有个中心服务器。 目前为止所有的命令都是本地执行的，更新的知识本地的数据库。 要通过 Git 与其他开发者合作，你需要将数据放到一台其他开发者能够连接的服务器上。 Git 实现此流程的方式是将你的数据与另一个仓库同步。在服务器与客户端之间并没有实质的区别 —— Git 仓库就是 Git 仓库，你可以很容易地在两者之间同步。&lt;/p&gt;
&lt;p&gt;一旦你有了个 Git 仓库，不管它是在你自己的服务器上，或者是由 GitHub 之类的地方提供， 你都可以告诉 Git 推送你拥有的远端仓库还没有的数据，或者叫 Git 从别的仓库把差别取过来。&lt;/p&gt;
&lt;p&gt;联网的时候你可以随时做这个，它并不需要对应一个 &lt;code&gt;commit&lt;/code&gt; 或者别的什么。 一般你会本地提交几次，然后从你的项目克隆自的线上的共享仓库提取数据以保持最新，将新完成的合并到你完成的工作中去，然后推送你的改动会服务器。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 使用 &lt;code&gt;git fetch&lt;/code&gt; 更新你的项目，使用 &lt;code&gt;git push&lt;/code&gt; 分享你的改动。 你可以用 &lt;code&gt;git remote&lt;/code&gt; 管理你的远程仓库。&lt;/p&gt;
&lt;h2 id=&quot;git-remote-罗列、添加和删除远端仓库别名&quot;&gt;&lt;a href=&quot;#git-remote-罗列、添加和删除远端仓库别名&quot; class=&quot;headerlink&quot; title=&quot;git remote 罗列、添加和删除远端仓库别名&quot;&gt;&lt;/a&gt;&lt;code&gt;git remote&lt;/code&gt; 罗列、添加和删除远端仓库别名&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-remote&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Working-with-Remotes#Showing-Your-Remotes&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;不像中心化的版本控制系统（客户端与服务端很不一样），Git 仓库基本上都是一致的，并且并可以同步他们。 这使得拥有多个远端仓库变得容易 —— 你可以拥有一些只读的仓库，另外的一些也可写的仓库。&lt;/p&gt;
&lt;p&gt;当你需要与远端仓库同步的时候，不需要使用它详细的链接。Git 储存了你感兴趣的远端仓库的链接的别名或者昵称。 你可以使用 &lt;code&gt;git remote&lt;/code&gt; 命令管理这个远端仓库列表。&lt;/p&gt;
&lt;h3 id=&quot;git-remote-列出远端别名&quot;&gt;&lt;a href=&quot;#git-remote-列出远端别名&quot; class=&quot;headerlink&quot; title=&quot;git remote 列出远端别名&quot;&gt;&lt;/a&gt;&lt;code&gt;git remote&lt;/code&gt; 列出远端别名&lt;/h3&gt;&lt;p&gt;如果没有任何参数，Git 会列出它存储的远端仓库别名了事。默认情况下，如果你的项目是克隆的（与本地创建一个新的相反）， Git 会自动将你的项目克隆自的仓库添加到列表中，并取名“origin”。 如果你执行时加上 &lt;code&gt;-v&lt;/code&gt; 参数，你还可以看到每个别名的实际链接地址。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git remote&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;origin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git remote -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;origin	git@github.com:github/git-reference.git (fetch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;origin	git@github.com:github/git-reference.git (push)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在此你看到了该链接两次，是因为 Git 允许你为每个远端仓库添加不同的推送与获取的链接，以备你读写时希望使用不同的协议。&lt;/p&gt;
&lt;h3 id=&quot;git-remote-add-为你的项目添加一个新的远端仓库&quot;&gt;&lt;a href=&quot;#git-remote-add-为你的项目添加一个新的远端仓库&quot; class=&quot;headerlink&quot; title=&quot;git remote add 为你的项目添加一个新的远端仓库&quot;&gt;&lt;/a&gt;&lt;code&gt;git remote add&lt;/code&gt; 为你的项目添加一个新的远端仓库&lt;/h3&gt;&lt;p&gt;如果你希望分享一个本地创建的仓库，或者你想要获取别人的仓库中的贡献 —— 如果你想要以任何方式与一个新仓库沟通，最简单的方式通常就是把它添加为一个远端仓库。 执行 &lt;code&gt;git remote add [alias] [url]&lt;/code&gt; 就可以。 此命令将 &lt;code&gt;[url]&lt;/code&gt; 以 &lt;code&gt;[alias]&lt;/code&gt; 的别名添加为本地的远端仓库。&lt;/p&gt;
&lt;p&gt;例如，假设我们想要与整个世界分享我们的 Hello World 程序。 我们可以在一台服务器上创建一个新仓库（我以 GitHub 为例子）。 它应该会给你一个链接，在这里就是“git@github.com:schacon/hw.git”。 要把它添加到我们的项目以便我们推送以及获取更新，我们可以这样：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git remote&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git remote add github git@github.com:schacon/hw.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git remote -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;github	git@github.com:schacon/hw.git (fetch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;github	git@github.com:schacon/hw.git (push)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;像分支的命名一样，远端仓库的别名是强制的 —— 就像“master”，没有特别意义，但它广为使用， 因为 &lt;code&gt;git init&lt;/code&gt; 默认用它；“origin”经常被用作远端仓库别名，就因为 &lt;code&gt;git clone&lt;/code&gt; 默认用它作为克隆自的链接的别名。此例中，我决定给我的远端仓库取名“github”，但我叫它随便什么都可以。&lt;/p&gt;
&lt;h3 id=&quot;git-remote-rm-删除现存的某个别名&quot;&gt;&lt;a href=&quot;#git-remote-rm-删除现存的某个别名&quot; class=&quot;headerlink&quot; title=&quot;git remote rm 删除现存的某个别名&quot;&gt;&lt;/a&gt;&lt;code&gt;git remote rm&lt;/code&gt; 删除现存的某个别名&lt;/h3&gt;&lt;p&gt;Git addeth and Git taketh away. 如果你需要删除一个远端 —— 不再需要它了、项目已经没了，等等 —— 你可以使用 &lt;code&gt;git remote rm [alias]&lt;/code&gt; 把它删掉。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git remote -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;github	git@github.com:schacon/hw.git (fetch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;github	git@github.com:schacon/hw.git (push)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git remote add origin git://github.com/pjhyett/hw.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git remote -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;github	git@github.com:schacon/hw.git (fetch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;github	git@github.com:schacon/hw.git (push)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;origin	git://github.com/pjhyett/hw.git (fetch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;origin	git://github.com/pjhyett/hw.git (push)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git remote rm origin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git remote -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;github	git@github.com:schacon/hw.git (fetch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;github	git@github.com:schacon/hw.git (push)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 你可以用 &lt;code&gt;git remote&lt;/code&gt; 列出你的远端仓库和那些仓库的链接。 你可以使用 &lt;code&gt;git remote add&lt;/code&gt; 添加新的远端仓库，用 &lt;code&gt;git remote rm&lt;/code&gt; 删掉已存在的那些。&lt;/p&gt;
&lt;h2 id=&quot;git-fetch-从远端仓库下载新分支与数据&quot;&gt;&lt;a href=&quot;#git-fetch-从远端仓库下载新分支与数据&quot; class=&quot;headerlink&quot; title=&quot;git fetch 从远端仓库下载新分支与数据&quot;&gt;&lt;/a&gt;&lt;code&gt;git fetch&lt;/code&gt; 从远端仓库下载新分支与数据&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-fetch&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Working-with-Remotes#Fetching-and-Pulling-from-Your-Remotes&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;h2 id=&quot;git-pull-从远端仓库提取数据并尝试合并到当前分支&quot;&gt;&lt;a href=&quot;#git-pull-从远端仓库提取数据并尝试合并到当前分支&quot; class=&quot;headerlink&quot; title=&quot;git pull 从远端仓库提取数据并尝试合并到当前分支&quot;&gt;&lt;/a&gt;&lt;code&gt;git pull&lt;/code&gt; 从远端仓库提取数据并尝试合并到当前分支&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-pull&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Working-with-Remotes#Fetching-and-Pulling-from-Your-Remotes&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;Git 有两个命令用来从某一远端仓库更新。 &lt;code&gt;git fetch&lt;/code&gt; 会使你与另一仓库同步，提取你本地所没有的数据，为你在同步时的该远端的每一分支提供书签。 这些分支被叫做“远端分支”，除了 Git 不允许你检出（切换到该分支）之外，跟本地分支没区别 —— 你可以将它们合并到当前分支，与其他分支作比较差异，查看那些分支的历史日志，等等。同步之后你就可以在本地操作这些。&lt;/p&gt;
&lt;p&gt;第二个会从远端服务器提取新数据的命令是 &lt;code&gt;git pull&lt;/code&gt;。 基本上，该命令就是在 &lt;code&gt;git fetch&lt;/code&gt; 之后紧接着 &lt;code&gt;git merge&lt;/code&gt; 远端分支到你所在的任意分支。 我个人不太喜欢这命令 —— 我更喜欢 &lt;code&gt;fetch&lt;/code&gt; 和 &lt;code&gt;merge&lt;/code&gt; 分开来做。少点魔法，少点问题。 不过，如果你喜欢这主意，你可以看一下 &lt;code&gt;git pull&lt;/code&gt; 的 &lt;a href=&quot;http://git-scm.com/docs/git-pull&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方文档&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;假设你配置好了一个远端，并且你想要提取更新，你可以首先执行 &lt;code&gt;git fetch [alias]&lt;/code&gt; 告诉 Git 去获取它有你没有的数据，然后你可以执行 &lt;code&gt;git merge [alias]/[branch]&lt;/code&gt; 以将服务器上的任何更新（假设有人这时候推送到服务器了）合并到你的当前分支。 那么，如果我是与两三个其他人合作 Hello World 项目，并且想要将我最近连接之后的所有改动拿过来，我可以这么做：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git fetch github&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remote: Counting objects: 4006, done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remote: Compressing objects: 100% (1322/1322), done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remote: Total 2783 (delta 1526), reused 2587 (delta 1387)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Receiving objects: 100% (2783/2783), 1.23 MiB | 10 KiB/s, done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Resolving deltas: 100% (1526/1526), completed with 387 local objects.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;From github.com:schacon/hw&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   8e29b09..c7c5a10  master     -&amp;gt; github/master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0709fdc..d4ccf73  c-langs    -&amp;gt; github/c-langs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   6684f82..ae06d2b  java       -&amp;gt; github/java&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * [new branch]      ada        -&amp;gt; github/ada&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * [new branch]      lisp       -&amp;gt; github/lisp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以看到自从上一次与远端仓库同步以后，又新赠或更新了五个分支。 “ada”与“lisp”分支是新的，而“master”、“clang”与“java”分支则被更新了。 在此例中，我的团队在合并入主分支之前，将提议的更新推送到远端分支以审核。&lt;/p&gt;
&lt;p&gt;你可以看到 Git 做的映射。远端仓库的主分支成为了本地的一个叫做“github/master”的分支。 这样我就可以执行 &lt;code&gt;git merge github/master&lt;/code&gt; 将远端的主分支和并入我的本地主分支。 或者，我可以 &lt;code&gt;git log github/master ^master&lt;/code&gt; 看看该分支上的新提交。 如果你的远端仓库叫做“origin”，那远端主分支就会叫做 &lt;code&gt;origin/master&lt;/code&gt;。几乎所有能在本地分支上执行的命令都可以在远端分支上用。&lt;/p&gt;
&lt;p&gt;如果你有多个远端仓库，你可以执行 &lt;code&gt;git fetch [alias]&lt;/code&gt; 提取特定的远端仓库， 或者执行 &lt;code&gt;git fetch --all&lt;/code&gt; 告诉 Git 同步所有的远端仓库。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 执行 &lt;code&gt;git fetch [alias]&lt;/code&gt; 来将你的仓库与远端仓库同步，提取所有它独有的数据到本地分支以合并或者怎样。&lt;/p&gt;
&lt;h2 id=&quot;git-push-推送你的新分支与数据到某个远端仓库&quot;&gt;&lt;a href=&quot;#git-push-推送你的新分支与数据到某个远端仓库&quot; class=&quot;headerlink&quot; title=&quot;git push 推送你的新分支与数据到某个远端仓库&quot;&gt;&lt;/a&gt;&lt;code&gt;git push&lt;/code&gt; 推送你的新分支与数据到某个远端仓库&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-push&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Working-with-Remotes#Pushing-to-Your-Remotes&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;想要与他人分享你牛鼻的提交，你需要将改动推送到远端仓库。 执行 &lt;code&gt;git push [alias] [branch]&lt;/code&gt;，就会将你的 [branch] 分支推送成为 [alias] 远端上的 [branch] 分支。 让我们试试推送我们的主分支到先前添加的“github”远端仓库上去。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git push github master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Counting objects: 25, done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Delta compression using up to 2 threads.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Compressing objects: 100% (25/25), done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Writing objects: 100% (25/25), 2.43 KiB, done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Total 25 (delta 4), reused 0 (delta 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;To git@github.com:schacon/hw.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * [new branch]      master -&amp;gt; master&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;挺简单。现在如果有人从该仓库克隆，他会得到我提交的完完全全的一份历史记录了。&lt;/p&gt;
&lt;p&gt;如果有个像之前创建的“erlang”分支那样的主题分支，想只分享这个，该怎么办呢？你可以相应的只推送该分支。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git push github erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Counting objects: 7, done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Delta compression using up to 2 threads.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Compressing objects: 100% (6/6), done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Writing objects: 100% (6/6), 652 bytes, done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Total 6 (delta 1), reused 0 (delta 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;To git@github.com:schacon/hw.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * [new branch]      erlang -&amp;gt; erlang&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在当人们从该仓库克隆时，他们就会得到一个“erlang”分支以查阅、合并。 用这种方式，你可以推送任何分支到任何你有写权限的仓库。 如果你的分支已经在该仓库中了，它会试着去更新，如果它不再，Git 会把它加上。&lt;/p&gt;
&lt;p&gt;最后一个当你推送到远端分支时会碰到的主要问题是，其他人在此期间也推送了的情况。 如果你和另一个开发者同时克隆了，又都有提交，那么当她推送后你也想推送时，默认情况下 Git 不会让你覆盖她的改动。 相反的，它会在你试图推送的分支上执行 &lt;code&gt;git log&lt;/code&gt;，确定它能够在你的推送分支的历史记录中看到服务器分支的当前进度。 如果它在在你的历史记录中看不到，它就会下结论说你过时了，并打回你的推送。 你需要正式提取、合并，然后再次推送 —— 以确定你把她的改动也考虑在内了。&lt;/p&gt;
&lt;p&gt;当你试图推送到某个以被更新的远端分支时，会出现下面这种情况：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git push github master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;To git@github.com:schacon/hw.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ! [rejected]        master -&amp;gt; master (non-fast-forward)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;error: failed to push some refs to &amp;apos;git@github.com:schacon/hw.git&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;To prevent you from losing history, non-fast-forward updates were rejected&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Merge the remote changes before pushing again.  See the &amp;apos;Note about&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fast-forwards&amp;apos; section of &amp;apos;git push --help&amp;apos; for details.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你可以修正这个问题。执行 &lt;code&gt;git fetch github; git merge github/master&lt;/code&gt;，然后再推送&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 执行 &lt;code&gt;git push [alias] [branch]&lt;/code&gt; 将你的本地改动推送到远端仓库。 如果可以的话，它会依据你的 [branch] 的样子，推送到远端的 [branch] 去。 如果在你上次提取、合并之后，另有人推送了，Git 服务器会拒绝你的推送，知道你是最新的为止。&lt;/p&gt;
&lt;h1 id=&quot;检查与比较&quot;&gt;&lt;a href=&quot;#检查与比较&quot; class=&quot;headerlink&quot; title=&quot;检查与比较&quot;&gt;&lt;/a&gt;检查与比较&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Viewing-the-Commit-History&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;现在你有了一堆分支，短期的主题、长期的特性或者其它。怎样追踪他们呢？ Git 有一组工具，可以帮助你弄明白工作是在哪儿完成的，两个分支间的区别是啥，等等。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 执行 &lt;code&gt;git log&lt;/code&gt; 找到你的项目历史中的特定提交 —— 按作者、日期、内容或者历史记录。执行 &lt;code&gt;git diff&lt;/code&gt; 比较历史记录中的两个不同的点 —— 通常是为了看看两个分支有啥区别，或者从某个版本到另一个版本，你的软件都有啥变化。&lt;/p&gt;
&lt;h2 id=&quot;git-log-过滤你的提交历史记录&quot;&gt;&lt;a href=&quot;#git-log-过滤你的提交历史记录&quot; class=&quot;headerlink&quot; title=&quot;git log 过滤你的提交历史记录&quot;&gt;&lt;/a&gt;&lt;code&gt;git log&lt;/code&gt; 过滤你的提交历史记录&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-log&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Git-Basics-Viewing-the-Commit-History#Limiting-Log-Output&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;通过查看分支中另一分支看不到的提交记录，我们已经看到如何用 &lt;code&gt;git log&lt;/code&gt; 来比较分支。 （如果你不记得了，它看起来是这样的：&lt;code&gt;git log branchA ^branchB&lt;/code&gt;）。 而且，你也可以用 &lt;code&gt;git log&lt;/code&gt; 去寻找特定的提交。 在此，我们会看到一些更广为使用的 &lt;code&gt;git log&lt;/code&gt; 选项，不过哪有很多。 完整的清单可以看看官方文档。&lt;/p&gt;
&lt;h3 id=&quot;git-log-author-只寻找某个特定作者的提交&quot;&gt;&lt;a href=&quot;#git-log-author-只寻找某个特定作者的提交&quot; class=&quot;headerlink&quot; title=&quot;git log --author 只寻找某个特定作者的提交&quot;&gt;&lt;/a&gt;&lt;code&gt;git log --author&lt;/code&gt; 只寻找某个特定作者的提交&lt;/h3&gt;&lt;p&gt;要过滤你的提交历史，只寻找某个特定作者的提交，你可以使用 &lt;code&gt;--author&lt;/code&gt; 选项。 例如，比方说我们要找 Git 源码中 Linus 提交的部分。 我们可以执行类似 &lt;code&gt;git log --author=Linus&lt;/code&gt; 的命令。 这个查找是大小写敏感的，并且也会检索电子邮箱地址。 我在此例中使用 &lt;code&gt;-[number]&lt;/code&gt; 选项，以限制结果为最近 [number] 次的提交。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --author=Linus --oneline -5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81b50f3 Move &amp;apos;builtin-*&amp;apos; into a &amp;apos;builtin/&amp;apos; subdirectory&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3bb7256 make &amp;quot;index-pack&amp;quot; a built-in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;377d027 make &amp;quot;git pack-redundant&amp;quot; a built-in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b532581 make &amp;quot;git unpack-file&amp;quot; a built-in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112dd51 make &amp;quot;mktag&amp;quot; a built-in&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;git-log-since-before-根据日期过滤提交记录&quot;&gt;&lt;a href=&quot;#git-log-since-before-根据日期过滤提交记录&quot; class=&quot;headerlink&quot; title=&quot;git log --since --before 根据日期过滤提交记录&quot;&gt;&lt;/a&gt;&lt;code&gt;git log --since --before&lt;/code&gt; 根据日期过滤提交记录&lt;/h3&gt;&lt;p&gt;如果你要指定一个你感兴趣的日期范围以过滤你的提交，可以执行几个选项 —— 我用 &lt;code&gt;--since&lt;/code&gt; 和 &lt;code&gt;--before&lt;/code&gt;，但是你也可以用 &lt;code&gt;--until&lt;/code&gt; 和 &lt;code&gt;--after&lt;/code&gt;。 例如，如果我要看 Git 项目中三周前且在四月十八日之后的所有提交，我可以执行这个（我还用了 &lt;code&gt;--no-merges&lt;/code&gt; 选项以隐藏合并提交）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --oneline --before=&amp;#123;3.weeks.ago&amp;#125; --after=&amp;#123;2010-04-18&amp;#125; --no-merges&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5469e2d Git 1.7.1-rc2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d43427d Documentation/remote-helpers: Fix typos and improve language&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;272a36b Fixup: Second argument may be any arbitrary string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b6c8d2d Documentation/remote-helpers: Add invocation section&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5ce4f4e Documentation/urls: Rewrite to accomodate transport::address&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00b84e9 Documentation/remote-helpers: Rewrite description&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03aa87e Documentation: Describe other situations where -z affects git diff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77bc694 rebase-interactive: silence warning when no commits rewritten&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;636db2c t3301: add tests to use --format=&amp;quot;%N&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;git-log-grep-根据提交注释过滤提交记录&quot;&gt;&lt;a href=&quot;#git-log-grep-根据提交注释过滤提交记录&quot; class=&quot;headerlink&quot; title=&quot;git log --grep 根据提交注释过滤提交记录&quot;&gt;&lt;/a&gt;&lt;code&gt;git log --grep&lt;/code&gt; 根据提交注释过滤提交记录&lt;/h3&gt;&lt;p&gt;你或许还想根据提交注释中的某个特定短语查找提交记录。可以用 &lt;code&gt;--grep&lt;/code&gt; 选项。 比如说我知道有个提交是有关使用 P4EDITOR 环境变量，又想回忆起那个改动是啥样子的 —— 我可以用 &lt;code&gt;--grep&lt;/code&gt; 选项找到该提交。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --grep=P4EDITOR --no-merges&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 82cea9ffb1c4677155e3e2996d76542502611370&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Shawn Bohrer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Wed Mar 12 19:03:24 2008 -0500&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    git-p4: Use P4EDITOR environment variable when set&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Perforce allows you to set the P4EDITOR environment variable to your&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    preferred editor for use in perforce.  Since we are displaying a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    perforce changelog to the user we should use it when it is defined.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Signed-off-by: Shawn Bohrer &amp;lt;shawn.bohrer@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Signed-off-by: Simon Hausmann &amp;lt;simon@lst.de&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Git 会对所有的 &lt;code&gt;--grep&lt;/code&gt; 和 &lt;code&gt;--author&lt;/code&gt; 参数作逻辑或。 如果你用 &lt;code&gt;--grep&lt;/code&gt; 和 &lt;code&gt;--author&lt;/code&gt; 时，想看的是某人写作的并且有某个特殊的注释内容的提交记录， 你需要加上 &lt;code&gt;--all-match&lt;/code&gt; 选项。 在这些例子中，我会用上 &lt;code&gt;--format&lt;/code&gt; 选项，这样我们就可以看到每个提交的作者是谁了。&lt;/p&gt;
&lt;p&gt;如果我查找注释内容含有 “p4 depo”的提交，我得到了三个提交：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --grep=&amp;quot;p4 depo&amp;quot; --format=&amp;quot;%h %an %s&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ee4fd1a Junio C Hamano Merge branch &amp;apos;master&amp;apos; of git://repo.or.cz/git/fastimport&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;da4a660 Benjamin Sergeant git-p4 fails when cloning a p4 depo.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1cd5738 Simon Hausmann Make incremental imports easier to use by storing the p4 d&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果我加上 &lt;code&gt;--author=Hausmann&lt;/code&gt; 参数，与进一步过滤上述结果到 Simon 的唯一提交相反， 它会告诉我所有 Simon 的提交，或者注释中有“p4 demo”的提交：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --grep=&amp;quot;p4 depo&amp;quot; --format=&amp;quot;%h %an %s&amp;quot; --author=&amp;quot;Hausmann&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cdc7e38 Simon Hausmann Make it possible to abort the submission of a change to Pe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f5f7e4a Simon Hausmann Clean up the git-p4 documentation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30b5940 Simon Hausmann git-p4: Fix import of changesets with file deletions&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4c750c0 Simon Hausmann git-p4: git-p4 submit cleanups.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0e36f2d Simon Hausmann git-p4: Removed git-p4 submit --direct.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;edae1e2 Simon Hausmann git-p4: Clean up git-p4 submit&amp;apos;s log message handling.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4b61b5c Simon Hausmann git-p4: Remove --log-substitutions feature.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36ee4ee Simon Hausmann git-p4: Ensure the working directory and the index are cle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;e96e400 Simon Hausmann git-p4: Fix submit user-interface.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38f9f5e Simon Hausmann git-p4: Fix direct import from perforce after fetching cha&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2094714 Simon Hausmann git-p4: When skipping a patch as part of &amp;quot;git-p4 submit&amp;quot; m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1ca3d71 Simon Hausmann git-p4: Added support for automatically importing newly ap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;不过，如果加上 &lt;code&gt;--all-match&lt;/code&gt;，结果就是我想要的了：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --grep=&amp;quot;p4 depo&amp;quot; --format=&amp;quot;%h %an %s&amp;quot; --author=&amp;quot;Hausmann&amp;quot; --all-match&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1cd5738 Simon Hausmann Make incremental imports easier to use by storing the p4 d&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;git-log-S-依据所引入的差值过滤&quot;&gt;&lt;a href=&quot;#git-log-S-依据所引入的差值过滤&quot; class=&quot;headerlink&quot; title=&quot;git log -S 依据所引入的差值过滤&quot;&gt;&lt;/a&gt;&lt;code&gt;git log -S&lt;/code&gt; 依据所引入的差值过滤&lt;/h3&gt;&lt;p&gt;如果你写的提交注释都极度糟糕怎么办？或者，如果你要找某个函数是何时引入的，某些变量是在哪里开始被使用的？ 你可以告诉 Git 在每个提交之间的差值中查找特定字符串。 例如，如果我们想要找出哪个提交修改出了类似函数名“userformat_find_requirements”， 我们可以执行（注意在“-S”与你要找的东东之间没有“=”）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log -Suserformat_find_requirements&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 5b16360330822527eac1fa84131d185ff784c9fb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Johannes Gilger&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Tue Apr 13 22:31:12 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pretty: Initialize notes if %N is used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    When using git log --pretty=&amp;apos;%N&amp;apos; without an explicit --show-notes, git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    would segfault. This patches fixes this behaviour by loading the needed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    notes datastructures if --pretty is used and the format contains %N.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    When --pretty=&amp;apos;%N&amp;apos; is used together with --no-notes, %N won&amp;apos;t be&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    expanded.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    This is an extension to a proposed patch by Jeff King.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Signed-off-by: Johannes Gilger&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Signed-off-by: Junio C Hamano&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;git-log-p-显示每个提交引入的补丁&quot;&gt;&lt;a href=&quot;#git-log-p-显示每个提交引入的补丁&quot; class=&quot;headerlink&quot; title=&quot;git log -p 显示每个提交引入的补丁&quot;&gt;&lt;/a&gt;&lt;code&gt;git log -p&lt;/code&gt; 显示每个提交引入的补丁&lt;/h3&gt;&lt;p&gt;每个提交都是项目的一个快照。由于每个提交都记录它所基于的快照，Git 能够经常对它们求差值，并以补丁形式向你展示。 这意味着，对任意提交，你都可以获取该提交给项目引入补丁。 你可以用 &lt;code&gt;git show [SHA]&lt;/code&gt; 加上某个特定的提交 SHA 获取，或者执行 &lt;code&gt;git log -p&lt;/code&gt;， 它会告诉 Git 输出每个提交之后的补丁。这是个总结某一分支或者两个提交之间都发生了神马的好途径。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log -p --no-merges -2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 594f90bdee4faf063ad07a4a6f503fdead3ef606&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Fri Jun 4 15:46:55 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    reverted to old class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/ruby.rb b/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index bb86f00..192151c 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,7 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-class HiWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     puts &amp;quot;Hello World from Ruby&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-HiWorld.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+HelloWorld.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 3cbb6aae5c0cbd711c098e113ae436801371c95e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Fri Jun 4 12:58:53 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/README b/README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index d053cc8..9103e27 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,4 +1,4 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-Hello World Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+Many Hello World Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ======================&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; This project has examples of hello world in&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这是个总结改动，以及合并或发布之前重审一系列提交的好方式。&lt;/p&gt;
&lt;h3 id=&quot;git-log-stat-显示每个提交引入的改动的差值统计&quot;&gt;&lt;a href=&quot;#git-log-stat-显示每个提交引入的改动的差值统计&quot; class=&quot;headerlink&quot; title=&quot;git log --stat 显示每个提交引入的改动的差值统计&quot;&gt;&lt;/a&gt;&lt;code&gt;git log --stat&lt;/code&gt; 显示每个提交引入的改动的差值统计&lt;/h3&gt;&lt;p&gt;如果 &lt;code&gt;-p&lt;/code&gt; 选项对你来说太详细了，你可以用 &lt;code&gt;--stat&lt;/code&gt; 总结这些改动。 这是不用 &lt;code&gt;-p&lt;/code&gt;，而用 &lt;code&gt;--stat&lt;/code&gt; 选项时，同一份日志的输出。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --stat --no-merges -2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 594f90bdee4faf063ad07a4a6f503fdead3ef606&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Fri Jun 4 15:46:55 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    reverted to old class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ruby.rb |    4 ++--&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 2 insertions(+), 2 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commit 3cbb6aae5c0cbd711c098e113ae436801371c95e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:   Fri Jun 4 12:58:53 2010 +0200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fixed readme title differently&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; README |    2 +-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 files changed, 1 insertions(+), 1 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;同样的基本信息，但更紧凑 —— 它仍然让你看到相对改动，和改动了哪些文件。&lt;/p&gt;
&lt;h2 id=&quot;git-diff&quot;&gt;&lt;a href=&quot;#git-diff&quot; class=&quot;headerlink&quot; title=&quot;git diff&quot;&gt;&lt;/a&gt;&lt;code&gt;git diff&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://git-scm.com/docs/git-diff&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git-scm.com/book/en/Distributed-Git-Maintaining-a-Project#Determining-What-Is-Introduced&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最后，要查看两个提交快照的绝对改动，你可以用 &lt;code&gt;git diff&lt;/code&gt; 命令。 这在两个主要情况中广为使用 —— 查看两个分支彼此之间的差值，和查看自发布或者某个旧历史点之后都有啥变了。让我们看看这俩情况。&lt;/p&gt;
&lt;p&gt;你仅需执行 &lt;code&gt;git diff [version]&lt;/code&gt;（或者你给该发布打的任何标签）就可以查看自最近发布之后的改动。 例如，如果我们想要看看自 v0.9 发布之后我们的项目改变了啥，我们可以执行 &lt;code&gt;git diff v0.9&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git diff v0.9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/README b/README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index d053cc8..d4173d5 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/README&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,4 +1,4 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-Hello World Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+Many Hello World Lang Examples&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ======================&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; This project has examples of hello world in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/ruby.rb b/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index bb86f00..192151c 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/ruby.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,7 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-class HiWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+class HelloWorld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   def self.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     puts &amp;quot;Hello World from Ruby&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-HiWorld.hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+HelloWorld.hello&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;正如 &lt;code&gt;git log&lt;/code&gt;，你可以给它加上 &lt;code&gt;--stat&lt;/code&gt; 参数。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git diff v0.9 --stat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; README  |    2 +-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ruby.rb |    4 ++--&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2 files changed, 3 insertions(+), 3 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;要比较两个不同的分支，你可以执行类似 &lt;code&gt;git diff branchA branchB&lt;/code&gt; 的命令。 不过它的问题在于它会完完全全按你说的作 —— 它会直接给你个补丁文件，该补丁能够将甲分支的最新快照变成乙分支的最新快照的样子。 这意味着如果两个分支已经产生分歧 —— 奔往两个不同方向了 —— 它会移除甲分支中引入的所有工作，然后累加乙分支中的所有工作。 这大概不是你要的吧 —— 你想要不在甲分支中的乙分支的改动。所以你真的需要的是两个分支叉开去时，和最新的乙分支的差别。 所以，如果我们的历史记录看起来像这样：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git log --graph --oneline --decorate --all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* 594f90b (HEAD, tag: v1.0, master) reverted to old class name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| * 1834130 (erlang) added haskell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| * ab5ab4c added erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*   8d585ea Merge branch &amp;apos;fix_readme&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;并且，我们想要看“erlang”分支与主分支相比的查别。执行 &lt;code&gt;git diff master erlang&lt;/code&gt; 会给我们错误的结果。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --stat master erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; erlang_hw.erl |    5 +++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; haskell.hs    |    4 ++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ruby.rb       |    4 ++--&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 3 files changed, 11 insertions(+), 2 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你可以看到，它加上了 erlang 和 haskell 文件，这确实是我们在该分支中做的， 但是它同时恢复了我们在主分支中改动的 ruby 文件。我们真心想要的只是“erlang”分支中的改动（添加两个文件）。 我们可以通过求两个分支分歧时的共同提交与该分支的差值得到想要的结果：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --stat 8d585ea erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; erlang_hw.erl |    5 +++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; haskell.hs    |    4 ++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2 files changed, 9 insertions(+), 0 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这才是我们在找的，但是我们可不想要每次都要找出两个分支分歧时的那次提交。 幸运的是，Git 为此提供了一个快捷方式。 如果你执行 &lt;code&gt;git diff master...erlang&lt;/code&gt;（在分支名之间有三个半角的点）， Git 就会自动找出两个分支的共同提交（也被成为合并基础），并求差值。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --stat master erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; erlang_hw.erl |    5 +++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; haskell.hs    |    4 ++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ruby.rb       |    4 ++--&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 3 files changed, 11 insertions(+), 2 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --stat master...erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; erlang_hw.erl |    5 +++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; haskell.hs    |    4 ++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2 files changed, 9 insertions(+), 0 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;几乎每一次你要对比两个分支的时候，你都会想用三个点的语法，因为它通常会给你你想要的。&lt;/p&gt;
&lt;p&gt;顺带提一句，你还可以让 Git 手工计算两次提交的合并基础（第一个共同的祖提交），即 &lt;code&gt;git merge-base&lt;/code&gt; 命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git merge-base master erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8d585ea6faf99facd39b55d6f6a3b3f481ad0d3d&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;所以你执行下面这个也跟 &lt;code&gt;git diff master...erlang&lt;/code&gt; 一样：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git diff --stat $(git merge-base master erlang) erlang&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; erlang_hw.erl |    5 +++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; haskell.hs    |    4 ++++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2 files changed, 9 insertions(+), 0 deletions(-)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当然，我会推荐简单点的那个。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简而言之&lt;/strong&gt; 使用 &lt;code&gt;git diff&lt;/code&gt; 查看某一分支自它偏离出来起与过去某一点之间项目的改动。 总是使用 &lt;code&gt;git diff branchA...branchB&lt;/code&gt; 来查看 branchB 与 branchA 的相对差值，这会让事情简单点。&lt;/p&gt;
&lt;p&gt;就是这样了！ 请阅读 &lt;a href=&quot;http://git-scm.com/book/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《Pro Git》&lt;/a&gt; 以获得更多信息。&lt;/p&gt;
&lt;h1 id=&quot;关于&quot;&gt;&lt;a href=&quot;#关于&quot; class=&quot;headerlink&quot; title=&quot;关于&quot;&gt;&lt;/a&gt;关于&lt;/h1&gt;&lt;h2 id=&quot;谁的作品？&quot;&gt;&lt;a href=&quot;#谁的作品？&quot; class=&quot;headerlink&quot; title=&quot;谁的作品？&quot;&gt;&lt;/a&gt;谁的作品？&lt;/h2&gt;&lt;p&gt;Git 参考手册是 Github 项目组的成果。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://cyj.me/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;逸才&lt;/a&gt;在 &lt;a href=&quot;http://gitref.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git Reference&lt;/a&gt; 的基础上做了中文翻译。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Git-手册简介&quot;&gt;&lt;a href=&quot;#Git-手册简介&quot; class=&quot;headerlink&quot; title=&quot;Git 手册简介&quot;&gt;&lt;/a&gt;Git 手册简介&lt;/h1&gt;&lt;p&gt;本站为 Git 参考手册。目的是为学习与记忆 Git 使用中最重要、最普遍的命令提供快速翻阅。 这些命令以你可能需要的操作类型划分，并且将提供日常使用中需要的一些常用的命令以及参数。&lt;/p&gt;
&lt;p&gt;每个章节都有到下一个章节的链接，所以本手册也可以当作一个入门指导。 每个页面还有一个深度 Git 文档阅读的链接，比如官方的使用手册页面或者 &lt;a href=&quot;http://git-scm.com/book&quot;&gt;《Pro Git》&lt;/a&gt; 书中的相关章节，以便于你学习了解更多的 Git 命令。首先，我们要从如何以 Git 的思维方式管理源代码开始。
    
    </summary>
    
    
      <category term="git" scheme="http://it-ebooks.flygon.net/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Go 标准库 中文参考</title>
    <link href="http://it-ebooks.flygon.net/golang-stdlib-ref/"/>
    <id>http://it-ebooks.flygon.net/golang-stdlib-ref/</id>
    <published>2016-02-29T02:25:08.000Z</published>
    <updated>2016-03-03T07:19:13.657Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/golang-stdlib-ref.jpg?build=1451718975417&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://studygolang.com/pkgdoc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Go语言标准库文档中文版&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/wizardforcel/golang-stdlib-ref/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/wizardforcel/golang-stdlib-ref&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/wizardforcel/golang-stdlib-ref&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/wizardforcel/golang-stdlib-ref&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/golang-stdlib-ref.jpg?build=1451718975417&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;http://studygolang.com/pkgdoc&quot;&gt;Go语言标准库文档中文版&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="go" scheme="http://it-ebooks.flygon.net/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>零基础学Python（第二版）</title>
    <link href="http://it-ebooks.flygon.net/qiwsir-python/"/>
    <id>http://it-ebooks.flygon.net/qiwsir-python/</id>
    <published>2016-02-27T06:27:49.000Z</published>
    <updated>2016-03-03T07:19:13.800Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://box.kancloud.cn/cover_2015-09-08_55ee3b290e6b_800x1068.jpg?imageMogr2/thumbnail/173x231!/interlace/1/quality/100&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://github.com/qiwsir&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;qiwsir&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/qiwsir/StarterLearningPython&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;StarterLearningPython&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://wiki.jikexueyuan.com/project/start-learning-python/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://passport.jikexueyuan.com/sso/login&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://passport.jikexueyuan.com/sso/login&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://box.kancloud.cn/cover_2015-09-08_55ee3b290e6b_800x1068.jpg?imageMogr2/thumbnail/173x231!/interlace/1/quality/100&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://github.com/qiwsir&quot;&gt;qiwsir&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来源：&lt;a href=&quot;https://github.com/qiwsir/StarterLearningPython&quot;&gt;StarterLearningPython&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>习科SQL注入自学指南</title>
    <link href="http://it-ebooks.flygon.net/%E4%B9%A0%E7%A7%91SQL%E6%B3%A8%E5%85%A5%E8%87%AA%E5%AD%A6%E6%8C%87%E5%8D%97/"/>
    <id>http://it-ebooks.flygon.net/习科SQL注入自学指南/</id>
    <published>2016-02-24T13:43:14.000Z</published>
    <updated>2016-03-03T07:19:13.928Z</updated>
    
    <content type="html">&lt;p&gt;格式：PDF&lt;/p&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://vdisk.weibo.com/s/aADaW4YRjre9T&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;微盘下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://1000eb.com/1ixdm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;千易下载&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;格式：PDF&lt;/p&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://vdisk.weibo.com/s/aADaW4YRjre9T&quot; t
    
    </summary>
    
    
      <category term="渗透" scheme="http://it-ebooks.flygon.net/tags/%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>Gdip 编程基础</title>
    <link href="http://it-ebooks.flygon.net/gdip-%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    <id>http://it-ebooks.flygon.net/gdip-编程基础/</id>
    <published>2016-02-24T08:55:29.000Z</published>
    <updated>2016-03-03T07:19:13.640Z</updated>
    
    <content type="html">&lt;p&gt;GDI+（Graphics Device Interface Plus，图形设备接口加）是 Windows XP 及以上版本操 作系统的图形子系统，也是传统.NET 框架的重要组成部分和窗体绘图的主要工具，负责在 屏幕和打印机上绘制图形图像和显示信息。顾名思义，GDI+是 Windows 早期版本所提供的 图形设备接口 GDI 的后续版本，是建立在 GDI 之上的一个高层图形子系统。&lt;/p&gt;
&lt;p&gt;GDI+是一种 API，分别通过一套 C++类和一套部署为托管代码的类来展现，这两套类 分别被称为 GDI+的“C++封装”和“托管类接口”。&lt;/p&gt;
&lt;p&gt;GDI+不但在功能上比 GDI 要强大很多，而且在代码编写方面也更简单，因此会成为 Windows 图形图像程序开发的主要工具之一。由于篇幅所限，本书只简单介绍利用 MFC 进 行 GDI+编程的一些基本内容，也不讲 GDI+的 API 编程。基于 GDI+托管封装的.NET 窗体 绘图，将在第 18 章中再介绍。对 GDI+编程有兴趣的读者，可以参考如下图书：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;周鸣杨、赵景亮. 精通 GDI+编程. 清华大学出版社，2004 年 2 月（C++ / MFC）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mahesh Chand（韩江等译）. GDI+图形程序设计. 电子工业出版社，2005 年 3 月（C# / .NET）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本章将介绍 GDI+的结构和组成，讨论 GDI+的几个主要新增特性与功能，说明 GDI+给 Windows 图形图像程序的开发模式带来的变化。介绍 C++封装的 GDI+ API 的具体使用方法， 主要讲解二维矢量图形绘制和文字显示等基本内容。&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;GDI+的路径、区域、变换、图像处理和图元文件等高级编程内容，安排在下一章介绍。&lt;/p&gt;
&lt;h2 id=&quot;1-GDI-的结构与组成&quot;&gt;&lt;a href=&quot;#1-GDI-的结构与组成&quot; class=&quot;headerlink&quot; title=&quot;1. GDI+的结构与组成&quot;&gt;&lt;/a&gt;1. GDI+的结构与组成&lt;/h2&gt;&lt;p&gt;本节先介绍 GDI+的体系结构，再列出 C++封装的 GDI+ API 的具体组成。&lt;/p&gt;
&lt;h3 id=&quot;1-1-GDI-的结构&quot;&gt;&lt;a href=&quot;#1-1-GDI-的结构&quot; class=&quot;headerlink&quot; title=&quot;1.1 GDI+的结构&quot;&gt;&lt;/a&gt;1.1 GDI+的结构&lt;/h3&gt;&lt;p&gt;GDI+是建立在 GDI 之上的一种高层图形子系统，基础是 GDI+平面 API，有 C++和托 管两种封装。&lt;/p&gt;
&lt;p&gt;注意，虽然 GDI+是 GDI 的发展，但是 GDI+并非设计来替代 GDI 的，它不能独立工作， 底层还得靠 GDI 实现。&lt;/p&gt;
&lt;p&gt;（1）GDI+的体系结构&lt;/p&gt;
&lt;p&gt;GDI+与 GDI 一样，都具有设备无关性。而且 GDI+是建立在 GDI 之上的一种高层接口， 供 Windows API 和.NET 框架调用。与 GDI 类似，GDI+主要提供了二维矢量图形、图像处 理和文字显示版式三类功能（参见图 14-1），只是 GDI+比 GDI 的功能更强大，且编程模式发生了改变。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-1-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-1 GDI+的体系结构&lt;/p&gt;
&lt;p&gt;（2）GDI+平面 API 与封装&lt;/p&gt;
&lt;p&gt;GDI+提供（expose）了一个平面（flat）API，它包含大约 600 个函数，被实现在 Gdiplus.dll 中，声明在 Gdiplusflat.h 内。这些函数被包装到了前面讨论过的 GDI+ API 的 54 个 C++类的 集合之中。&lt;/p&gt;
&lt;p&gt;作为 C++封装的替代方案，微软.NET 框架提供了 GDI+的一个托管代码封装类集，包 含大约 60 个类、50 个枚举和 8 个结构。它们分属于下列命名空间：System.Drawing、 System.Drawing.Drawing2D 、 System.Drawing.Imaging 、 System.Drawing.Text 和 System. Drawing.Printing。&lt;/p&gt;
&lt;p&gt;GDI+的平面 API 与其 C++及托管封装的关系如图 14-2 所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-1-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-2 GDI+的封装与使用&lt;/p&gt;
&lt;h2 id=&quot;1-2-GDI-的组成&quot;&gt;&lt;a href=&quot;#1-2-GDI-的组成&quot; class=&quot;headerlink&quot; title=&quot;1.2 GDI+的组成&quot;&gt;&lt;/a&gt;1.2 GDI+的组成&lt;/h2&gt;&lt;p&gt;GDI+的 C++封装，包含了 54 个类、12 个全局函数、（6 类）226 个图像常量、55 种枚 举和 19 种结构。GDI+的.NET 托管封装，则包含了大约 60 个类、50 个枚举和 8 个结构。这 两种封装都是基于 GDI+平面 API 的。本小节只介绍 GDI+的 C++封装，GDI+的托管封装将 在第 18 章的.NET 窗体绘图中有所涉及。&lt;/p&gt;
&lt;p&gt;（1）类&lt;/p&gt;
&lt;p&gt;GDI+的 C++封装中共有 54 个类，核心类是 Graphics，它是实际绘制直线、曲线、图形、 图像和文本的类。许多其它 GDI+类是与 Graphics 类一起使用的。例如，DrawLine 方法接收 Pen 对象，该对象中存有所要绘制的线条的属性（颜色、宽度、虚线线型等）。FillRectangle 方法可以接收指向 LinearGradientBrush 对象的指针，该对象与 Graphics 对象配合工作来用 一种渐变色填充矩形。Font 和 StringFormat 对象影响 Graphics 对象绘制文本的方式。Matrix 对象存储并操作 Graphics 对象的仿射变换——旋转、缩放和翻转图像。&lt;/p&gt;
&lt;p&gt;GDI+还提供了用于组织图形数据的几种结构类（例如 Rect、Point 和 Size）。而且，某 些类的主要作用是结构化数据类型。例如，BitmapData 类是 Bitmap 类的帮助器，PathData 类是 GraphicsPath 类的帮助器。图 14-3 是 GDI+ API 类的层次结构图。&lt;/p&gt;
&lt;p&gt;注意：在 GDI+、.NET、C#、Java 和 VB 中，都把类的成员函数称为方法。当我们在&lt;/p&gt;
&lt;p&gt;C++中，使用 GDI+和.NET 框架类库中的类和功能时，也常常将其函数改称为方法。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-3 GDI+类的层次结构&lt;/p&gt;
&lt;p&gt;（2）全局函数&lt;/p&gt;
&lt;p&gt;GDI+命名空间中的全局函数有 12 个，常用的有如下两个（其余的大多数与图像相关）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;关闭 GDI+：GdiplusShutdown（清除 GDI+所使用的资源）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;启动 GDI+：GdiplusStartup（初始化 GDI+）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;（3）常量、枚举和结构&lt;/p&gt;
&lt;p&gt;GDI+中有 6 类共计 226 个图像常量（都被定义在头文件 GdiplusImaging.h 中），包括图 像 文 件 格式 常 量 11 个（ 如 ImageFormatBMP 、 ImageFormatGIF 、 ImageFormatJPEG 、 ImageFormatPNG、ImageFormatTIFF 等）、图像帧维常量 2 个、图像编码器常量 13 个、图&lt;/p&gt;
&lt;p&gt;像像素格式常量 14 个、图像特性标志类型 9 个、图像特性标志 217 个。&lt;/p&gt;
&lt;p&gt;GDI+定义了 55 种枚举类型，它们都是相关常数的集合。例如：PenType、BrushType、DashStyle、ImageType、LineCap、FillMode、ImageFlags 等。&lt;/p&gt;
&lt;p&gt;GDI+ API 中还定义了 19 种结构，用于 GDI+的各种方法调用中。例如：ColorMap、 ColorMatrix、ColorPalette、Gdiplus Abort、GdiplusStartupInput、GdiplusStartupOutput 等。&lt;/p&gt;
&lt;h2 id=&quot;1-2-GDI-的特色&quot;&gt;&lt;a href=&quot;#1-2-GDI-的特色&quot; class=&quot;headerlink&quot; title=&quot;1.2 GDI+的特色&quot;&gt;&lt;/a&gt;1.2 GDI+的特色&lt;/h2&gt;&lt;p&gt;本节介绍 GDI+的几个主要新增特性与功能，说明 GDI+在编程模式上的改变。&lt;/p&gt;
&lt;h3 id=&quot;1-2-1-GDI-新增特性&quot;&gt;&lt;a href=&quot;#1-2-1-GDI-新增特性&quot; class=&quot;headerlink&quot; title=&quot;1.2.1 GDI+新增特性&quot;&gt;&lt;/a&gt;1.2.1 GDI+新增特性&lt;/h3&gt;&lt;p&gt;与 GDI 相比，GDI+新增的特性主要有渐变画刷、样条和贝塞尔曲线、持久路径、矩阵 变换、伸缩区域、α 混色和对多种图像格式的支持。&lt;/p&gt;
&lt;p&gt;（1）渐变画刷&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_009.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;GDI+中新增加的渐变画刷（gradient brush，梯度刷），通过提供用于填充图形、路径和 区域的颜色线性渐变和路径渐变的画刷，扩展了 GDI 的功能。渐变画刷可用于绘制直线、 曲线和路径，参见图 14-4。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_010.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;a)（水平）线性渐变 b)（贝塞尔）路径渐变&lt;/p&gt;
&lt;p&gt;图 14-4 渐变画刷 图 14-5 基样条曲线与折线&lt;/p&gt;
&lt;p&gt;（2）曲线方法&lt;/p&gt;
&lt;p&gt;GDI+支持基样条（cardinal splines）和贝塞尔（Bezier）方法，可以由若干控制点生成 光滑的曲线，参见图 14-5。&lt;/p&gt;
&lt;p&gt;（3）持久路径对象&lt;/p&gt;
&lt;p&gt;GDI 中的路径（path）属于设备上下文，并且会在绘制时被毁坏。而 GDI+则可以创建 并维护多个与 Graphics 对象分开的持久（persistent）路径对象——GraphicsPath 对象，在绘 图操作时也不会破坏，因此可多次使用同一个 GraphicsPath 对象来绘制路径。&lt;/p&gt;
&lt;p&gt;（4）变换和矩阵对象&lt;/p&gt;
&lt;p&gt;GDI+提供了 Matrix（矩阵）对象，它是一种可以使（缩放、旋转和平移等）变换（transformation）简易灵活的强 大工具，矩 阵对象一般 与变换对 象联合使用 。例如，GraphicsPath 对象具有 Transform 方法，此方法接收 Matrix 对象作为参数。参见图 14-6。&lt;/p&gt;
&lt;p&gt;（5）可伸缩区域&lt;/p&gt;
&lt;p&gt;GDI+通过对可伸缩区域（scalable region）的支持极大地扩展了 GDI。在 GDI 中，区域 被存储在设备坐标中，而且，可应用于区域的惟一变换是平移。而 GDI+在全局坐标中存储 区域，并且允许区域发生任何可存储在变换矩阵中的变换（如缩放和旋转）。图 14-7 显示一 个区域在执行三种变换（缩放、旋转和平移）前后的情况。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_011.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-6 路径变换&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_012.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-7 区域变换&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_013.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-8 不同透明度&lt;/p&gt;
&lt;p&gt;（6）α混色&lt;/p&gt;
&lt;p&gt;在图 14-7 中，可以在变换区域（用蓝色阴影画笔填充）中看到未变换区域（用红色填充），这是由 GDI+支持的α 混色（alpha blending，透明混合）实现的。使用α 混色，可以指定填充颜色的透明度。透明色与背景色相混合———填充色越透明，透出的背景色就越多。 图 14-8 显示四个用相同颜色（红色）填充、但透明层次不同的椭圆。&lt;/p&gt;
&lt;p&gt;（7）丰富的图像格式支持&lt;/p&gt;
&lt;p&gt;GDI+提供 Image、Bitmap 和 Metaf ile 类，可以用不同的格式加载、保存和操作图像。 GDI+支持 BMP、GIF、JPEG、EXIF、PNG、TIFF、ICON、WMF、EMF 共 9 种常见的图像 格式。这些已经被 ATL/MFC 中的基于 GDI+的 CImage 类所体现。&lt;/p&gt;
&lt;p&gt;（8）GDI+的不足&lt;/p&gt;
&lt;p&gt;虽然，相对于 GDI 来说，GDI+确实增加了许多新特性，而且功能更强大，使用也更方 便。但是，这并不等于 GDI+就能够完全代替 GDI。&lt;/p&gt;
&lt;p&gt;因为 GDI+实际上是 GDI 的高层封装和功能扩展，GDI+的执行效率一般要低于 GDI 的。 另外，GDI+不支持图形的位运算，那么就不能进行异或绘图等操作。而且在 Visual C++中， GDI+还不直接支持双缓存机制（如内存 DC 和显示 DC），这将大大影响 GDI+在高速图形、 图像、动画和视频等方面的应用。&lt;/p&gt;
&lt;h3 id=&quot;1-2-2-编程模式的改变&quot;&gt;&lt;a href=&quot;#1-2-2-编程模式的改变&quot; class=&quot;headerlink&quot; title=&quot;1.2.2 编程模式的改变&quot;&gt;&lt;/a&gt;1.2.2 编程模式的改变&lt;/h3&gt;&lt;p&gt;GDI+的出现，也使基于 GDI 的编程模式产生了很大变化：GDI+用一个“无状态模式”， 取代了 GDI 中（需要先将各种工具和项目选入 DC 对象后，才能进行绘图的）“状态模式”。 主要体现在以下几个方面：&lt;/p&gt;
&lt;p&gt;（1）DC 句柄和图形对象&lt;/p&gt;
&lt;p&gt;设备上下文（DC）是 GDI 中使用的一种结构，用于存储与特定显示设备相关的的绘制 工具及属性的信息，用于屏幕显示的 DC 还与特定窗口相关联。为了使用 GDI API 进行绘图， 必须首先获得一个 DC 的句柄（HDC），然后将该句柄作为参数，传递给实际进行绘图的 GDI 函数。在 MFC 中，DC 及其绘图功能被封装在 CDC 类中，DC 句柄成为了成员变量，绘图 函数变成了方法，不再需要显式传递 HDC 参数。&lt;/p&gt;
&lt;p&gt;使用 GDI+，不需要再（直接）使用句柄或设备上下文，而是只需（通过 HDC）创建一个 Graphics 对象，然后用熟悉的面向对象方式来调用其中的各种绘图方法，例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;myGraphicsObject.DrawLine(&amp;amp;pen, x1, y1, x2, y2);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;正如 DC 是 GDI 的核心，Graphics 对象也位于 GDI+的核心。DC 和 Graphics 对象的作 用相似，但在使用设备上下文（GDI）的基于句柄的编程模式和使用 Graphics 对象（GDI+） 的面向对象的编程模型之间，存在一些基本的差异。&lt;/p&gt;
&lt;p&gt;Graphics 对象（像 DC 一样）与屏幕上的特定窗口关联，并具有指定如何绘制项目的属 性（如 SmoothingMode 和 TextRenderingHint）。但是，Graphics 对象不受笔、刷、路径、图 像或字体的约束，这与设备上下文不同。例如，使用设备上下文绘制线条之前，必须先调用 SelectObject 将笔选入 DC 中，以使笔对象和 DC 关联。在设备上下文中绘制的所有线条均 使用该笔，直到选择另一支不同的笔为止。在 GDI+中，将 Pen 对象作为参数传递给 Graphics 类的 DrawLine 等画线方法。可以在一系列的 DrawLine 调用的每个调用中，使用不同的 Pen 对象，而不必将给定的 Pen 对象与 Graphics 对象关联。&lt;/p&gt;
&lt;p&gt;（2）画线的两种方法&lt;/p&gt;
&lt;p&gt;下面每个示例都从点(20, 10)到点(200, 100)绘制一条宽为 3 的红色线条。第一个示例调 用 GDI，第二个示例则通过托管类接口调用 GDI+，这里都使用 MFC。也可以不使用 MFC， 而直接用 API 来进行 GDI+绘图（由于篇幅有限，这里就不介绍了）。&lt;/p&gt;
&lt;p&gt;1）用 GDI 画线&lt;/p&gt;
&lt;p&gt;利用 MFC 进行 GDI 绘图，步骤与 API 的差不多，只是 MFC 将各种 GDI 功能封装到了 不同的类中。例如，笔的类为 CPen、点的类为 CPoint、设备上下文的类为 CDC。而且所有 的绘图函数都被封在 CDC 类中，所以只能作为其对象的方法才能被使用，当然也就不用再 带 HDC 句柄作为输入参数了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CDC *pDC = GetDC(); // 获取 DC 对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CPen pen(PS_SOLID, 3, RGB(255, 0, 0)); // 创建笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pDC-&amp;gt;SelectObject(&amp;amp;pen); // 选笔入 DC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pDC-&amp;gt;MoveTo(20, 10); // 将当前点移到直线的起点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pDC-&amp;gt;LineTo(200, 100); // 从当前点画线到直线的终点&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2）用 GDI+画线&lt;/p&gt;
&lt;p&gt;利用 MFC 进行 GDI+绘图，步骤与 API 的差不多。只是代码改在 OnDraw 函数中，而且获取 DC 句柄的方法不同。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CDC *pDC = GetDC(); // 获取 DC 对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics myGraphics(pDC-&amp;gt;m_hDC); // 利用 DC 句柄创建图形对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen myPen(Color(255, 0 , 0), 3); // 创建笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myGraphics.DrawLine(&amp;amp;myPen, 20, 10, 200, 100); // 画直线&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（3）作为参数的绘图工具&lt;/p&gt;
&lt;p&gt;前面的示例显示：在 GDI+中，创建和维护 Pen 对象，可以与提供绘制方法的 Graphics 对象分开。同样，创建和维护 Brush、GraphicsPath、Image 和 Font 对象也可以与 Graphics 对象分开，Graphics 类提供的许多绘制方法，都将笔、刷、路径、图像和字体等对象，作为 参数接收。例如，Brush 对象作为参数传递至 FillRectangle 方法，GraphicPath 对象作为参数 传递至 DrawPath 方法。同样，Image 和 Font 对象传递至 DrawImage 和 DrawString 方法。&lt;/p&gt;
&lt;p&gt;这与 GDI 不同，在 GDI 中，需要先将笔、刷、路径、图像或字体等 GDI 工具对象选入 DC，然后（API）将 DC 的句柄作为参数传递至绘制函数或（MFC）采用 CDC 类对象的函 数使用 DC 中当前的笔、刷、路径、图像或字体来绘图。&lt;/p&gt;
&lt;p&gt;（4）无当前位置&lt;/p&gt;
&lt;p&gt;GDI+从总体上已经放弃了当前位置的概念，如在前面所述的 DrawLine 方法中线条的起 点和终点均被作为参数接收。这与 GDI 方案不同，在 GDI 中，调用 MoveToEx(hdc, x1, y1, NULL) 或 pDC-&amp;gt;MoveTo(x1, y1)来设置当前笔位置之后，再调用 LineTo(hdc, x2 , y2) 或 pDC-&amp;gt;LineTo(x2, y2)来绘制一条从(x1, y1)到(x2 , y2)的线条。&lt;/p&gt;
&lt;p&gt;（5）绘制和填充的不同方法&lt;/p&gt;
&lt;p&gt;GDI 的 Rectangle 和 Ellipse 等函数，可一步完成绘制轮廓和填充内部的功能。轮廓由当 前选定的笔绘制，而内部则由当前选定的刷来填充。GDI+则必须分别调用绘制轮廓和填充 内部的两个不同方法来做到这一点。例如，Graphics 类的 DrawRectangle 方法将 Pen 对象作 为其参数之一，而 FillRectangle 方法将 Brush 对象作为其参数之一。所以在绘制轮廓和填充 图形内部时，GDI+要比 GDI 更灵活，但也更麻烦。&lt;/p&gt;
&lt;p&gt;（6）构造区域&lt;/p&gt;
&lt;p&gt;GDI 提供几种用于创建区域的 函数（在 MFC 中，它们被 封装在 CRng 类里）： CreateRectRgn 、 CreateEllpticRgn 、 CreateRoundRectRgn 、 CreatePolygonRgn 和 CreatePolyPolygonRgn。您或许希望 GDI+中的 Region 类也有类似的构造函数，将矩形、椭 圆、圆角矩形和多边形作为参数接收，但事实并非如此。GDI+中的 Region 类提供一个接收 Rectangle 对象的构造函数和另一个接收 GraphicsPath 对象的构造函数。如果想基于椭圆、 圆角矩形或多边形构造区域，可以通过创建一个 GraphicsPath 对象（可包含椭圆的对象等）， 然后将其传递至 Region 构造函数来轻松实现。&lt;/p&gt;
&lt;p&gt;GDI+通过组合图形和路径，使得构成复杂区域十分简单。Region 类具有 Union 和 Intersect 方法，可用于扩展具有路径的现有区域或其它区域。GDI+方案一个很好的功能就是 GraphicsPath 对象在作为参数传递至 Region 构造函数时不会被破坏（在 GDI 中，可以使用 PathToRegion 方法将路径转换为区域，但在此过程中，路径将被破坏）。另外，GraphicsPath 对象在作为参数传递给 Union 或 Intersect 方法时也不会被破坏，因此，在一些单独的区域中， 可以将给定的路径作为构造块使用。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Region region1(rect1); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Region region2(rect2); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;region1.Union(onePath); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;region2.Intersect(onePath);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;1-3-GDI-的-MFC-编程&quot;&gt;&lt;a href=&quot;#1-3-GDI-的-MFC-编程&quot; class=&quot;headerlink&quot; title=&quot;1.3 GDI+的 MFC 编程&quot;&gt;&lt;/a&gt;1.3 GDI+的 MFC 编程&lt;/h2&gt;&lt;p&gt;本节介绍利用 MFC 进行 GDI+编程的必要的准备，并通过例子说明 GDI+编程的具体步 骤，最后给出如何解决存在的 new 操作符问题的方法。&lt;/p&gt;
&lt;p&gt;C++封装的 GDI+的（英文）帮助内容，位于 VS08 的“目录/Win32 和 COM 开发/Graphics and Multimedia/GDI+”，主要的参考资料位于其子目录“GDI+ Reference”中。&lt;/p&gt;
&lt;h3 id=&quot;1-3-1-设置与初始化&quot;&gt;&lt;a href=&quot;#1-3-1-设置与初始化&quot; class=&quot;headerlink&quot; title=&quot;1.3.1 设置与初始化&quot;&gt;&lt;/a&gt;1.3.1 设置与初始化&lt;/h3&gt;&lt;p&gt;封装了 GDI+ API 的各种 C++类、函数、常量、枚举和结构，都被定义在 Gdiplus.h 头 文件所包含的一系列头文件中。所以，采用 MFC 进行 GDI+编程，必须包含 Gdiplus.h 头文 件。&lt;/p&gt;
&lt;p&gt;从 14.1.2 的有关 GDI+平面 API 的讨论可知，封装在 GDI+类中方法，最后都需要调用GDI+平面 API 中的相关底层函数，才能完成实际的操作。所以，为了运行 GDI+应用程序，在操作系统平台中，必须安装动态链接库 Gdiplus.dll。对 Windows XP 及以上版本，该 DLL已经自动被操作系统包含。&lt;/p&gt;
&lt;p&gt;该动态链接库所对应的静态库文件为 GdiPlus.lib，而且它在 VC08 及之前的早期版本中 不是 C++和 MFC 的默认链接库。所以，对早期的 VC 版本必须在项目设置，添加该库作为 链接器输入的附加依赖项。但是对 VC08 SP1 及 VC10，该库已经成为标准链接库之一，不 必再为链接器输入的附加依赖项添加此库。&lt;/p&gt;
&lt;p&gt;因为在 Gdiplus.h 头文件中，将所有的 GDI+的类、函数、常量、枚举和结构等都定义在 了命名空间 Gdiplus 中。所以，一般在 GDI+程序中，都应该使用如下的命名空间声明：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;using namespace Gdiplus;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（1）VC 中的设置&lt;/p&gt;
&lt;p&gt;为了在 MFC 应用程序中能使用 GDI+，必须包含 GDI+头文件、使用 GDI+命名空间。 对 VC08 及之前的版本，还要为项目添加 GDI+链接库。&lt;/p&gt;
&lt;p&gt;1) 包含头文件、使用命名空间——在要使用 GDI+的文件（如视图类的头文件或代码 文件）头部包含 GDI+的头文件：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;amp;lt;gdiplus.h&amp;amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;并加上使用 GDI+命名空间的 using 指令（区分大小写，注意首字母大写）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;using namespace Gdiplus;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2) 添加链接库（对 VC08 SP1 及 VC10 不必添加）——在 VS08 及其早期版本中，选 “项目/*属性”菜单项，打开项目的属性页窗口，先选“所有配置”，再选“配置 属性/链接器/输入”项，在右边上部的“附加依赖项”栏的右边，键入 GdiPlus.lib（参见图 14-9）后按“应用”钮，最后按“确定”钮关闭对话框。&lt;/p&gt;
&lt;p&gt;（2）GDI+的初始化与清除&lt;/p&gt;
&lt;p&gt;为了在 MFC 应用程序中使用采用 C++封装的 GDI+ API，必须在 MFC 项目的应用程序 类 中 ， 调 用 GDI+ 命 名 空 间 中 的 GDI+ 启 动 函 数 GdiplusStartup 和 GDI+ 关 闭 函 数 GdiplusShutdown，来对 GDI+进行初始化（装入动态链接库 Gdiplus.dll，或锁定标志+1）和 清除（卸载动态链接库 Gdiplus.dll，或锁定标志-1）工作。它们一般分别在应用程序类的InitInstance 和 ExitInstance 重载方法中调用。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_014.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-9 在项目属性对话框中添加静态链接库&lt;/p&gt;
&lt;p&gt;函数 GdiplusStartup 和 GdiplusShutdown，都被定义在 GdiplusInit.h 头文件中：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status WINAPI GdiplusStartup( OUT ULONG_PTR *token,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const GdiplusStartupInput *input, OUT GdiplusStartupOutput *output); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;void GdiplusShutdown(ULONG_PTR token);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;p&gt;类型 ULONG_PTR，是用无符号长整数表示的指针，被定义在 basetsd.h 头文件中：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef _W64 unsigned long ULONG_PTR;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;输出参数 token（权标），供关闭 GDI+的函数使用，所以必须设置为应用程序类的 成员变量（或全局变量，不提倡）。&lt;/p&gt;
&lt;p&gt;结构 GdiplusStartupInput 和 GdiplusStartupOutput，都被定义在 GdiplusInit.h 头文件中。&lt;/p&gt;
&lt;p&gt;GDI+启动输入结构指针参数 input，一般取默认构造值即可，即（设：无调 试事件回调过程、不抑制背景线程、不抑制外部编解码）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;input = GdiplusStartupInput(NULL, FALSE, FALSE);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;GDI+启动输出结构指针参数 output，一般不需要，取为 NULL 即可。 注意，采用 MFC 进行 GDI+ API 编程时，在使用任何 GDI+的功能调用之前，必须先调用 GDI+启动函数 GdiplusStartup 来进行初始化 GDI+的工作；在完成所有的 GDI+功能调用 之后，必须调用 GDI+关闭函数 GdiplusShutdown 来进行清除 GDI+的工作。&lt;/p&gt;
&lt;p&gt;（3）过程框图&lt;/p&gt;
&lt;p&gt;图 14-10 是使用 MFC 进行 GDI+编程的设置、准备与初始化过程的逻辑框图。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-10 GDI+的设置、准备与初始化&lt;/p&gt;
&lt;h3 id=&quot;1-3-2-编程例子&quot;&gt;&lt;a href=&quot;#1-3-2-编程例子&quot; class=&quot;headerlink&quot; title=&quot;1.3.2 编程例子&quot;&gt;&lt;/a&gt;1.3.2 编程例子&lt;/h3&gt;&lt;p&gt;下面通过一个简单的例子，来说明如何使用 GDI+进行应用程序开发。&lt;/p&gt;
&lt;p&gt;（1）创建和设置&lt;/p&gt;
&lt;p&gt;创建一个名为 Gdip 的传统界面 MFC 单文档应用程序项目，在应用程序类和视图类的CPP 代码文件中，包含头文件并使用命名空间：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;gdiplus.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;using namespace Gdiplus;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对 VC08 及之前的版本还需在项目属性中添加链接库 GdiPlus.lib。&lt;/p&gt;
&lt;p&gt;（2）初始化与清除&lt;/p&gt;
&lt;p&gt;然后再进行 GDI+系统的初始化，这需要在应用程序类 CGdipApp 中声明一个成员变量：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ULONG_PTR m_gdiplusToken; // ULONG PTR 为 int64 类型 并在该类的初始化函数 CGdipApp::InitInstance()中加入以下代码来对 GDI+进行初始化：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GdiplusStartupInput gdiplusStartupInput; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GdiplusStartup(&amp;amp;m_gdiplusToken, &amp;amp;gdiplusStartupInput, NULL);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意：这两个语句必须加在应用程序类的 InitInstance 函数中的&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CWinApp::InitInstance();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;语句之前，不然以后会造成视图窗口不能自动重画、程序中不能使用字体等等一系列问题。&lt;/p&gt;
&lt;p&gt;还要在 CGdipApp::ExitInstance()中加入以下代码来关闭 GDI+：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GdiplusShutdown(m_gdiplusToken);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的 InitInstance 和 ExitInstance 都是应用程序类的重写型方法。而且，默认时 VC08 SP1 及其以前版本是不会自动生成 ExitInstance 方法代码的（不过 VC10 会自动生成此方法），需 要自己利用属性窗口来添加（不要手工添加）。&lt;/p&gt;
&lt;p&gt;（3）绘图&lt;/p&gt;
&lt;p&gt;接下来就可以利用 GDI+进行绘图了。下面的代码段是在 OnDraw 函数中画一个带网格 的透明度连续变化的图：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CGdipView::OnDraw(CDC* pDC) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ……&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Graphics graph(pDC-&amp;amp;gt;m_hDC); // 创建图形对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Pen bluePen(Color(0, 0, 255)); // 创建蓝色笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Pen redPen(Color(255, 0, 0)); // 创建红色笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int y = 255; // y 的初值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (int x = 0; x &amp;amp;lt; 256; x += 5) &amp;#123; // 绘制红蓝网线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        graph.DrawLine(&amp;amp;bluePen, 0, y, x, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        graph.DrawLine(&amp;amp;redPen, 255, x, y, 255);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        y -= 5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 画一组绿色透明度垂直渐变的水平线（填满正方形）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (y = 0; y &amp;amp;lt; 256; y++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Pen pen(Color(y, 0, 255, 0)); // α 随 y 变的绿色笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawLine(&amp;amp;pen, 0, y, 255, y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 画一组品红色透明度水平渐变的垂直线（填满扁矩形）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (int x = 0; x &amp;amp;lt; 256; x++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Pen pen(Color(x, 255, 0, 255)); // α 随 x 变的品红色笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        graph.DrawLine(&amp;amp;pen, x, 100, x, 200);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行的结果如图 14-11 所示。其中，左图为第一个循环所绘制的结果、中图为前两个循 环所绘制的结果、右图为全部三个循环所绘制的结果。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_017.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_018.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_019.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-11 透明度的连续变化&lt;/p&gt;
&lt;h3 id=&quot;1-3-3-new-问题&quot;&gt;&lt;a href=&quot;#1-3-3-new-问题&quot; class=&quot;headerlink&quot; title=&quot;1.3.3 new 问题&quot;&gt;&lt;/a&gt;1.3.3 new 问题&lt;/h3&gt;&lt;p&gt;在 VC08（包括 SP1）中使用 GDI+时，不能用 new 来动态创建 GDI+对象。解决办法有 如下两种：&lt;/p&gt;
&lt;p&gt;（1）修改 GdiplusBase 类&lt;/p&gt;
&lt;p&gt;打开（默认）位于“C:\Program Files\Microsoft SDKs\Windows\v6.0A\ Include\”目录中 的 Gdiplus Base.h 头文件，并注释掉里面 Gdiplus Base 类的内容（该类其实只含 new、new[]、 delete 和 delete[]这四个运算符的重载），使其成为一个空类（但不要删除整个类）。&lt;/p&gt;
&lt;p&gt;为了不修改原始安装目录中的 Gdiplus Base.h 头文件，可以：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;将该头文件复制到你的项目目录中。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;注释掉该头文件里面 Gdiplus Base 类的内容（保留类定义）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在项目中所有的#include &lt;gdiplus.h&gt;语句之前，包含”Gdiplus Base.h”头文件，形如：&lt;/gdiplus.h&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;quot;gdiplusBase.h&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;amp;lt;gdiplus.h&amp;amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;则编译系统会优先包含项目目录中的 gdiplus Base.h 头文件，从而屏蔽掉原来位于 平台 SDK 的 Include 目录中的同名头文件。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;（2）用&amp;amp;代替 new&lt;/p&gt;
&lt;p&gt;也可以在有些使用 new 的地方改用&amp;amp;，例如将代码 Pen &lt;em&gt;pPen = &lt;strong&gt;new&lt;/strong&gt; Pen(Color::Red); 改 为 Pen &lt;/em&gt;pPen = &lt;strong&gt;&amp;amp;&lt;/strong&gt;Pen(Color::Red);。&lt;/p&gt;
&lt;h2 id=&quot;1-4-几何辅助类&quot;&gt;&lt;a href=&quot;#1-4-几何辅助类&quot; class=&quot;headerlink&quot; title=&quot;1.4 几何辅助类&quot;&gt;&lt;/a&gt;1.4 几何辅助类&lt;/h2&gt;&lt;p&gt;与 GDI 的类似，在 GDI+ API 中也定义了许多绘图的辅助类，常用的有点、大小和矩形 等几何类。它们都是没有基类的独立类，被定义在头文件 GdiplusTypes.h 中。与 GDI 不同 的是，在 GDI+中新增加了浮点型的几何类。&lt;/p&gt;
&lt;p&gt;浮点数版的几何对象和绘图方法，是 GDI+新增的功能，这些在各种工程技术领域都非 常有用。因为一般的实际图形设计，都是基于实数坐标的。包括机械（../轮船/飞机 等）、建筑（../道路/堤坝等）和图形动画设计（../../轨迹等）等设 计，都必须使用浮点参数和坐标系。&lt;/p&gt;
&lt;p&gt;下面对 GDI+的几何辅助类，逐个进行简单的介绍。&lt;/p&gt;
&lt;h3 id=&quot;1-4-1-Point-F-（点）&quot;&gt;&lt;a href=&quot;#1-4-1-Point-F-（点）&quot; class=&quot;headerlink&quot; title=&quot;1.4.1 Point[F]（点）&quot;&gt;&lt;/a&gt;1.4.1 Point[F]（点）&lt;/h3&gt;&lt;p&gt;GDI+中，有两种类型的点：整数点（对应于 Point 类，与 GDI 的 MFC 类 CPoint 类似） 和浮点数点（对应于 PointF 类），下面分别加以介绍。&lt;/p&gt;
&lt;p&gt;（1）整数点类 Point&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class Point &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Point() &amp;#123;X = Y = 0;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Point(const Point &amp;amp;point) &amp;#123;X = point.X; Y = point.Y;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Point(const Size &amp;amp;size) &amp;#123;X = size.Width; Y = size. Height;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Point(INT x, INT y) &amp;#123;X = x; Y = y;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Point operator+(const Point&amp;amp; point) const &amp;#123;return Point(X + point.X, Y + point.Y);&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Point operator-(const Point&amp;amp; point) const &amp;#123;return Point(X - point.X, Y - point.Y);&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    BOOL Equals(const Point&amp;amp; point) &amp;#123;return (X == point.X) &amp;amp;&amp;amp; (Y == point.Y);&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INT X; INT Y; // 大写 X、Y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中：typedef int INT; 为 4 字节有符号整数（windef.h）。 注意，GDI+的点与 GDI 的区别：POINT 和 CPoint 采用小写的 x、y。&lt;/p&gt;
&lt;p&gt;（2）浮点数点类 PointF&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class PointF &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PointF() &amp;#123;X = Y = 0.0f;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PointF(REAL x, REAL y) &amp;#123;X = x; Y = y;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ... // 与整数版的类似&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    REAL X; REAL Y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中：typedef float REAL; 为 4 字节浮点数（GdiplusTypes.h）。&lt;/p&gt;
&lt;h3 id=&quot;1-4-2-Size-F-（大小）&quot;&gt;&lt;a href=&quot;#1-4-2-Size-F-（大小）&quot; class=&quot;headerlink&quot; title=&quot;1.4.2 Size[F]（大小）&quot;&gt;&lt;/a&gt;1.4.2 Size[F]（大小）&lt;/h3&gt;&lt;p&gt;GDI+中，也有两种类型的大小（尺寸）：整数大小（对应于 Size 类，与 GDI 的 MFC 类 CSize 类似）和浮点数大小（对应于 SizeF 类）。下面分别加以介绍：&lt;/p&gt;
&lt;p&gt;（1）整数大小类 Size：&lt;/p&gt;
&lt;p&gt;class Size&lt;br&gt;{&lt;br&gt;public:&lt;br&gt;    Size() {Width = Height = 0;}&lt;br&gt;    Size(INT width, INT height) {Width = width; Height = height;}&lt;br&gt;    …&lt;br&gt;public:&lt;br&gt;    INT Width;&lt;br&gt;    INT Height; // 宽和高，不再是 cx 和 cy&lt;br&gt;};&lt;/p&gt;
&lt;p&gt;注意，这里的大小与 GDI 的区别：SIZE 和 CSize 的分量成员为 cx 和 cy，不是宽和高。&lt;/p&gt;
&lt;p&gt;（2）浮点数大小类 SizeF：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class SizeF &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SizeF() &amp;#123;Width = Height = 0.0f;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SizeF(REAL width, REAL height) &amp;#123;Width = width; Height = height;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    REAL Width; REAL Height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-4-3-Rect-F-（矩形）&quot;&gt;&lt;a href=&quot;#1-4-3-Rect-F-（矩形）&quot; class=&quot;headerlink&quot; title=&quot;1.4.3 Rect[F]（矩形）&quot;&gt;&lt;/a&gt;1.4.3 Rect[F]（矩形）&lt;/h3&gt;&lt;p&gt;GDI+中，也有两种类型的矩形：整数矩形（对应于 Rect 类，与 GDI 的 MFC 类 CRect 类似）和浮点数矩形（对应于 RectF 类），下面分别加以介绍。&lt;/p&gt;
&lt;p&gt;（1）整数矩形类 Rect：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class Rect &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Rect() &amp;#123;X = Y = Width = Height = 0;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Rect(INT x, INT y, INT width, INT height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INT GetLeft() const &amp;#123;return X;&amp;#125; INT GetTop() const &amp;#123;return Y;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INT GetRight() const &amp;#123;return X+Width;&amp;#125; INT GetBottom() const &amp;#123;return Y+Height;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    BOOL IsEmptyArea() const&amp;#123;return (Width &amp;amp;lt;= 0) || (Height &amp;amp;lt;= 0);&amp;#125; BOOL Equals(const Rect &amp;amp; rect) const;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    BOOL Contains(INT x, INT y) const; BOOL **Contains**(const Point&amp;amp; pt) const; BOOL Contains(Rect&amp;amp; rect) const;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    VOID Offset(const Point&amp;amp; point); VOID Offset(INT dx, INT dy);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INT X; INT Y; // 大写的 X 和 Y（为矩形左上角的坐标），不再是 left 和 top &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INT Width; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INT Height; // 宽和高，不再是 right 和 bottom&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意，这里的矩形与 GDI 的区别：RECT 和 CRect 的分量成员是左、顶、右、底而不 是 X、Y、宽、高。虽然 Rect 中的(X, Y)等价于 RECT 的(left, top)，但是 Rect 中的(Width, Height) 却不同于 RECT 的(right, bottom)。&lt;/p&gt;
&lt;p&gt;（2）浮点数矩形类 RectF：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class RectF &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RectF() &amp;#123;X = Y = Width = Height = 0.0f;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RectF(REAL x, REAL y, REAL width, REAL height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    REAL X; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    REAL Y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    REAL Width; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    REAL Height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在 GDI 的 MFC 封装中，除了定义有点、大小和矩形的类外，还保留了对应的 API 结构 POINT、SIZE 和 RECT，主要是考虑运行效率及与底层 GDI API 的兼容。&lt;/p&gt;
&lt;p&gt;比较可知，GDI 和 GDI+都有对应的几何类，不过 GDI+没有对应的结构（但有新增加 的浮点数版类），而 GDI 则没有对应的浮点数版类（但却有对应的结构）。&lt;/p&gt;
&lt;h2 id=&quot;1-5-颜色&quot;&gt;&lt;a href=&quot;#1-5-颜色&quot; class=&quot;headerlink&quot; title=&quot;1.5 颜色&quot;&gt;&lt;/a&gt;1.5 颜色&lt;/h2&gt;&lt;p&gt;与 GDI 相比，GDI+的颜色新增了一个透明分量，并且定义了颜色类 Color。&lt;/p&gt;
&lt;h3 id=&quot;1-5-1-颜色类型-ARGB&quot;&gt;&lt;a href=&quot;#1-5-1-颜色类型-ARGB&quot; class=&quot;headerlink&quot; title=&quot;1.5.1 颜色类型 ARGB&quot;&gt;&lt;/a&gt;1.5.1 颜色类型 ARGB&lt;/h3&gt;&lt;p&gt;GDI+中的颜色，与 GDI 中的颜色的最大不同，是增加了一个字节（8 位）的透明分量 alpha（α ），用来表示颜色的不透明度：0 透明（看不见前景色，只有背景色）~255 不透明（看不见背景色，只有前景色，相当于覆盖和拷贝）。背景色指屏幕窗口中原有图形的颜色， 前景色指将要绘制图形的颜色。&lt;/p&gt;
&lt;p&gt;因此，GDI+中的颜色一般都是用四个字节表示（Intel CPU 中，多字节整数的低位在前）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;整数序（高位→低位）：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-5-1-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;字节序（低字节→高字节）：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-5-1-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在 GDI 中没有专门的颜色类，只有一个颜色类型 COLORREF，也定义为： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef DWORD COLORREF; // 0x00bbggrr (windef.h)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;和一个生成颜色的宏：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;COLORREF RGB( BYT E bRed, BYTE bGreen, BYT E bBlue);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef unsigned char BYTE; // 单字节无符号字符整数&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在 GDI+中，也将颜色数据定义为无符号 4 字节长整数类型 DWORD，但是改名为 ARGB： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef DWORD ARGB; // gdipluspixelformats.h&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-5-2-颜色类-Color&quot;&gt;&lt;a href=&quot;#1-5-2-颜色类-Color&quot; class=&quot;headerlink&quot; title=&quot;1.5.2 颜色类 Color&quot;&gt;&lt;/a&gt;1.5.2 颜色类 Color&lt;/h3&gt;&lt;p&gt;而且 GDI+中还定义了专门的 Color 类，不仅包含了此颜色数据，而且还有多个构造函 数和其他辅助方法、枚举和常量。&lt;/p&gt;
&lt;p&gt;Color 类的构造函数中，最常用的是：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Color( BYTE a, BYTE r, BYT E g, BYTE b); // a 为 alpha 分量α 但也有一个默认构造函数：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Color( VOID); // 不透明黑色，相当于 Color(255, 0, 0, 0);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;还有一个与 GDI 兼容的构造函数：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Color( BYTE r, BYTE g, BYTE b); // 不透明色，相当于 Color(255, r, g, b);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你也可以直接用含颜色数据的 4 字节无符号整数，来构造 Color 类的对象：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Color( ARGB argb); // 相当于 Color(a, r, g, b);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;该整数可以由 Color 类的静态方法 MakeARGB 或动态方法 GetValue 获得：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static ARGB MakeARGB( BYT E a, BYTE r, BYTE g, BYTE b);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ARGB GetValue(VOID);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你还也可以用 Color 类的方法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;COLORREF ToCOLORREF() const;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将 Color 对象中的颜色，转换为 GDI 的颜色类型。&lt;/p&gt;
&lt;p&gt;Color 类还提供了各个颜色分量的获取方法及其简化版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetAlpha() const; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetA() const; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetRed() const; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetR() const; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetGreen() const; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetG() const; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetBlue() const; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetB() const;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你也可以先用宏：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetRValue(DWORD rgb); // COLORREF rgb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetGValue(DWORD rgb); // COLORREF rgb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE GetBValue(DWORD rgb); // COLORREF rgb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;获取 COLORREF 的 R、G、B 值，然后再用这些值调用 Color 类的构造函数来创建 Color 对象。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;COLORREF crCol = colDlg.GetColor(); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BYTE r = GetRValue(crCol),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     g = GetGValue(crCol), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     b = GetBValue(crCol);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Color col(r, g, b); // Color col(crCol | (255&amp;lt;&amp;lt;24));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-5-3-颜色枚举常量&quot;&gt;&lt;a href=&quot;#1-5-3-颜色枚举常量&quot; class=&quot;headerlink&quot; title=&quot;1.5.3 颜色枚举常量&quot;&gt;&lt;/a&gt;1.5.3 颜色枚举常量&lt;/h3&gt;&lt;p&gt;GDI+在颜色头文件 GdiplusColor.h 中，定义了 141 个公用颜色枚举常量，都是对应颜色 的英文单词。可以用 Color 类直接访问，例如：Color ::Red。&lt;/p&gt;
&lt;p&gt;下面是部分颜色枚举常量（按字母顺序排列）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Common color constants 通用颜色常量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        AliceBlue = 0xFFF0F8FF, // 艾丽丝蓝&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        AntiqueWhite = 0xFFFAEBD7, // 古董白&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Aqua = 0xFF00FFFF, // 水绿&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Aquamarine = 0xFF7FFFD4, // 碧绿&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Azure = 0xFFF0FFFF, // 天蓝&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Beige = 0xFFF5F5DC, // 米色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Bisque = 0xFFFFE4C4, // 汤黄&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Black = 0xFF000000, // 黑&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        BlanchedAlmond = 0xFFFFEBCD, // 布兰奇杏黄&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Blue = 0xFF0000FF, // 蓝&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        BlueViolet = 0xFF8A2BE2, // 蓝紫&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Brown = 0xFFA52A2A, // 棕褐&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Tan = 0xFFD2B48C, // 茶色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Teal = 0xFF008080, // 水鸭青&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Thistle = 0xFFD8BFD8, // 蓟色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Tomato = 0xFFFF6347, // 番茄红&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Transparent = 0x00FFFFFF, // 透明&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Turquoise = 0xFF40E0D0, // 宝石绿&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Violet = 0xFFEE82EE, // 紫罗兰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Wheat = 0xFFF5DEB3, // 小麦色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        White = 0xFFFFFFFF, // 白&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        WhiteSmoke = 0xFFF5F5F5, // 烟白&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Yellow = 0xFFFFFF00, // 黄&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        YellowGreen = 0xFF9ACD32 // 黄绿&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;图 14-12 是各种颜色枚举字符常量（包括中文译名）所对应的色块表（按字母顺序排列）。&lt;/p&gt;
&lt;h2 id=&quot;1-6-图形类-Graphics&quot;&gt;&lt;a href=&quot;#1-6-图形类-Graphics&quot; class=&quot;headerlink&quot; title=&quot;1.6 图形类 Graphics&quot;&gt;&lt;/a&gt;1.6 图形类 Graphics&lt;/h2&gt;&lt;p&gt;与 GDI 的 MFC 类 CDC 类似，GDI+的绘图功能主要由图形类 Graphics 承担。&lt;/p&gt;
&lt;p&gt;图形类 Graphics 是 GDI+的核心，它提供绘制图形、图像和文本的各种方法（似 GDI 中的 CDC 类），还可以存储显示设备和被画项目的属性（到图元文件）。Graphics 类及其方 法都被定义在头文件 Gdiplusgraphics.h 中。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_020.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_021.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-12 颜色枚举常量&lt;/p&gt;
&lt;h3 id=&quot;1-6-1-构造函数&quot;&gt;&lt;a href=&quot;#1-6-1-构造函数&quot; class=&quot;headerlink&quot; title=&quot;1.6.1 构造函数&quot;&gt;&lt;/a&gt;1.6.1 构造函数&lt;/h3&gt;&lt;p&gt;Graphics 类的构造函数有如下 4 种：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics(Image* image); // 用于绘制图像&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics(HDC hdc); // 用于在当前窗口中绘图&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics(HDC hdc, HANDLE hdevice); // 用于在制定设备上绘制图形&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics(HWND hwnd, BOOL icm = FALSE); // 用于在指定窗口中绘图&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中，最常用的是第二种——在当前视图窗口中绘图的图形类构造函数。&lt;/p&gt;
&lt;p&gt;注意，该构造函数的输入参数，是设备上下文的句柄，而不是 CDC 类对象的指针。一 般可以由 CDC 对象得到（因 CDC 类含有公用数据成员 HDC m_hDC;）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在 OnDraw 函数中，利用输入参数 CDC *pDC，就可直接得到 DC 句柄。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在视图类的其他函数中，可先利用 GetDC 函数得到 CDC 指针，然后再利用它去获 取 DC 的句柄。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(GetDC()-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也可以使用 Graphics 类的另一个构造函数 &lt;code&gt;Graphics(HWND hwnd, BOOL icm = FALSE);&lt;/code&gt;，利用视图类的窗口句柄成员来构造 Graphics 对象。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(this-&amp;amp;gt;m_hWnd);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-6-2-状态枚举-status&quot;&gt;&lt;a href=&quot;#1-6-2-状态枚举-status&quot; class=&quot;headerlink&quot; title=&quot;1.6.2 状态枚举 status&quot;&gt;&lt;/a&gt;1.6.2 状态枚举 status&lt;/h3&gt;&lt;p&gt;在图形类 Graphics 中，封装了各种绘图方法。每种绘图方法被调用后，都会返回一种 叫做 status 的枚举值，反映该方法是否被正确执行，0 表示正确，其他大于 0 的值为错误代 码（GdiplusTypes.h）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123; // 状态枚举（含 22 个枚举值）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Ok = 0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    GenericError = 1,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    InvalidParameter = 2,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    OutOfMemory = 3,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PropertyNotSupported = 20,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ProfileNotFound = 21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; Status;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;GDI+的绘图功能被封装在图形类 Graphics 中，下面介绍其中的常用绘图方法。先讲绘 制线型图的方法，再讲绘制填充图的方法，最后讲绘制文字的方法。&lt;/p&gt;
&lt;h3 id=&quot;1-6-3-画线型图的方法&quot;&gt;&lt;a href=&quot;#1-6-3-画线型图的方法&quot; class=&quot;headerlink&quot; title=&quot;1.6.3 画线型图的方法&quot;&gt;&lt;/a&gt;1.6.3 画线型图的方法&lt;/h3&gt;&lt;p&gt;GDI+中绘制线型图形的方法与 GDI 的类似，也包括绘直线、矩形、椭圆和多边形等， 但是 GDI+增加了浮点版本和若干新功能。GDI+的画线函数都是 Graphics 类的方法，而且所 有方法的名称都是以 Draw 开头。&lt;/p&gt;
&lt;p&gt;（1）画直线[折线]DrawLine[s]&lt;/p&gt;
&lt;p&gt;在 GDI+中定义了 6 种绘制直线和折线的方法，前三个为整数版，后三个为对应的浮点 数版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawLine(const Pen* pen, INT x1, INT y1, INT x2, INT y2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawLine(const Pen* pen, const Point&amp;amp; pt1, const Point&amp;amp; pt2); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawLines(const Pen* pen, const Point* points, INT count);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawLine(const Pen* pen, REAL x1, REAL y1, REAL x2, REAL y2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawLine(const Pen* pen, const PointF&amp;amp; pt1, const PointF&amp;amp; pt2); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawLines(const Pen* pen, const PointF* points, INT count);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;DrawLine——画直线（4 个重载），参数 pen 为画直线所用的笔、(x1, y1)和 pt1 为 直线的起点、(x2, y2)和 pt2 为直线的终点。GDI 的相应函数为 MoveTo 和 LineTo。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;DrawLines——画折线（一串相互连接的直线段）（2 个重载），参数 points 为点数 组、count 为数组中点的数目。GDI 的相应函数为 Polyline。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;（2）画矩形[组] DrawRectangle[s]&lt;/p&gt;
&lt;p&gt;在 GDI+中也定义了 6 种绘制矩形和矩形组的方法，也是前三个为整数版，后三个为对 应的浮点数版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawRectangle(const Pen* pen, const Rect&amp;amp; rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawRectangle(const Pen* pen, INT x, INT y, INT width, INT height); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawRectangles(const Pen* pen, const Rect* rects, INT count);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawRectangle(const Pen* pen, const RectF&amp;amp; rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawRectangle(const Pen* pen, REAL x, REAL y, REAL width, REAL height); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawRectangles(const Pen* pen, const RectF* rects, INT count);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;DrawRectangle——画单个矩形（4 个重载），参数 pen 为画矩形所用的笔、rect 为 矩形区域、(x, y)为矩形的左上角、(width, height)为矩形的大小（宽，高）。与 GDI 的对应函数 BOOL Rectangle( int x1, int y1, int x2, int y2);的区别主要是 GDI+的第 2 个和第 4 个画矩形方法的后两个输入参数，不再是 GDI 中的矩形右下角的坐标， 而改成矩形的宽和高了。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;DrawRectangles——画多个矩形（2 个重载），参数 rects 为矩形数组、count 为数组 中矩形的数目。GDI 中没有同时绘制一个矩形数组的函数。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;（3）[椭]圆 DrawEllipse&lt;/p&gt;
&lt;p&gt;GDI+中有 4 个重载的绘制椭圆的方法，如果输入参数所确定的外接矩形的宽高相等， 则画圆。也是前两个为整数版，后两个为对应的浮点数版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawEllipse(const Pen* pen, const Rect&amp;amp; rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawEllipse(const Pen* pen, INT x, INT y, INT width, INT height) Status DrawEllipse(const Pen* pen, const RectF&amp;amp; rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawEllipse(const Pen* pen, REAL x, REAL y, REAL width, REAL height);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这些方法的功能，与 GDI 中的函数：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BOOL Ellipse( int x1, int y1, int x2, int y2 );&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;图 14-13 画弧方法的输入参数&lt;/p&gt;
&lt;p&gt;类似，但是同样要注意 GDI+的 DrawEllipse 方法与 GDI 的 Ellipse 函数的主要区别（与画矩 形的方法与函数类似），是上面的以坐标为参数的第 2、4 个 GDI+画椭圆方法的后两个输入 参数，也是矩形的宽高而不再是矩形的右下角坐标了。&lt;/p&gt;
&lt;p&gt;（4）画[椭]圆弧 DrawArc&lt;/p&gt;
&lt;p&gt;GDI+中也有 4 个重载的绘制椭圆弧的方法，如果输入参数所确定的外接矩形的宽高相 等，则画圆弧。也是前两个为整数版，后两个为对应的浮点数版。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_022.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawArc(const Pen* pen, INT x, INT y, INT width, INT height, REAL startAngle, REAL sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawArc(const Pen* pen, const Rect&amp;amp; rect, REAL startAngle, REAL sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawArc(const Pen* pen, REAL x, REAL y, REAL width, REAL height, REAL startAngle, REAL sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawArc(const Pen* pen, const RectF&amp;amp; rect, REAL startAngle, REAL sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意，角度的单位是度（不是弧度，C++的三角函数 采用的是弧度单位），而且都必须是实数。零度角为 x 轴 方向，顺时针方向为正（这与数学上反时针方向为正刚好相反），参见图 14-13。&lt;/p&gt;
&lt;p&gt;（5）画多边形 DrawPolygon&lt;/p&gt;
&lt;p&gt;GDI+中有 2 个重载的绘制多边形的方法，前一个为整数版，后一个为对应的浮点数版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawPolygon(const Pen* pen, const Point* points, INT count); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawPolygon(const Pen* pen, const PointF* points, INT count);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中，各参数的含义同画折线方法 DrawLines 的，只是 DrawPolygon 方法会将点数组中的起点和终点连接起来，形成一个封闭的多边形区域。 该方法的功能与 GDI 的 Polygon 函数相同：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BOOL Polygon( LPPOINT lpPoints, int nCount );&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意：GDI+中没有提供与 GDI 函数 RoundRect（圆角矩形）和 Chord（弓弦）具有类 似功能的绘图方法，但可以利用矩形+椭圆和弧+直线等方法来自己实现。&lt;/p&gt;
&lt;h3 id=&quot;1-6-4-画填充图的方法&quot;&gt;&lt;a href=&quot;#1-6-4-画填充图的方法&quot; class=&quot;headerlink&quot; title=&quot;1.6.4 画填充图的方法&quot;&gt;&lt;/a&gt;1.6.4 画填充图的方法&lt;/h3&gt;&lt;p&gt;在 GDI 中，任何画封闭区域的性状图绘制函数（如矩形、圆角矩形、[椭]圆、弓弦和多 边形等），都可以画填充图，因为它们总是在用当前笔画指定边框的同时，也用当前刷子填 充内部区域。&lt;/p&gt;
&lt;p&gt;而 GDI+的画线方法就没有这个功能，因为在 GDI+是无状态的，没有当前笔和刷的概 念。为了完成与这些 GDI 函数类似的功能，在 GDI+中，你得分两步来做：先用填充方法填 充区域内部，再用画线方法绘制边框。&lt;/p&gt;
&lt;p&gt;在 GDI+中画填充图，不需像 GDI 那样得先将刷子选入 DC，而是与 GDI+画线状图的 方法类似，将刷子作为画填充图方法的第一个输入参数。注意，GDI+中的画填充图的方法 都以 Fill 开头。&lt;/p&gt;
&lt;p&gt;（1） 画填充矩形[组]FillRectangle[s]&lt;/p&gt;
&lt;p&gt;GDI+中有 6 个重载的绘制填充矩形[组]的方法，前 3 个为整数版，后 3 个为对应的浮点 数版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status FillRectangle(const Brush* brush, const Rect&amp;amp; rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillRectangle(const Brush* brush, INT x, INT y, INT width, INT height); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillRectangles(const Brush* brush, const Rect* rects, INT count);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillRectangle(const Brush* brush, const RectF&amp;amp; rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillRectangle(const Brush* brush, REAL x, REAL y, REAL width, REAL height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillRectangles(const Brush* brush, const RectF* rects, INT count);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;用指定刷子 Brush，填充 rect 的内部区域，无边线，填充区域包括矩形的左边界和上边 界，但不包括矩形的右边界和下边界。功能与 GDI 的 FillRect 函数类似：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void FillRect( LPCRECT lpRect, CBrush* pBrush );&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是，GDI 中没有同时填充一个矩形数组的函数。不过 GDI 却有 GDI+中所没有的画填充圆 角矩形的函数 FillSolidRect。&lt;/p&gt;
&lt;p&gt;（2） 画填充椭圆 FillEllipse&lt;/p&gt;
&lt;p&gt;GDI+中有 4 个重载的绘制填充椭圆的方法，前 2 个为整数版，后 2 个为浮点数版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status FillEllipse(const Brush* brush, const Rect&amp;amp; rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillEllipse(const Brush* brush, INT x, INT y, INT width, INT height); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillEllipse(const Brush* brush, const RectF&amp;amp; rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillEllipse(const Brush* brush, REAL x, REAL y, REAL width, REAL height);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;GDI 中没有类似函数，但可以用（采用当前刷填充的）Ellipse 函数来代替。&lt;/p&gt;
&lt;p&gt;（3） 画饼图 DrawPie&lt;/p&gt;
&lt;p&gt;GDI+中有 4 个重载的绘制饼图的方法，前 2 个为整数版，后 2 个为浮点数版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawPie(const Pen* pen, const Rect&amp;amp; rect, REAL startAngle, REAL sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawPie(const Pen* pen, INT x, INT y, INT width, INT height, REAL startAngle, REAL sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawPie(const Pen* pen, const RectF&amp;amp; rect, REAL startAngle, REAL sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawPie(const Pen* pen, REAL x, REAL y, REAL width, REAL height, REAL startAngle, REAL sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;与 GDI 的下列函数类似，但是部分输入参数的含义有所不同：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BOOL Pie( int x1, int y1, int x2, int y2, int x3, int y3, int x4, int y4 );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BOOL Pie( LPCRECT lpRect, POINT ptStart, POINT ptEnd );&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如（参见图 14-14）：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_023.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void DrawPies(Graphics &amp;amp;graph, const Color cols[], Point &amp;amp;O, int r, const float data[], int n) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Rect rect(O.X - r, O.Y - r, 2 * r, 2 * r);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    float startAngle = 0, sweepAngle; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (int i = 0; i &amp;amp;lt; n; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sweepAngle = data[i] * 360.0f; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        graph.FillPie(&amp;amp;SolidBrush(cols[i]), rect, startAngle, sweepAngle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        startAngle += sweepAngle;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;void CGdipDrawView::OnDraw(CDC* pDC) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ……&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Color cols[] = &amp;#123;Color::Red, Color::Green, Color::Blue, Color::Aqua&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    float data[] = &amp;#123;0.2f, 0.4f, 0.1f, 0.3f&amp;#125;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DrawPies(graph, cols, Point(200, 200), 100, data, 4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ……&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（4） 画填充多边形 FillPolygon&lt;/p&gt;
&lt;p&gt;GDI+中有 4 个重载的绘制填充多边形的方法，前 2 个为整数版，后 2 个为浮点数版：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status FillPolygonconst Brush* brush, const Point* points, INT count); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillPolygon(const Brush* brush, const Point* points, INT count, FillMode fillMode);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillPolygon(const Brush* brush, const PointF* points, INT count);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillPolygon(const Brush* brush, const PointF* points, INT count, FillMode fillMode);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中，填充模式参数 FillMode，可取如下两个值之一（参见 8.5.3 中的 1．）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FillModeAlternate, // 交替模式——按奇偶规则填充（默认模式）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FillModeWinding // 环绕模式——按非零环绕规则填充&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; FillMode;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对简单图形，这两种模式的效果是一样的，但对复杂图形，特别是有穿插的图，结果可 能是不同的。例如（画五角星，参见图 14-15）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// 定义五角星顶点数组&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const int n = 5; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point p1(100, 0); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point p2(195, 69); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point p3(159, 181);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point p4(41, 181); Point p5(5, 69); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point ps0[n] = &amp;#123;p1, p2, p3, p4, p5&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point ps[n] = &amp;#123;p1, p3, p5, p2, p4&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 创建实心刷对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush redBrush(Color(128, 0, 0));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush greenBrush(Color(0, 128, 0));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush blueBrush(Color(0, 0, 128));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 画五角星&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawPolygon(&amp;amp;Pen(Color::Red), ps0, n); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawPolygon(&amp;amp;Pen(Color::Green), ps, n);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 画填充五角星&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.TranslateTransform(200, 0); // 右移 200 像素&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillPolygon(&amp;amp;redBrush, ps0, n); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.TranslateTransform(200, 0); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillPolygon(&amp;amp;greenBrush, ps, n, FillModeAlternate); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.TranslateTransform(200, 0); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillPolygon(&amp;amp;blueBrush, ps, n, FillModeWinding);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_024.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;多边形 交替/环绕模式 交替模式 环绕模式 &lt;/p&gt;
&lt;p&gt;图 14-15 填充多边形（五角星）&lt;/p&gt;
&lt;p&gt;GDI 中也没有与画填充多边形类似的专门函数，但可以用（采用当前刷填充的）Polygon 来代替。&lt;/p&gt;
&lt;h3 id=&quot;1-6-5-画曲线的方法&quot;&gt;&lt;a href=&quot;#1-6-5-画曲线的方法&quot; class=&quot;headerlink&quot; title=&quot;1.6.5 画曲线的方法&quot;&gt;&lt;/a&gt;1.6.5 画曲线的方法&lt;/h3&gt;&lt;p&gt;前面讲的各种画线状图或填充图的 GDI+方法，虽然在形式上与 GDI 的有所不同（方法 名前加了 Draw 或 Fill、将笔或刷作为第一个输入参数、部分输的位置入参数改成了大小参 数、并增加了浮点数版），但是在功能上却是相同的。&lt;/p&gt;
&lt;p&gt;现在要讲的曲线绘制，则是 GDI+新增加的内容。曲线在机械设计、工程建筑和图形动 画等领域，都有十分广泛应用。&lt;/p&gt;
&lt;p&gt;常用的曲线有 Bezier（贝塞尔）曲线和样条（spline）曲线。贝塞尔曲线比较简单，适 合于画控制点少的曲线。当控制点太多时，要不曲线的次数（比点数少 1）太高，要不拼接 比较困难，而且没有局部性（即修改一点影响全局），性能不太好。而样条曲线则可以画任 意多个控制点的曲线，曲线的次数也可以指定（一般为二次或三次），并且具有局部性。贝 塞尔曲线特别是样条曲线有很多变种。常见的贝塞尔曲线有普通贝塞尔曲线和有理贝塞尔曲 线。常用的样条曲线有：B 样条、β 样条、Hermite（厄密）样条、基样条（cardinal splines）、 Kochanek- Bartels 样条和 Catmull-Rom 样条等。&lt;/p&gt;
&lt;p&gt;GDI+中所实现的是普通贝塞尔曲线（不过控制点，位于控制多边形的凸包之内）和基 样条曲线（过控制点）。有关曲线和曲面构造方法，会在课程《计算机图形学》中介绍。&lt;/p&gt;
&lt;p&gt;（1）基样条曲线（cardinal spline curve）&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawCurve(const Pen* pen, const Point* points, INT count, REAL tension = 0.5f); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawCurve(const Pen* pen, const PointF* points, INT count, REAL tension = 0.5f); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawClosedCurve(const Pen *pen, const Point* points, INT count, REAL tension = 0.5f);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawClosedCurve(const Pen *pen, const PointF* points, INT count, REAL tension = 0.5f);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;参数 tension（张力）指定曲线的弯曲程度，tension = 0.0（直线）~1.0（最弯曲）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;DrawClosedCurve 方法（连接首尾点）画封闭的基样条曲线。 例如（参见图 14-16）：&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void DrawPoints(Graphics &amp;amp;graph, const Color &amp;amp;col, int r, const Point* points, INT count) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 自定义的画点列函数 SolidBrush brush(col);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (int i = 0; i &amp;lt; count; i++) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        graph.FillEllipse(&amp;amp;brush, Rect(points[i].X - r,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            points[i].Y - r, 2 * r, 2 * r));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 定义 Pen 对象和 Point 对象的数组&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen greenPen(Color::Green, 3);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point p1(10, 100), p2(100, 50), p3(300, 10), p4(400, 100);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point ps[4] = &amp;#123;p1, p2, p3, p4&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 绘制不同张力的基样条曲线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawCurve(&amp;amp;Pen(Color::Magenta), ps, 4, 1.0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawCurve(&amp;amp;greenPen, ps, 4, 0.5);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawCurve(&amp;amp;Pen(Color::Blue), ps, 4, 0.0); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DrawPoints(graph, Color::Red, 5, ps, 4); // 绘制曲线的控制点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 绘制默认张力的基样条、封闭基样条与贝塞尔曲线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.TranslateTransform(450, 0); // 水平右移 450 个像素&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawCurve(&amp;amp;greenPen, ps, 4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawClosedCurve(&amp;amp;Pen(Color::Aqua), ps, 4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawBeziers(&amp;amp;Pen(Color::Chocolate), ps, 4); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DrawPoints(graph, Color::Red, 5, ps, 4); // 绘制曲线的控制点&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_025.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;不同张力的基样条曲线 基样条、封闭基样条与贝塞尔曲线 &lt;/p&gt;
&lt;p&gt;图 14-16 基样条曲线与贝塞尔曲线&lt;/p&gt;
&lt;p&gt;（2）贝塞尔曲线（Bezier curve）&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawBezier(const Pen* pen, INT x1, INT y1, INT x2, INT y2, INT x3, INT y3, INT x4, INT y4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawBezier(const Pen* pen, const Point&amp;amp; pt1, const Point&amp;amp; pt2, const Point&amp;amp; pt3, const Point&amp;amp; pt4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawBeziers(const Pen* pen, const Point* points, INT count);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;... // 对应的浮点版本&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（3）填充封闭基样条曲线&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status FillClosedCurve(const Brush* brush, const Point* points, INT count);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status FillClosedCurve(const Brush* brush, const Point* points, INT count, FillMode fillMode, REAL tension = 0.5f);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;... // 对应的浮点版本&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如，将前面画图 14-15 所对应的填充多边形例子中的画填充五角星的三个语句中的 FillPolygon 方法，改为填充封闭基样条曲线方法 FillClosedCurve，结果如图 14-17 所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_026.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;多边形 交替/环绕模式 交替模式 环绕模式 &lt;/p&gt;
&lt;p&gt;图 14-17 填充闭曲线&lt;/p&gt;
&lt;h3 id=&quot;1-6-6-平滑处理&quot;&gt;&lt;a href=&quot;#1-6-6-平滑处理&quot; class=&quot;headerlink&quot; title=&quot;1.6.6 平滑处理&quot;&gt;&lt;/a&gt;1.6.6 平滑处理&lt;/h3&gt;&lt;p&gt;可以利用 Graphics 类的设置平滑模式方法&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetSmoothingMode(SmoothingMode smoothingMode);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来设置绘图时的平滑化处理。其中的输入参数为枚举类型：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeInvalid = QualityModeInvalid, //无效（保留）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeDefault = QualityModeDefault, // 默认（低质，无平滑处理） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeHighSpeed = QualityModeLow, // 高速（低质，无平滑处理） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeHighQuality = QualityModeHigh, // 高质（使用 8*4 盒过滤器） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeNone, // 无平滑处理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeAntiAlias8x4, // 使用 8*4 盒过滤器（库中无） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeAntiAlias = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeAntiAlias8x4, // 使用 8*4 盒过滤器 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SmoothingModeAntiAlias8x8 // 使用 8*8 盒过滤器（最高质，库中也无）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; SmoothingMode;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_027.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-18 平滑处理&lt;/p&gt;
&lt;p&gt;例如（参见图 14-18）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::Black, 4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Rect rect(10, 10, 200, 200);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawRectangle(&amp;amp;pen, rect); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.RotateTransform(1); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.TranslateTransform(20, 20);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//graph.SetSmoothingMode(SmoothingModeNone);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawRectangle(&amp;amp;pen, rect); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.TranslateTransform(20, 20); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.SetSmoothingMode(SmoothingModeAntiAlias); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawRectangle(&amp;amp;pen, rect);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-6-7-清屏方法-Clear&quot;&gt;&lt;a href=&quot;#1-6-7-清屏方法-Clear&quot; class=&quot;headerlink&quot; title=&quot;1.6.7 清屏方法 Clear&quot;&gt;&lt;/a&gt;1.6.7 清屏方法 Clear&lt;/h3&gt;&lt;p&gt;GDI 中没有用于清屏的专门函数，得自己用背景色画窗口大小的填充矩形，或者调用窗 口类的 Invalidate 和 UpdateWindow 函数。现在，GDI+有了清屏方法 Clear：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status Clear(const Color &amp;amp;color);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中的输入参数 color，为用户指定的填充背景色。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(GetDC()-&amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;…… &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.Clear(Color::White);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;1-7-笔和刷&quot;&gt;&lt;a href=&quot;#1-7-笔和刷&quot; class=&quot;headerlink&quot; title=&quot;1.7 笔和刷&quot;&gt;&lt;/a&gt;1.7 笔和刷&lt;/h2&gt;&lt;p&gt;本节介绍 GDI+的两类绘图工具——笔和刷，它们与 GDI 的相比新增加了许多功能。&lt;/p&gt;
&lt;h3 id=&quot;1-7-1-笔&quot;&gt;&lt;a href=&quot;#1-7-1-笔&quot; class=&quot;headerlink&quot; title=&quot;1.7.1 笔&quot;&gt;&lt;/a&gt;1.7.1 笔&lt;/h3&gt;&lt;p&gt;与 GDI 中的一样，GDI+中的笔（pen）也是画线状图的工具，但是功能更加强大。例 如：透明笔、图案笔、自定义虚线风格、线帽、笔的缩放和旋转、笔的连接点属性等。&lt;/p&gt;
&lt;p&gt;GDI+中的笔对应于 Pen 类，被定义在 GdiplusPen.h 头文件中。 笔的构造方法主要有两个：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Pen(const Color &amp;amp;color, REAL width = 1.0); // 单色笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen(const Brush *brush, REAL width = 1.0); // 纹理图案笔&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中，最常用的是第一个，它构造一个颜色为 color，宽度为 width（默认为 1）的单色笔。 如果颜色的α 值&amp;lt;255，则所创建的笔就是带透明度的笔。&lt;/p&gt;
&lt;p&gt;（1）笔对齐&lt;/p&gt;
&lt;p&gt;当笔宽大于 1 时，默认情况下，是以笔的中心与绘图坐标对齐。但是，也可以采用 Pen类的方法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetAlignment(PenAlignment penAlignment);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;设置为内对齐，其输入参数取枚举类型 PenAlignment 的符号常量：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PenAlignmentCenter = 0, // 中心对齐（默认值）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PenAlignmentInset = 1 // 内对齐&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; PenAlignment;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如（输出结果如图 14-19 所示）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Rect rect(20, 20, 300, 200);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::Green, 30), redPen(Color::Red); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawEllipse(&amp;amp;pen, rect); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawRectangle(&amp;amp;redPen, rect); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pen.SetAlignment(PenAlignmentInset); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.TranslateTransform(340, 0); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawEllipse(&amp;amp;pen, rect); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawRectangle(&amp;amp;redPen, rect);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_028.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;a) 中心对齐（默认值） b) 内对齐&lt;/p&gt;
&lt;p&gt;图 14-19 笔对齐&lt;/p&gt;
&lt;p&gt;（2）图案笔&lt;/p&gt;
&lt;p&gt;笔类 Pen 的第二个构造方法，是从刷子来创建笔，如果是单色的实心刷，则相当于第一 个笔构造方法。如果刷子为条纹（影线）或纹理（图像）等图案刷，则该构造函数所创见的 就是对应的图案笔。&lt;/p&gt;
&lt;p&gt;例如（条纹笔画椭圆，参见图 14-20）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HatchBrush hBrush(HatchStyleCross, Color::Green, Color::Red); // 创建十字线条纹刷 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen hPen(&amp;amp;**hBrush**, 40); // 创建宽度为 40 像素的条纹笔 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawEllipse(&amp;amp;hPen, 20, 20, 400, 250); // 画椭圆&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_029.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-20 条纹笔椭圆&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_030.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-21 纹理笔椭圆 &lt;/p&gt;
&lt;p&gt;又例如（纹理笔画椭圆，参见图 14-21）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Image img(L&amp;quot;张东健.bmp&amp;quot;); // 创建图像对象，并装入图像文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TextureBrush tBrush(&amp;amp;img); // 创建纹理刷&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen tPen(&amp;amp;**tBrush**, 80); // 创建宽度为 80 像素的纹理笔 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(GetDC()-&amp;amp;gt;m_hDC); // 创建图形对象 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawEllipse(&amp;amp;tPen, 40, 40, 640, 400); // 画椭圆&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（3）线型&lt;/p&gt;
&lt;p&gt;与 GDI 一样，对 GDI+中的笔，也可以设置线型。所用的方法为：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetDashStyle(DashStyle dashStyle);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中的输入参数，为虚线风格枚举 DashStyle：（GdiplusEnums.h） &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;enum DashStyle &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashStyleSolid, // 0 实线 （默认值）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashStyleDash, // 1 虚线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashStyleDot, // 2 点线：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashStyleDashDot, // 3 虚点线：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashStyleDashDotDot, // 4 虚点点线 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashStyleCustom // 5 自定义虚线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-7-1-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;可以用 Pen 类的另一个方法来获取笔的线型：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;DashStyle GetDashStyle() const;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;GDI+中的线型，大多数与 GDI 中的相同，区别主要有两点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;GDI 中的非实线线型，对宽度&amp;gt;1 的笔无效；而 GDI+的笔对任意非零宽度的笔都是有效的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;GDI+中新增了一种风格——自定义虚线风格。 具体的自定义虚线风格，由 Pen 类的设置虚线图案的方法&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetDashPattern(const REAL *dashArray, INT count);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来设置，其中的实数数组 dashArray 含若干个正实数（单位为像素），按线、空、线、空、„„ 的交叉方式排列；参数 count 为数组中实数的个数（须&amp;gt;0）。&lt;/p&gt;
&lt;p&gt;例如（参见图 14-22）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::Black, 8); // 创建宽 8 个像素的黑色笔（画虚线用）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 线 5、空 2、线 15、空 4（像素）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;REAL dashVals[4] = &amp;#123;5.0f, 2.0f, 15.0f, 4.0f&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FontFamily fontFamily(L&amp;quot;Times New Roman&amp;quot;); // 创建字体族对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 创建 5 号字大小的 Times New Roman 字体&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font(&amp;amp;fontFamily, 10.5);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 创建绿色的实心刷（写字符串用）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush brush(Color(0, 128, 0));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 笔的虚线风格枚举常量的名称字符串数组&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString strs[] = &amp;#123;L&amp;quot;DashStyleSolid&amp;quot;, L&amp;quot;DashStyleDash&amp;quot;, L&amp;quot;DashStyleDot&amp;quot;, L&amp;quot;DashStyleDashDot&amp;quot;, L&amp;quot;DashStyleDashDotDot&amp;quot;, L&amp;quot;DashStyleCustom&amp;quot;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt;= 5; i++) &amp;#123; // 绘制各种风格的虚线及其名称串&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pen.**SetDashStyle**((DashStyle)i); // 设置笔的虚线风格&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 设置自定义虚线图案&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (i == 5) pen.SetDashPattern(dashVals, 4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 画虚线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawLine(&amp;amp;pen, 10, 10 + i * 20, 400, 10 + i * 20);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 绘制虚线风格枚举常量名称字符串&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(strs[i], -1, &amp;amp;font,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PointF(410, 2 + i * 20), &amp;amp;brush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_037.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-22 虚线风格&lt;/p&gt;
&lt;p&gt;还可以用 Pen 类的另一个方法来获取笔的自定义虚线图案数据：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;INT GetDashPatternCount(VOID); // 获取虚线数组中实数的个数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status GetDashPattern(REAL *dashArray, INT count); // 获取虚线数组&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（4）线帽&lt;/p&gt;
&lt;p&gt;线帽（line cap）是指线条两端的外观，默认为正方形，也可以用 Pen 类的下列方法来 设置不同的线端形状：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetStartCap(LineCap startCap); // 设置起点的线帽&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status SetEndCap(LineCap endCap); // 设置终点的线帽&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 设置起点、终点和虚线的线帽&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status SetLineCap(LineCap startCap, LineCap endCap, DashCap dashCap);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中的线帽枚举 LineCap 为（GdiplusEnums.h）： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineCapFlat = 0, // 平线，直线起点位于平线的中点（默认值）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineCapSquare = 1, // 方形，高度=线宽，直线起点位于正方形中心 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineCapRound = 2, // 圆形，直径=线宽，直线起点位于圆心 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineCapTriangle = 3, // 三角，高度=线宽，直线起点位于其底边中点 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineCapNoAnchor = 0x10, // 无锚，同平线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineCapSquareAnchor = 0x11, // 方形锚，高度&amp;amp;gt;线宽，直线起点位于正方形中心 LineCapRoundAnchor = 0x12, // 圆形锚，直径&amp;amp;gt;线宽，直线起点位于圆心 LineCapDiamondAnchor = 0x13, // 菱形锚，高度&amp;amp;gt;线宽，直线起点位于菱形中心 LineCapArrowAnchor = 0x14, // 箭头锚，高度&amp;amp;gt;线宽，直线起点位于箭头的尖点 LineCapCustom = 0xff // 自定义线帽&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; LineCap;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;自定义线帽，需要用到 GDI+专门为此定义的类 CustomLineCap。其构造函数为：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CustomLineCap(const GraphicsPath *fillPath, const GraphicsPath *strokePath, LineCap baseCap, REAL baseInset);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中要用到图形路径类 GraphicsPath，该类中有图形各种添加图形方法，只是把 Graphics 类&lt;/p&gt;
&lt;p&gt;绘图方法名中的 Draw 改成 Add 即可。例如：AddLine、AddRectangle 和 AddPolygon 等。使 用时，可以先创建一个空路径，然后调用这些添加图形方法若干次，就可以生成路径了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_038.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;例如（各类线帽，参见图 14-23 和图 14-24）：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_039.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;箭头线帽 构造箭头线帽头尾所使用的坐标系 &lt;/p&gt;
&lt;p&gt;图 14-23 自定义线帽&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// 自定义箭头线帽&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GraphicsPath startPath, endPath; // 创建起点和终点路径对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;startPath.AddRectangle(Rect(-10, -5, 20, 10)); // 起点矩形&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point polygonPoints[4] = &amp;#123;Point(0, -20), Point(10, 0),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point(0, -10), Point(-10, 0)&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;endPath.AddPolygon(polygonPoints, 4); // 终点箭头 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CustomLineCap startCap(NULL, &amp;amp;startPath); // 创建起点线帽 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CustomLineCap endCap(NULL, &amp;amp;endPath); // 创建终点线帽&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 定义笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::Black, 20); // 画带线帽粗线的黑笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen redPen(Color::Red); // 画不带线帽细线的红笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 中英文线帽字符串数组&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString cstrs[] = &amp;#123;L&amp;quot;平线帽&amp;quot;, L&amp;quot;方线帽&amp;quot;, L&amp;quot;圆线帽&amp;quot;, L&amp;quot;三角线帽&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;L&amp;quot;无锚线帽&amp;quot;, L&amp;quot;方锚线帽&amp;quot;, L&amp;quot;圆锚线帽&amp;quot;, L&amp;quot;菱锚线帽&amp;quot;, L&amp;quot;箭锚线帽&amp;quot;, L&amp;quot;定制线帽&amp;quot;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString estrs[] = &amp;#123;L&amp;quot;LineCapFlat&amp;quot;, L&amp;quot;LineCapSquare&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    L&amp;quot;LineCapRound&amp;quot;, L&amp;quot;LineCapTriangle&amp;quot;, L&amp;quot;LineCapNoAnchor&amp;quot;, L&amp;quot;LineCapSquareAnchor&amp;quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    L&amp;quot;LineCapRoundAnchor&amp;quot;, L&amp;quot;LineCapDiamondAnchor&amp;quot;, L&amp;quot;LineCapArrowAnchor&amp;quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    L&amp;quot;LineCapCustom&amp;quot;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 创建字体&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FontFamily fontFamily(L&amp;quot;Times New Roman&amp;quot;); // 对应中文的&amp;quot;宋体&amp;quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font(&amp;amp;fontFamily, 10.5); // 五号字&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 绘制各种线帽&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt;= 9; i++) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 画线循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineCap lc = (LineCap)(i &amp;amp;lt; 4 ? i : i + 12); // 线帽常量（整数） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if(i &amp;amp;lt; 9) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pen.SetLineCap(lc, lc, DashCapFlat); // 标准线帽 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    else &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // 自定义线帽（i = 9）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pen.SetCustomStartCap(&amp;amp;startCap); // 设置自定义的起点线帽 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pen.SetCustomEndCap(&amp;amp;endCap); // 设置自定义的终点线帽 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pen.SetWidth(3.0f); // 重新设置线宽为 3 个像素&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int y = 20 + i * 40; // 计算直线的垂直坐标 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawLine(&amp;amp;pen, 100, y, 400, y); // 画带线帽的粗线 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawLine(&amp;amp;redPen, 100, y, 400, y); // 画不带线帽的细线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 绘制中英文线帽字符串&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(cstrs[i], -1, &amp;amp;font,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PointF(15.0f, y - 8.0f), &amp;amp;brush); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(estrs[i], -1, &amp;amp;font,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PointF(425.0f, y - 8.0f), &amp;amp;brush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_040.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-24 线帽的种类 图 14-25 箭头线帽的旋转直线簇 又例如（旋转箭头线帽，参见图 14-25）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// startCap 和 endCap 的创建同上例，需包含头文件 &amp;amp;lt;math.h&amp;amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::DarkGreen, 2); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pen.SetCustomStartCap(&amp;amp;startCap); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pen.SetCustomEndCap(&amp;amp;endCap);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;double radian = 3.14159265358979323846 / 180.0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt; 360; i += 10) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawLine(&amp;amp;pen, 220, 220, 220 + (INT) (200 *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cos(i * radian)), 220 + (INT) (200 * sin(i * radian)));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;方法 SetLineCap 的最后一个输入参数 DashCap dashCap，用于设置虚线内部各线段端点 的形状。其取值是枚举类型（GdiplusEnums.h）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashCapFlat = 0, // 平线（默认值） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashCapRound = 2, // 圆形 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DashCapTriangle = 3 // 三角&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; DashCap;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可见，只有三种选择：平、圆和三角。之所以枚举常量所对应的值不连续，是因为要同 LineCap 枚举的对应常量一致。&lt;/p&gt;
&lt;p&gt;注意，虚线帽的设置，只影响其虚线内部的线段，不会影响整条虚线的头尾形状，它们 是由 SetLineCap 方法的前两个参数来分别设置的。例如（参见图 14-26）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::Black, 10);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pen.SetLineCap(LineCapFlat, LineCapFlat, **DashCapFlat**);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//pen.SetLineCap(LineCapFlat, LineCapFlat, **DashCapRound**);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//pen.SetLineCap(LineCapFlat, LineCapFlat, **DashCapTriangle**); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;REAL dashVals[4] = &amp;#123;5.0f, 2.0f, 15.0f, 4.0f&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt;= 5; i++) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pen.SetDashStyle((DashStyle)i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (i == 5) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pen.SetDashPattern(dashVals, 4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawLine(&amp;amp;pen, 10, 10 + i * 20, 400, 10 + i * 20);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_041.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;DashCapRound 圆虚线帽&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_042.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;DashCapFlat 平虚线帽&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_043.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;DashCapTriangle 三角虚线帽 &lt;/p&gt;
&lt;p&gt;图 14-26 虚线帽&lt;/p&gt;
&lt;p&gt;（5）线连接&lt;/p&gt;
&lt;p&gt;笔的线连接（join）属性，也是 GDI+新增的功能。可以使用 Pen 类的方法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetLineJoin( LineJoin lineJoin);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来设置笔的线连接属性。其中输入参数为枚举类型 LineJoin： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;enum LineJoin &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineJoinMiter = 0, // 斜接（默认值）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineJoinBevel = 1, // 斜截&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineJoinRound = 2, // 圆角&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LineJoinMiterClipped = 3 // 斜剪&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如（参见图 14-27）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::DarkGreen, 40); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt; 4; i++) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pen.SetLineJoin((LineJoin)i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawRectangle(&amp;amp;pen, 40 + i * 150, 40, 100, 100);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_044.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;LineJoinMiter LineJoinBevel LineJoinRound LineJoinMiterClipped&lt;/p&gt;
&lt;p&gt;斜接 斜截 圆角 斜剪 &lt;/p&gt;
&lt;p&gt;图 14-27 线连接&lt;/p&gt;
&lt;p&gt;从该例还看不出斜剪与斜接有什么区别，因为斜剪 LineJoinMiterClipped 主要针对交角 很小，相交部分很长的情形。在斜剪线连接方式下，可以调用 Pen 类的方法&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetMiterLimit(REAL miterLimit);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来设置相交部分的最大限制长度，默认是 10.0（相对于线宽的比值）。&lt;/p&gt;
&lt;p&gt;对 LineJoinMiterClipped 方式的线连接，如果 miterLimit &amp;lt; 相交部分的长度，则会截断 至线头（同斜截方式，相当于 miterLimit = 1.0）；如果 miterLimit &amp;gt;= 相交部分的长度，则绘 制完整的相交部分。&lt;/p&gt;
&lt;p&gt;但是对 LineJoinMiter 方式的线连接，如果 miterLimit &amp;lt; 相交部分的长度，则会截断至&lt;/p&gt;
&lt;p&gt;miterLimit 所指定比例的长度；如果 miterLimit &amp;gt;= 相交部分的长度，则绘制完整的相交部分。 例如（参见图 14-28）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen redPen(Color::Red); // 画细线的红笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::DarkGreen, 40.0f); // 画粗线的绿色笔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point points[] = &amp;#123;Point(20, 100), Point(400, 130),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point(20, 160)&amp;#125;; // 点数组&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pen.SetLineJoin(LineJoinMiter); // 斜接&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//pen.SetLineJoin(LineJoinBevel); // 斜截&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//pen.SetLineJoin(LineJoinRound); // 圆角&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//pen.SetLineJoin(LineJoinMiterClipped); // 斜剪&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//pen.SetMiterLimit(20.0f); // 设置斜接限长 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawLines(&amp;amp;pen, points, 3); // 画粗线 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawLines(&amp;amp;redPen, points, 3); // 画细线&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_045.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-28 小交角线连接 图 14-29 不同斜接限长下的斜接线连接 如果不断修改斜接线连接 LineJoinMiter 方式下的线长限制（0.0f~13.0f），则可得到不同&lt;/p&gt;
&lt;p&gt;截断长度的斜交角。例如（参见图 14-29）： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pen.SetLineJoin(LineJoinMiter); // 斜接 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pen.SetMiterLimit(1.0f/*~13.0f*/); // 设置斜接限长&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-7-2-刷&quot;&gt;&lt;a href=&quot;#1-7-2-刷&quot; class=&quot;headerlink&quot; title=&quot;1.7.2 刷&quot;&gt;&lt;/a&gt;1.7.2 刷&lt;/h3&gt;&lt;p&gt;与 GDI 中的一样，GDI+中的刷（brush）也是画填充图的工具，GDI+中也有与 GDI 相 对应的实心刷（单色刷）、条纹刷（影线刷）和纹理刷（图像刷）。不过，GDI+又新增加了 功能强大的线性渐变刷和路径渐变刷，而且还为所有这些刷各自建立了对应的类，基类是Brush（功能少）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_046.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-30 是 GDI+中各种刷类的层次结构图， 所有刷类都被定义在头文件 Gdiplus Brush.h 中。&lt;/p&gt;
&lt;p&gt;（1）刷基类 Brush&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-7-2-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Brush 是所有 GDI+具体刷类的基类，Brush 类没有自己的公用构造函数，属于非实例化&lt;/p&gt;
&lt;p&gt;类（用户不能创建 Brush 类的对象和实例），只是定义了三个公用的方法（接口）： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Brush *Clone( VOID) const; // 克隆，用于复制 Brush 及其派生类对象 Status &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetLastStatus(VOID); // 获取最后状态，返回刷对象最近的错误状态&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BrushType GetType(VOID); // 获取类型，返回当前（派生）刷的类型枚举常量&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下面是 BrushType 枚举类型的定义（GdiplusEnums.h）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    BrushTypeSolidColor = 0, // 实心单色刷 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    BrushTypeHatchFill = 1, // 影线条纹填充刷 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    BrushTypeTextureFill = 2, // 图像纹理填充刷 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    BrushTypePathGradient = 3, // 路径渐变刷 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    BrushTypeLinearGradient = 4 // 线性渐变刷&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; BrushType;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（2）实心刷类 SolidBrush&lt;/p&gt;
&lt;p&gt;GDI+中，实心的单色刷对应于 SolidBrush 类，它只有一个构造函数：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush(const Color &amp;amp;color);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;输入参数为颜色对象的引用。&lt;/p&gt;
&lt;p&gt;在前面的例子中已经多次使用了 SolidBrush 类，下面再举一个画正叶曲线的例子，下面 是正叶曲线的极坐标方程及其到直角坐标系的转换公式：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-7-2-2.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;其中，l 为叶片长度、n 为叶片数目。&lt;/p&gt;
&lt;p&gt;因为 GDI+并没有画正叶曲线的专门函数，所以需要用多边形、样条曲线或图形路径来 刻画它。可以使用填充多边形、填充封闭曲线和填充图形路径等方式来进行绘制，下面的代码使用的是填充闭基样条曲线，输出结果如图 14-31 所示。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;绘制单个正叶曲线的函数代码：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;math.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;void DrawLeaves(Graphics &amp;amp;graph, const Color col, Point &amp;amp;O,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int l, int n) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    double radian = 3.14159265358979323846 / 180.0; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int m = n &amp;lt; 5 ? 21 : 11;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int N = m * n;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    double da = 360.0 / N; PointF *ps = new PointF[N];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (int i = 0; i &amp;amp;lt; N; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        double r = abs(l * cos(radian * (n * i * da)/ 2.0)), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            x = r * cos(i * da * radian),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            y = r * sin(i * da * radian);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ps[i].X = REAL(O.X + x);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ps[i].Y = REAL(O.Y + y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.FillClosedCurve(&amp;amp;SolidBrush(col), ps, N);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;绘制系列彩色正叶曲线的调用序列：&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Color cols[] = &amp;#123;Color::Aqua, Color::Aquamarine, Color::DarkBlue, Color::DarkKhaki, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Color::DeepPink, Color::BlueViolet, Color::Brown, Color::BurlyWood, Color::CadetBlue, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Color::Chartreuse, Color::Turquoise, Color::Coral, Color::CornflowerBlue, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Color::Crimson, Color::DarkCyan&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bool color = true; // false; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt; 15; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DrawLeaves(graph, color ? cols[i] : Color::Green,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Point(100 + 200* (i % 5), 100 + 200 * (i / 5)), 100, i + 1);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_048.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-31 彩色正叶曲线系列&lt;/p&gt;
&lt;p&gt;（3）条纹刷类 HatchBrush&lt;/p&gt;
&lt;p&gt;条纹是一种重复填充的小方形图案，一般为横线、竖线、斜线和小方块等构成。GDI+ 中，条纹刷（hatch brush 影线刷/阴影刷）对应于 HatchBrush 类，它也只有一个构造函数：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HatchBrush(HatchStyle hatchStyle, const Color &amp;amp;foreColor, const Color &amp;amp;backColor = Color());&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其中：第一个参数为条纹类型，第二个参数为前景色（条纹色），第三个参数为背景色（空隙色）。&lt;/p&gt;
&lt;p&gt;GDI+中一共有 53 种条纹风格，而 GDI 中只有前 6 种。条纹风格枚举 HatchStyle 也被定 义在头文件 GdiplusEnums.h 中：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;enum HatchStyle &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleHor izontal, // 0：横线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleVertical, // 1：竖线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleForwardDiagonal, // 2：正斜线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleBackwardDiagonal, // 3：反斜线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleCross, // 4：十字线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleDiagonalCross, // 5：斜十字线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyle05Percent, // 6：5%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyle10Percent, // 7：10%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleSphere, // 47：球面&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleSmallGrid, // 48：小网格&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleSmallChecker Board, // 49：小跳棋盘&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleLargeCheckerBoard, // 50：大跳棋盘&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleOutlinedDiamond, // 51：斜纲线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleSolidDiamond, // 52：实菱形 HatchStyleTotal, // = 53（0 ~ 52）：条纹风格总数 HatchStyleLargeGrid = HatchStyleCross, // 4：大网格&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchStyleMin = HatchStyleHorizontal, // 0：条纹风格最小值 HatchStyleMax = HatchStyleTotal - 1, // 52：条纹风格最大值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如（参见图 14-32）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); Pen pen(Color::Black);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush textBrush(Color::Red);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FontFamily fontFamily(L&amp;quot;Times New Roman&amp;quot;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font(&amp;amp;fontFamily, 18);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString str;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;StringFormat sfmt; // 文本格式 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sfmt.SetAlignment(StringAlignmentCenter); // 水平对齐 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sfmt.SetLineAlignment(StringAlignmentCenter); // 垂直对齐&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int w = 50, h = 50, s = 5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt; 53; i++) &amp;#123; // 主循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HatchBrush brush(HatchStyle(i), Color::Black, Color::White); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RectF rect(REAL(s + (i % 10) * (w + s)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    REAL(s + (i / 10) * (h + s)), REAL(w), REAL(h));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.FillRectangle(&amp;amp;brush, rect); // 画条纹块 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    str.Format(L&amp;quot;%d&amp;quot;, i); // 绘制数字编号的文本串： &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(str, str.GetLength(), &amp;amp;font, rect,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;amp;sfmt, &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_049.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-32 条纹刷的条纹风格&lt;/p&gt;
&lt;p&gt;与 GDI 一样，在 GDI+中也可以调整条纹刷和图像刷的起点。这需要使用图像类 Graphics 的方法 SetRenderingOrigin 来设置渲染原点为(x, y)（默认为(0, 0)）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetRenderingOrigin(INT x, INT y);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（4）纹理刷类 TextureBrush&lt;/p&gt;
&lt;p&gt;纹理刷（texture brush）就是图像刷，它将刷中所装入的图像，在目标区域中进行平铺， 可达到纹理效果。GDI 中也有图像刷，但仅限于使用位图资源和（非常费事才能使用）BMP 文件。在 GDI+中，纹理刷所对应的是 TextureBrush 类，它有 7 个构造函数，最常用的为：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;TextureBrush(Image* image, WrapMode wrapMode = WrapModeTile);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中，第一个参数是图像对象的指针，第二个参数是排列方式的枚举常量（GdiplusEnums.h）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    WrapModeTile = 0, // 平铺（瓦）（默认值）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    WrapModeTileFlipX = 1, // 平铺且 X 向翻转（相邻列左右翻转） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    WrapModeTileFlipY = 2, // 平铺且 Y 向翻转（相邻行上下翻转） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    WrapModeTileFlipXY = 3, // 平铺且 XY 向翻转（相邻行列左右上下翻转） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    WrapModeClamp = 4 // 不平铺（不重复，夹住）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; WrapMode;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;还可以用纹理刷类的下面两个方法来设置和获取刷的排列方式：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetWrapMode(WrapMode wrapMode); WrapMode GetWrapMode() const;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如（参见图 14-33）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Image img(L&amp;quot;张东健.bmp&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TextureBrush brush(&amp;amp;img, WrapModeTile/*FlipXY*/);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//TextureBrush brush(&amp;amp;img, **WrapModeClamp**); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RECT rect;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetClientRect(&amp;amp;rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;brush, RectF(0.0f, 0.0f, REAL(rect.right), REAL(rect.bottom)));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_050.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;平铺（WrapModeTile）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_051.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;平铺且 X 向翻转（WrapModeTileFlipX）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_052.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;平铺且 Y 向翻转（WrapModeTileFlipY）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_053.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;平铺且 XY 向翻转（WrapModeTileFlipXY）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_054.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;不平铺（WrapModeClamp） &lt;/p&gt;
&lt;p&gt;图 14-33 纹理刷排列方式&lt;/p&gt;
&lt;p&gt;纹理刷类 TextureBrush 中，还有几个方法，可以对刷中的图像进行平移（translate）、旋 转（rotate）和缩放（scale）等变换（transform）（这是 GDI 里所没有的功能）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status TranslateTransform(REAL dx, REAL dy, MatrixOrder order = MatrixOrderPrepend); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status RotateTransform(REAL angle, MatrixOrder order = MatrixOrderPrepend) ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status ScaleTransform(REAL sx, REAL sy, MatrixOrder order = MatrixOrderPrepend);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如（参见图 14-34）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); Image img(L&amp;quot;张东健.bmp&amp;quot;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TextureBrush brush(&amp;amp;img);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//brush.TranslateTransform(30, 30); // 平移(30, 30)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brush.RotateTransform(30); // 旋转 30 度&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//brush.ScaleTransform(3, 1); // 水平放大 3 倍&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//brush.ScaleTransform(1, 3); // 垂直放大 3 倍&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RECT rect; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetClientRect(&amp;amp;rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;brush, RectF(0.0f, 0.0f, REAL(rect.right), REAL(rect.bottom)));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_055.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;平移(30, 30)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_056.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;旋转 30 度&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_057.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;水平放大 3 倍&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_058.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;垂直放大 3 倍&lt;/p&gt;
&lt;p&gt;图 14-34 纹理刷变换&lt;/p&gt;
&lt;p&gt;（5）线性渐变刷类 LinearGradientBrush&lt;/p&gt;
&lt;p&gt;线性渐变刷（linear gradient brush 线性梯度刷）使用逐渐变化的颜色填充目标区域。是 GDI+新增的功能。线性渐变刷所对应的类为 LinearGradientBrush，它有 6 个构造函数，前 3 个是整数版，后 3 个是对应的浮点数版。下面是 3 个整数版的构造函数：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush(const Point&amp;amp; point1, const Point&amp;amp; point2, const Color&amp;amp; color1, const Color&amp;amp; color2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush(const Rect&amp;amp; rec t, const Color&amp;amp; color1, const Color&amp;amp; color2, LinearGradientMode mode);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush(const Rect&amp;amp; rect, const Color&amp;amp; color1, const Color&amp;amp; color2, REAL angle, BOOL is AngleScalable = FALSE);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在这三种构造函数中，第一个是点到点、第二个是矩形与渐变模式、第三个是是矩形与旋转角度。限于篇幅，这里只介绍其中点到点的整数版构造函数的具体使用方法。&lt;/p&gt;
&lt;p&gt;1）点到点渐变&lt;/p&gt;
&lt;p&gt;点到点的渐变是指刷子所填充的颜色，沿着点 point1 到点 point2 的直线，从颜色 color1 连续变化到 color2。若 p1 和 p2 点的 y 值相等，则为水平方向的渐变；若 p1 和 p2 点的 x 值 相等，则为垂直方向的渐变；p1 和 p2 点的 x 和 y 值都不相等，则为斜对角方向的渐变。&lt;/p&gt;
&lt;p&gt;例如（参见图 14-35）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point p1(10, 10), p2(110, 10), p3(10, 110), p4(230, 10), p5(330, 110);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Size size(100, 100);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Color col1(255, 0, 0), col2(0, 0, 255);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush hbrush(p1, p2, col1, col2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;hbrush, Rect(p1, size)); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush vbrush(p1, p3, col1, col2); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;vbrush, Rect(Point(120, 10), size)); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush dbrush(p4, p5, col1, col2); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;dbrush, Rect(Point(230, 10), size));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_059.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;水平渐变 垂直渐变 对角渐变 &lt;/p&gt;
&lt;p&gt;图 14-35 线性渐变刷&lt;/p&gt;
&lt;p&gt;其实，线性渐变刷默认是按 WrapModeTile 平铺方式重复排列的（原点是 point1），例如（参见图 14-36 a））：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Point p1(10, 10), p2(110, 10), p3(10, 110);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Color col1(255, 0, 0), col2(0, 0, 255); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush hbrush(p1, p2, col1, col2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//hbrush.SetWrapMode(WrapModeTileFlipX); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;hbrush, Rect(p1, Size(400, 200))); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush vbrush(p1, p3, col1, col2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//vbrush.SetWrapMode(WrapModeTileFlipX); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;vbrush, Rect(Point(420, 10), Size(200, 410)));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush dbrush(p1, Point(110, 100), col1, col2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//dbrush.SetWrapMode(WrapModeTileFlipX); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;dbrush, Rect(Point(10, 220), Size(400, 200)));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你也可以将上面代码中的注释符“//”去掉，利用线性渐变刷类的方法&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetWrapMode(WrapMode wrapMode);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来设置画刷的排列方式为 WrapModeTileFlipX 平铺并水平翻转，参见图 14-36 b)。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_060.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-37 参数的含义&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_061.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;a) 平铺重复排列 b) 加水平翻转 &lt;/p&gt;
&lt;p&gt;图 14-36 按平铺重复排列的线性渐变刷&lt;/p&gt;
&lt;p&gt;下面是一个利用水平线性渐变刷来画阴阳八卦中的阴阳鱼例子（参见图 14-37 和图 14-38）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush R2BBrush(Point(0, 10), Point(200, 10), Color(255, 0, 0), Color(0, 0, 255));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush B2YBrush(Point(0, 10), Point(200, 10),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Color(0, 0, 255), Color(255, 255, 0));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen bluePen(Color(255, 0, 0, 255));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Rect circleRect(0, 0, 200, 200);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Rect leftRect(0, 50, 100, 100);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Rect rightRect(100, 50, 100, 100); Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillPie(&amp;amp;R2BBrush, circleRect, 0.0f, 180.0f);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillPie(&amp;amp;B2YBrush, circleRect, 180.0f, 180.0f); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillPie(&amp;amp;R2BBrush, leftRect, 180.0f, 180.0f); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillPie(&amp;amp;B2YBrush, rightRect, 0.0f, 180.0f); int r = 10;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillEllipse(&amp;amp;SolidBrush(Color(0, 255, 0)), 50 - r, 100 - r, 2 * r, 2 * r);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillEllipse(&amp;amp;SolidBrush(Color(255, 0, 255)), 150 - r, 100 - r, 2 * r, 2 * r);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_062.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_063.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_064.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_065.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-38 绘制阴阳鱼的分步输出结果&lt;/p&gt;
&lt;p&gt;2）多色渐变 线性渐变刷还有很多其他功能，例如可利用刷的方法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetInterpolationColors(const Color *presetColors, const REAL *blendPositions, INT count);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来设置多色渐变。其中，presetColors 为多色数组、blendPositions 为以百分比表示的对应混色点的位置（首、尾值必须为 0.0f 和 1.0f，中间的值应该按递增序排列）、count 为颜色和混 色点位的数目。例如（参见图 14-39）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Color cols[] = &amp;#123;Color::Red, Color::Orange, Color::Yellow, Color::Green, Color::Cyan, Color::Blue, Color::Purple, Color::Magenta&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;REAL bps[] = &amp;#123;0.0f, 0.15f, 0.3f, 0.45f, 0.6f, 0.75f, 0.875f, 1.0f&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush brush(Point(10, 10), Point(810, 10), Color::Black, Color::White);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brush.SetInterpolationColors(cols, bps, 8);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillRectangle(&amp;amp;brush, Rect(10, 10, 800, 100));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_066.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-39 多色渐变 另外，也可以像纹理刷和条纹刷一样，设置线性渐变刷的渲染原点等。 路径渐变刷的内容，安排到下一章的第 15.1.2 小节中，在介绍过路径的基本概念和使用方法之后再来讲解。&lt;/p&gt;
&lt;h2 id=&quot;1-8-文字&quot;&gt;&lt;a href=&quot;#1-8-文字&quot; class=&quot;headerlink&quot; title=&quot;1.8 文字&quot;&gt;&lt;/a&gt;1.8 文字&lt;/h2&gt;&lt;p&gt;GDI+的文本排版和字体处理的功能比 GDI 的更加强大。特别是 Windows XP 及以上版本，提供了对 LCD（液晶）显示器的特殊优化功能，GDI+也提供了对应的 ClearType（清晰活字）文字处理技术，以增强字体的清晰度。另外，GDI+还提供了构造专用字体集的功能，可以包含私有的临时字体（不需预先安装到系统中）。&lt;/p&gt;
&lt;p&gt;Windows 中使用的字体，一般是 TrueType（真实活字） 字体（TTF=TrueType Font），它是 1991 年 Apple 和 Microsoft 联合开发的一种字体技术，采用二次贝塞尔曲线来描述字符 的轮廓。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/1-8-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在 GDI+中，与文字相关的类有（参见图 14-40）：字体族类 FontFamily、字体类 Font 和字体集类 FontCollection 及其两个派生类 InstalledFontCollection （已安装字体集）和 PrivateFontCollection（专用字体集）。而在 GDI 中，则只有 CFont 一个字体类。&lt;/p&gt;
&lt;p&gt;图 14-40 字体类的层次结构&lt;/p&gt;
&lt;h3 id=&quot;1-8-1-字体&quot;&gt;&lt;a href=&quot;#1-8-1-字体&quot; class=&quot;headerlink&quot; title=&quot;1.8.1 字体&quot;&gt;&lt;/a&gt;1.8.1 字体&lt;/h3&gt;&lt;p&gt;下面介绍字体族类 FontFamily 和字体类 Font 及相关参数。&lt;/p&gt;
&lt;p&gt;（1）字体族类 FontFamily&lt;/p&gt;
&lt;p&gt;字体族（font family）是一组具有同一字样（typeface），但是风格（style）不同的字体（font）。其中，字样是指字体的种类，如 Arial、Times New Roman、宋体、楷体_GB2312。 风格是指：正常（regular）、粗体（bold）、斜体（italic）、粗斜体（bold and italic）、下划线（underline）、删除线（strikeout）等。&lt;/p&gt;
&lt;p&gt;1）构造函数&lt;/p&gt;
&lt;p&gt;字体族类 FontFamily 有两个构造函数：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;FontFamily( VOID); // 构造一个空字体族（少用）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 构造具有指定名称 name，位于指定字体集 fontCollection 中的字体族&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FontFamily(const WCHAR *name, const FontCollection *fontCollection = NULL);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;只要不是使用专用字体集中的字体，一般不需要设置第二个输入参数，取默认的 NULL 即可。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;FontFamily fontFamily(L&amp;quot;宋体&amp;quot;); 或&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FontFamily fontFamily(L&amp;quot;Times New Roman&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2）显示当前系统已装入的字体（族）名称&lt;/p&gt;
&lt;p&gt;可先利用（字体集 FontCollection 的派生类）已安装字体集类 InstalledFontCollection 的 方法 GetFamilyCount 和 GetFamilies 来分别获取当前系统中已经安装字体集中字体族的数目 和对象指针：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;INT GetFamilyCount( VOID) const;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status GetFamilies(INT numSought, FontFamily *gpfamilies, INT *numFound) const;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后再利用字体族类的方法 GetFamilyName 来获取每个字体族的名称：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status GetFamilyName(WCHAR name[LF_FACESIZE], WCHAR language = LANG_NEUTRAL) const;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中 LANG_NEUTRAL 表示采用中立语言，即用户的默认语言。&lt;/p&gt;
&lt;p&gt;例如（可创建一个带滚动视图类的单文档 MFC 应用程序 Fonts，添加对 GDI+的支持， 输出结果如图 14-41 所示）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void CFontsView::OnDraw(CDC* pDC) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ……&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    InstalledFontCollection ifc; int n = ifc.GetFamilyCount();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FontFamily *ffs = new FontFamily[n];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int found;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ifc.GetFamilies(n, ffs, &amp;amp;found); wchar_t name[LF_FACESIZE];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Font font(L&amp;quot;宋体&amp;quot;, 18);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SolidBrush textBrush(Color::Black); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Graphics graph(pDC-&amp;amp;gt;m_hDC); wchar_t str[40];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    swprintf_s(str, 40, L&amp;quot;当前系统中，总共装有如下%d 种字体：&amp;quot;, n);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(str, INT(wcslen(str)), &amp;amp;font, PointF(10.0f, 10.0f), &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (int i = 0; i &amp;amp;lt; n; i++) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ffs[i].**GetFamilyName**(name); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        graph.DrawString(name, INT(wcslen(name)), &amp;amp;font,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            PointF(10.0f, 80.0f + 40 * i), &amp;amp;textBrush); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        graph.DrawString(L&amp;quot;Font Family 字体族&amp;quot;, 15,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;amp;Font(name, 18),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            PointF(300.0f, 80.0f + 40 * i), &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_068.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-41 获取并显示当前系统的字体&lt;/p&gt;
&lt;p&gt;注：如果想用程序将这些名称写入一个文本文件，需要注意 ofstream 不支持宽字符串的 流输出，可以用实例模板类 of&lt;strong&gt;w&lt;/strong&gt;stream 来定义一个新的文件输出流类型。还可以采用 CFile 来输出，但要注意宽字符串采用的是 UTF-16 编码，需要在文本文件的开始处，添加用 0xFE 和 0xFF 这两个字节表示的 UTF-16 编码标志。&lt;/p&gt;
&lt;p&gt;（2）字体类 Font&lt;/p&gt;
&lt;p&gt;字体类 Font 的构造函数有 6 个，常用的是如下两个：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Font(const FontFamily *family, REAL emSize, INT style = FontStyleRegular, Unit unit = UnitPoint);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font(const WCHAR *familyName, REAL emSize, INT style = FontStyleRegular, Unit unit = UnitPoint, const FontCollection *fontCollection = NULL);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中的第一个构造函数，其第一个输入参数是字体族的指针，所以必须先创建字体族对象。&lt;/p&gt;
&lt;p&gt;而第 2 个构造函数的第一个输入参数则是字体族（字样）的名称，不需要创建字体族对象， 并且还多了可以选择的字体集作为最后一个输入参数。其余的构造函数都与 API 中的字体 句柄、逻辑结构和 DC 中的当前字体有关，在 GDI 中已经讨论过。&lt;/p&gt;
&lt;p&gt;注意：在使用 VC08 SP1 和 VC10 时，需要注释掉（默认）位于 c:\program files\microsoft visual studio 9.0\vc\include\目录中的 VC 头文件 comdef.h 中的第 309~315 行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// hard-coded smart pointer defs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/*#if defined( IFontDisp_INTERFACE_DEFINED )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if_not_exists(Font)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct Font : IFontDisp &amp;#123;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_COM_SMARTPTR_TYPEDEF(Font, uuidof(IDispatch));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif*/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;不然，编译时会出现两个 Font 类定义冲突问题的错误。也可以不改 comdef.h，而在代码中 的每个 Font 类名的前面，都加上命名空间限定符“Gdiplus::”，如 Gdiplus::Font，不过这样 又太麻烦。&lt;/p&gt;
&lt;p&gt;下面我们重点讨论第二个构造函数的使用，先介绍其中的各个参数。&lt;/p&gt;
&lt;p&gt;1）字体种类 familyName（字体族名）—— 宽字符串表示的字体名称&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;常用的英文字体族名有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Times New Roman：Font Family Name 字体族名(有衬线)&lt;/li&gt;
&lt;li&gt;Arial： Font Family Name 字体族名(无衬线)&lt;/li&gt;
&lt;li&gt;Arial Narrow： Font Family Name 字体族名(窄体)&lt;/li&gt;
&lt;li&gt;Courier New： Font Family Name 字体族名(等宽)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;常用的中文字体族名有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;宋体： Font Family Name 字体族名(正文)&lt;/li&gt;
&lt;li&gt;楷体_GB2312： Font Family Name 字体族名(正文、标题)&lt;/li&gt;
&lt;li&gt;黑体： Font Family Name 字体族名(标题、美术)&lt;/li&gt;
&lt;li&gt;仿宋_GB2312： Font Family Name 字体族名(标题、美术)&lt;/li&gt;
&lt;li&gt;隶书： Font Family Name 字体族名(标题、美术)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2）字体风格 style—— 字体的风格，可以取如下枚举常量（默认为 FontStyleRegular）： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FontStyleRegular = 0, // 正常（默认值）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FontStyleBold = 1, // 粗体 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FontStyleItalic = 2, // 斜体 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FontStyleBoldItalic = 3, // 粗斜体 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FontStyleUnderline = 4, // 下划线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FontStyleStrikeout = 8 // 删除线&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; FontStyle;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3）字体单位 unit 与大小 emSize——字体的大小与有单位关，可用单位有： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    UnitWor ld = 0, // 逻辑单位（非物理单位，默认为像素）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    UnitDisplay = 1, // 设备单位，如对显示器为像素、对打印机为墨点 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    UnitPixel = 2, // 像素（1/54 或 1/96 英寸？与屏幕大小和分辨率有关） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    UnitPoint = 3, // 点或 1/72 英寸（默认值）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    UnitInch = 4, // 英寸 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    UnitDocument = 5,../300 英寸 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    UnitMillimeter = 6 // 毫米 mm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; Unit;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中，em = M，在印刷行业中表示一个西文印刷符号的全长或全宽。&lt;/p&gt;
&lt;p&gt;在 GDI 的 CFont 部分，已经介绍了中文字号与英文磅数（相当于这里的 UnitPoint 点值） 的关系，表 14-1 列出了中文字号与几种主要 Unit 单位的关系（设 1 像素=1/54 英寸）。&lt;/p&gt;
&lt;p&gt;表 14-1 中文字号与 Unit 单位的关系&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;汉字字号&lt;/th&gt;
&lt;th&gt;Pixel像素&lt;/th&gt;
&lt;th&gt;Point点&lt;/th&gt;
&lt;th&gt;Inch英寸&lt;/th&gt;
&lt;th&gt;Document文档&lt;/th&gt;
&lt;th&gt;Millimeter毫米&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;特号&lt;/td&gt;
&lt;td&gt;133.33&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;td&gt;1.39&lt;/td&gt;
&lt;td&gt;416.67&lt;/td&gt;
&lt;td&gt;35.28&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;小特&lt;/td&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;td&gt;60&lt;/td&gt;
&lt;td&gt;0.83&lt;/td&gt;
&lt;td&gt;250&lt;/td&gt;
&lt;td&gt;21.17&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;初号&lt;/td&gt;
&lt;td&gt;56&lt;/td&gt;
&lt;td&gt;42&lt;/td&gt;
&lt;td&gt;0.58&lt;/td&gt;
&lt;td&gt;175&lt;/td&gt;
&lt;td&gt;14.82&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;小初&lt;/td&gt;
&lt;td&gt;48&lt;/td&gt;
&lt;td&gt;36&lt;/td&gt;
&lt;td&gt;0.5&lt;/td&gt;
&lt;td&gt;150&lt;/td&gt;
&lt;td&gt;12.7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;一号&lt;/td&gt;
&lt;td&gt;34.67&lt;/td&gt;
&lt;td&gt;26&lt;/td&gt;
&lt;td&gt;0.36&lt;/td&gt;
&lt;td&gt;108.33&lt;/td&gt;
&lt;td&gt;9.17&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;小一&lt;/td&gt;
&lt;td&gt;32&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;0.33&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;td&gt;8.47&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;二号&lt;/td&gt;
&lt;td&gt;29.33&lt;/td&gt;
&lt;td&gt;22&lt;/td&gt;
&lt;td&gt;0.31&lt;/td&gt;
&lt;td&gt;91.67&lt;/td&gt;
&lt;td&gt;7.76&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;小二&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;18&lt;/td&gt;
&lt;td&gt;0.25&lt;/td&gt;
&lt;td&gt;75&lt;/td&gt;
&lt;td&gt;6.35&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;三号&lt;/td&gt;
&lt;td&gt;21.33&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;0.22&lt;/td&gt;
&lt;td&gt;66.67&lt;/td&gt;
&lt;td&gt;5.64&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;小三&lt;/td&gt;
&lt;td&gt;20&lt;/td&gt;
&lt;td&gt;15&lt;/td&gt;
&lt;td&gt;0.21&lt;/td&gt;
&lt;td&gt;62.5&lt;/td&gt;
&lt;td&gt;5.29&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;四号&lt;/td&gt;
&lt;td&gt;18.67&lt;/td&gt;
&lt;td&gt;14&lt;/td&gt;
&lt;td&gt;0.19&lt;/td&gt;
&lt;td&gt;58.33&lt;/td&gt;
&lt;td&gt;4.94&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;小四&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;0.17&lt;/td&gt;
&lt;td&gt;50&lt;/td&gt;
&lt;td&gt;4.23&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;五号&lt;/td&gt;
&lt;td&gt;14&lt;/td&gt;
&lt;td&gt;10.5&lt;/td&gt;
&lt;td&gt;0.15&lt;/td&gt;
&lt;td&gt;43.75&lt;/td&gt;
&lt;td&gt;3.70&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;小五&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;0.125&lt;/td&gt;
&lt;td&gt;37.5&lt;/td&gt;
&lt;td&gt;3.175&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;六号&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;7.5&lt;/td&gt;
&lt;td&gt;0.10&lt;/td&gt;
&lt;td&gt;31.25&lt;/td&gt;
&lt;td&gt;2.65&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;小六&lt;/td&gt;
&lt;td&gt;8.67&lt;/td&gt;
&lt;td&gt;6.5&lt;/td&gt;
&lt;td&gt;0.09&lt;/td&gt;
&lt;td&gt;27.08&lt;/td&gt;
&lt;td&gt;2.29&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;七号&lt;/td&gt;
&lt;td&gt;7.33&lt;/td&gt;
&lt;td&gt;5.5&lt;/td&gt;
&lt;td&gt;0.08&lt;/td&gt;
&lt;td&gt;22.92&lt;/td&gt;
&lt;td&gt;1.94&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;八号&lt;/td&gt;
&lt;td&gt;6.67&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;0.07&lt;/td&gt;
&lt;td&gt;20.83&lt;/td&gt;
&lt;td&gt;1.76&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;例如（参见图 14-42）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;REAL fs[] = &amp;#123;100, 60, 42, 36, 26, 24, 22, 18, 16, 15, 14, 12,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    10.5, 9, 7.5, 6.5, 5.5, 5&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString fno[] = &amp;#123;L&amp;quot;特&amp;quot;, L&amp;quot;小特&amp;quot;, L&amp;quot;初&amp;quot;, L&amp;quot;小初&amp;quot;, L&amp;quot;一&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    L&amp;quot;小一&amp;quot;, L&amp;quot;二&amp;quot;, L&amp;quot;小二&amp;quot;, L&amp;quot;三&amp;quot;, L&amp;quot;小三&amp;quot;, L&amp;quot;四&amp;quot;, L&amp;quot;小四&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    L&amp;quot;五&amp;quot;, L&amp;quot;小五&amp;quot;, L&amp;quot;六&amp;quot;, L&amp;quot;小六&amp;quot;, L&amp;quot;七&amp;quot;, L&amp;quot;八&amp;quot;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wchar_t str[100]; REAL size, y = 10.0f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush textBrush(Color::Black); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt; 18; i++) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size = fs[i]; swprintf_s(str, 100,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        L&amp;quot;这是%s 号字(%.4g 像素 %g 点 %.4g 英寸 %.4g 文档 %.4g 毫米)&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fno[i], size * 4 / 3.0, size, size / 72.0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        size * 300 / 72.0, size / 72.0 * 25.4); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(str, INT(wcslen(str)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;amp;Font(L&amp;quot;宋体&amp;quot;, size), PointF(10.0f, y), &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    y += size * 1.5f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_069.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-42 中文字号与 Unit 单位&lt;/p&gt;
&lt;h3 id=&quot;1-8-2-绘制文本&quot;&gt;&lt;a href=&quot;#1-8-2-绘制文本&quot; class=&quot;headerlink&quot; title=&quot;1.8.2 绘制文本&quot;&gt;&lt;/a&gt;1.8.2 绘制文本&lt;/h3&gt;&lt;p&gt;在 GDI 中，我们用 CDC 类的方法 TextOut、DrawText 和 ExtTextOut 等来输出文本串。 在 GDI+中，我们则是利用 Graphics 类的重载方法 DrawString 来绘制文本。&lt;/p&gt;
&lt;p&gt;（1）画串方法 DrawString&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status DrawString(const WCHAR *string, INT length, const Font *font, const PointF &amp;amp;origin, const Brush *brush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawString(const WCHAR *string, INT length, const Font *font, const PointF &amp;amp;origin, const StringFormat *stringFormat, const Brush *brush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status DrawString(const WCHAR *string, INT length, const Font *font, const RectF &amp;amp;layoutRect, const StringFormat *stringFormat, const Brush *brush);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这三个同名的 Graphics 类重载方法，都以宽字符串作为第一个输入参数（不支持普通 字符串）、串长为第二个参数（对以 null 结尾的字符串，可以使用-1 来代替）、最后一个参 数则都是绘制文本用的画刷指针。&lt;/p&gt;
&lt;p&gt;不同的是第三个输入参数（都是浮点数版本，不支持整数版本）：前两个方法的是浮点 数版的点类 PointF 对象，表示文本串的位置（默认是左上角）；最后一个方法的是浮点数版 的矩形类 RectF 对象，表示绘制文本的范围（超出部分会被截掉）。&lt;/p&gt;
&lt;p&gt;另 一 个不 同之 处是 ，后 两个 方法 比第 一个 方法 多了 一个 输入 参数 —— 串格 式 类 StringFormat 对象的指针，用于设置文本的对齐方式、输出方向、自动换行、制表符定制、 剪裁等。&lt;/p&gt;
&lt;p&gt;第一个画串方法最简单，使用得也最多。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, INT(wcslen(str)), &amp;amp;Font(L&amp;quot; 宋体 &amp;quot;, 12), PointF(10.0f, 10.0f), &amp;amp;brush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, -1, &amp;amp;font, &amp;amp;rect, &amp;amp;stringFormat, &amp;amp;brush);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;（2）串格式类 StringFormat&lt;/p&gt;
&lt;p&gt;StringFormat 是从 Gdiplus Base 类直接派生的一个 GDI+类，用于设置绘制字符串时的各 种格式。其主要的构造函数为：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;StringFormat(INT formatFlags = 0, LANGID language = LANG_NEUTRAL);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;p&gt;formatFlags（格式标志位）—— 用于设置各种输出格式，取值为 StringFormatFlags 枚举的下列常量之位或“|”：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsDirectionRightToLeft = 0x00000001, // 方向从右到左（默认为从左到右） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsDirectionVertical = 0x00000002, // 垂直方向（默认为水平） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsNoFitBlackBox = 0x00000004, // 允许字符尾部悬于矩形之外 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsDisplayFormatControl = 0x00000020, // Unicode 布局控制符起作用 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsNoFontFallback = 0x00000400, // 有替换用的“缺少字体”（默认为开方形符） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsMeasureTrailingSpaces = 0x00000800, // 测量时包含尾部空格符（默认不包含）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsNoWrap = 0x00001000, // 不自动换行&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsLineLimit = 0x00002000, // 最后一行必须为整行高，避免半行高的输出&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringFormatFlagsNoClip = 0x00004000 // 不使用剪裁&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; StringFormatFlags;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;language （语言） —— 取值为 16 位 语 言 标识 符 类 型 LANGID ， 默认 值为 LANG_NEUTRAL（语言中立），表示采用用户的默认语言。&lt;/p&gt;
&lt;p&gt;（3）输出方向&lt;/p&gt;
&lt;p&gt;默认的文本串输出方向是从左到右水平绘制。也可以在 StringFormat 类的构造函数中使 用参数值：StringFormatFlagsDirectionRightToLeft 和 StringFormatFlagsDirectionVertical 来修 改文本串的输出方向为从右到左水平绘制和从上到下垂直绘制。&lt;/p&gt;
&lt;p&gt;（4）剪裁与换行&lt;/p&gt;
&lt;p&gt;默认情况下，使用矩形输出长文本串时，会自动换行和剪裁。但是也可以在 StringFormatF 类的构造函数中，利用第一个输入参数的 StringFormatFlags 枚举值，来改变默认的设置。&lt;/p&gt;
&lt;p&gt;（5）对齐&lt;/p&gt;
&lt;p&gt;可以通过 StringFormat 类的方法来设置输出文本串的对齐方式： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status SetAlignment(StringAlignment align); // 设置水平对齐 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status SetLineAlignment(StringAlignment align); // 设置垂直对齐&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中的输入参数为枚举常量：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringAlignmentNear = 0, // 靠近（左上） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringAlignmentCenter = 1, // 中心（对中） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StringAlignmentFar = 2 // 远离（右下）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; StringAlignment;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;1-8-3-美术字&quot;&gt;&lt;a href=&quot;#1-8-3-美术字&quot; class=&quot;headerlink&quot; title=&quot;1.8.3 美术字&quot;&gt;&lt;/a&gt;1.8.3 美术字&lt;/h3&gt;&lt;p&gt;下面介绍阴影、条纹、纹理、渐变、空心字和彩心字等绘制美术字的方法，它们是利用不同颜色、条纹和渐变的画刷，以及多次绘图的方式，来实现特定美术效果的。&lt;/p&gt;
&lt;p&gt;（1）阴影字&lt;/p&gt;
&lt;p&gt;可以使用两种不同颜色的画刷，经过在不同的为位置多次绘制同一文本串，就可以达到 输出阴影字的效果。例如（参见图 14-43）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush textBrush(Color::Red), shadowBrush(Color::Gray); HatchBrush hatchBrush(HatchStyleForwardDiagonal,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Color::Black, Color::White);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString str = L&amp;quot;阴影字符串&amp;quot;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font(L&amp;quot;华文新魏&amp;quot;, 100);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;REAL d = 10.0f, dd = 5.0f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(d + dd, d + dd), &amp;amp;shadowBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(d, d), &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt; 20; i++) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(str, str.GetLength(), &amp;amp;font,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PointF(d + i, 150 + d + i + 2), &amp;amp;hatchBrush);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_070.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(d, 150 + d), &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;图 14-43 阴影字&lt;/p&gt;
&lt;p&gt;（2）条纹字&lt;/p&gt;
&lt;p&gt;也可以直接利用条纹刷，来绘制条纹状的字符串。例如（参见图 14-44）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString str = L&amp;quot;条纹字符串&amp;quot;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font(L&amp;quot;华文新魏&amp;quot;, 140);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HatchBrush hatchBrush1(HatchStyleForwardDiagonal, Color::Red, Color::White);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(0.0f, 0.0f), &amp;amp;hatchBrush1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HatchBrush hatchBrush2(HatchStyleBackwardDiagonal, Color::Green, Color::White);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(0.0f, 200.0f), &amp;amp;hatchBrush2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HatchBrush hatchBrush3(HatchStyleCross, Color::Blue, Color::White);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(0.0f, 400.0f), &amp;amp;hatchBrush3);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_071.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-44 条纹字&lt;/p&gt;
&lt;p&gt;（3）纹理字&lt;/p&gt;
&lt;p&gt;还可以利用纹理（图像）刷来绘制纹理字符串。例如（参见图 14-45）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString str = L&amp;quot;纹理字符串&amp;quot;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font(L&amp;quot;华文新魏&amp;quot;, 140);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TextureBrush textureBrush(&amp;amp;Image(L&amp;quot;张东健.bmp&amp;quot;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(10.0f, 10.0f), &amp;amp;textureBrush);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_072.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-45 纹理字&lt;/p&gt;
&lt;p&gt;（4）渐变字&lt;/p&gt;
&lt;p&gt;当然，也可以利用线性渐变刷来绘制色彩变幻的字符串。例如，使用前面的多色渐变刷 代码，可以得到很好的变色效果（参见图 14-46）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString str = L&amp;quot;颜色渐变字符串&amp;quot;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font(L&amp;quot;华文新魏&amp;quot;, 100);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Color cols[] = &amp;#123;Color::Red, Color::Orange, Color::Yellow, Color::Green, Color::Cyan, Color::Blue, Color::Purple, Color::Magenta&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;REAL bps[] = &amp;#123;0.0f, 0.15f, 0.3f, 0.45f, 0.6f, 0.75f, 0.875f, 1.0f&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LinearGradientBrush brush(Point(10, 10), Point(810, 10), Color::Black, Color::White);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brush.SetInterpolationColors(cols, bps, 8); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(10.0f, 10.0f), &amp;amp;brush);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_073.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-46 渐变字&lt;/p&gt;
&lt;p&gt;（5）空心字与彩心字&lt;/p&gt;
&lt;p&gt;还可以利用 GDI+的路径和路径渐变刷，来绘制空心和彩心字符串。例如（参见图 14-47）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FontFamily ff(L&amp;quot;隶书&amp;quot;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wchar_t str[] = L&amp;quot;测试字符串&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;REAL emSize = 120; // UnitWorld &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, -1, &amp;amp;Font(L&amp;quot;隶书&amp;quot;, emSize, FontStyleRegular, UnitWorld), PointF(0, 0),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;amp;SolidBrush(Color::Green));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GraphicsPath path, *pOutlinePath;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;path.AddString(str, -1, &amp;amp;ff, FontStyleRegular, emSize, Point(0, 100), NULL); // 847 个点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pen pen(Color::Red); graph.DrawPath(&amp;amp;pen, &amp;amp;path); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pOutlinePath = path.Clone(); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pOutlinePath-&amp;amp;gt;Outline(); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PathGradientBrush pgBrush(pOutlinePath);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int n = pOutlinePath-&amp;amp;gt;GetPointCount(); // 1023 个点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Color *cols = new Color[n];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt; n; i++) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cols[i] = Color(rand() % 255, rand() % 255, rand() % 255);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pgBrush.SetCenterColor(Color(rand() % 255, rand() % 255, rand() % 255)); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pgBrush.SetSurroundColors(cols, &amp;amp;n); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.TranslateTransform(0.0f, 100.0f); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.FillPath(&amp;amp;pgBrush, &amp;amp;path);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;中，由于彩心字用到了随机颜色，所以每次刷新时的颜色都不一样。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_074.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-47 普通、空心和彩心字符串&lt;/p&gt;
&lt;h3 id=&quot;1-8-4-平滑处理与-ClearType-技术&quot;&gt;&lt;a href=&quot;#1-8-4-平滑处理与-ClearType-技术&quot; class=&quot;headerlink&quot; title=&quot;1.8.4 平滑处理与 ClearType 技术&quot;&gt;&lt;/a&gt;1.8.4 平滑处理与 ClearType 技术&lt;/h3&gt;&lt;p&gt;为了提高文字的清晰度，需要对绘制的文本串进行平滑处理，防止在（特别是点阵）文 字被放大后出现明显的锯齿（马赛克 mosaic）现象。ClearType（清晰活字）是微软公司于 1999 年 4 月 7 日推出的一种图形显示技术，主要用于改善 LCD（Liquid Crystal Display，液 晶显示）显示器的显示效果，提高图形和文字的清晰度。&lt;/p&gt;
&lt;p&gt;可以在 GDI+程序中，利用 Graphics 类的两个文本绘制提示（hint）方法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;TextRenderingHint GetTextRender ingHint(VOID) const; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status SetTextRenderingHint(TextRender ingHint newMode);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来获取和设置文字绘制时的平滑处理方法。其中的枚举类型 TextRenderingHint 的定义为：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef enum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TextRenderingHintSystemDefault = 0, // 同系统平滑方式 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TextRenderingHintSingleBitPerPixelGr idFit = 1, // 不消锯齿，网格匹配 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TextRenderingHintSingleBitPerPixel = 2, // 不消锯齿，不网格匹配 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TextRenderingHintAntiAliasGridFit = 3, // 消锯齿，网格匹配 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TextRenderingHintAntiAlias = 4, // 锯齿，不网格匹配&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TextRenderingHintClearTypeGridFit = 5 // 使用 ClearType 技术，不网格匹配&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; TextRenderingHint;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这里的网格匹配（grid fit），主要是指在文本绘制时，通过调整字形的平直和垂直笔画的宽 度，以达到提高文字输出质量的一种方法。&lt;/p&gt;
&lt;p&gt;例如（输出结果如图 14-48，为放大后的效果）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;amp;gt;m_hDC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush textBrush(Color::Black); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font(L&amp;quot;Arial&amp;quot;, 16);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString str = L&amp;quot;font smoothing&amp;quot;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wchar_t buf[5];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for (int i = 0; i &amp;amp;lt; 6; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _itow_s(i, buf, 5, 10); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.SetTextRenderingHint(TextRenderingHint(i)); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(buf, -1, &amp;amp;font, PointF(5.0f, 20.0f * i), &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    graph.DrawString(str, str.GetLength(), &amp;amp;font, PointF(30.0f, 20.0f * i), &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_075.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-48 文字绘制时的平滑处理方式 细心的同学可能会发现，除了渐变和路径刷及平滑处理外，大多数文本输出功能，GDI&lt;/p&gt;
&lt;p&gt;都有。而且 GDI 还可以以任意角度绘制文本串，但是 GDI+好像不能。其实，这可以利用 GDI+的矩阵变换来实现。矩阵变换的内容，会在后面的 14.2.8 小节介绍。&lt;/p&gt;
&lt;p&gt;专用字体集&lt;/p&gt;
&lt;p&gt;如果你想使用系统中还没有被安装的字体，有如下两种方法可供选择。&lt;/p&gt;
&lt;p&gt;（1）手工安装字体&lt;/p&gt;
&lt;p&gt;选择 Windows XP 操作系统的“../控制面板/字体”图标，启动“字体”程序； 然后再选择“文件/安装新字体”菜单项，打开“添加字体”对话框（参见图 14-49）；选择 字体所在的文件目录，会出现目录中所有字体的名称和类型列表；选中想安装的字体后，按 确定关闭对话框。这样，就完成了字体的安装工作。将字体装进系统后，就可以和其他已装 入字体一样正常使用了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_076.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-49 添加字体对话框&lt;/p&gt;
&lt;p&gt;（2）使用专用字体集&lt;/p&gt;
&lt;p&gt;与已安装字体集类 InstalledFontCollection 一 样 ， 专 用 （ 私 有 ） 字 体 集 类 PrivateFontCollection 也是字体集类 FontCollection 的派生类。&lt;/p&gt;
&lt;p&gt;PrivateFontCollection 类只有一个构造一个空的字体集默认构造函数：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;PrivateFontCollection(VOID);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是可用方法 AddFontFile 来向字体集中添加字体文件：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status AddFontFile(const WCHAR* filename);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将字体文件加入专用字体集后，我们就可以利用其父类的方法&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Status GetLastStatus(VOID);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;和 GetFamilyCount、GetFamilies 等，来判断装入是否成功、字体集中共有多少种字体、获 取指定数目的字体族 FontFamily 对象的数组（指针）。这些都与前面“显示当前系统已装入 的字体（族）名称”部分所讲的类似。包括用 FontFamily 类的 GetFamilyName 方法获取字 体名称，并用该名称来创建字体对象（使用带字体集参数的构造函数），最后绘制文本串。&lt;/p&gt;
&lt;p&gt;下面的例子，使用汉鼎繁印篆和汉鼎繁特行两种专用字体，输出文本串“专用字体集： 字体名称”和诗句“三顾频烦天下计 两朝开济老臣心”（参见图 14-50）。这两种字体所对应的字体文件 HDZB_25.TTF 和 HDZB_16.TTF，已经放入我个人网页的资源子目录 res 中。&lt;/p&gt;
&lt;p&gt;你也可以自己从网上下载其他字体文件来进行试验。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// 装入专用字体文件 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PrivateFontCollection pfc; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pfc.AddFontFile(L&amp;quot;res\\HDZB_16.TTF&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if(pfc.GetLastStatus() != Ok)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    MessageBox(L&amp;quot;装入字体文件出错！&amp;quot;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pfc.AddFontFile(L&amp;quot;res\\HDZB_25.TTF&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if(pfc.GetLastStatus() != Ok)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    MessageBox(L&amp;quot;装入字体文件出错！&amp;quot;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int n = pfc.GetFamilyCount();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if (n &amp;amp;lt; 2) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    MessageBox(L&amp;quot;字体集中的字体数不够！&amp;quot;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 获取字体族对象数组 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FontFamily ffs[2]; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int found;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pfc.GetFamilies(2, ffs, &amp;amp;found);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 定义输出字符串&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString str0 = L&amp;quot;专用字体集：&amp;quot;, str;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CString str1 = L&amp;quot;三顾频烦天下计\r\n 两朝开济老臣心&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 设置中对齐&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;StringFormat stringFormat; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;stringFormat.SetAlignment(StringAlignmentCenter); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RECT rect;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetClientRect(&amp;amp;rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 创建图形和文本刷对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Graphics graph(pDC-&amp;gt;m_hDC); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SolidBrush textBrush(Color::Black);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 获取字体名称 1，构造字体 1，并输出字符串&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wchar_t name[LF_FACESIZE]; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ffs[0].GetFamilyName(name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font1(name, 60, FontStyleRegular, UnitPixel, &amp;amp;pfc); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;str = str0 + name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font1, PointF(0.0f, 0.0f), &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str1, str1.GetLength(), &amp;amp;font1, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PointF(rect.right / 2.0f, 80.0f), &amp;amp;stringFormat,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 获取字体名称 2，构造字体 2，并输出字符串 ffs[1].GetFamilyName(name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Font font2(name, 60, FontStyleRegular, UnitPixel, &amp;amp;pfc); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;str = str0 + name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graph.DrawString(str, str.GetLength(), &amp;amp;font2,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PointF(0.0f, 220.0f), &amp;amp;textBrush); graph.DrawString(str1, str1.GetLength(), &amp;amp;font2,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PointF(rect.right / 2.0f, 300.0f), &amp;amp;stringFormat,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;amp;textBrush);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_077.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-50 使用汉鼎繁印篆和汉鼎繁特行专用字体&lt;/p&gt;
&lt;h2 id=&quot;复习思考题&quot;&gt;&lt;a href=&quot;#复习思考题&quot; class=&quot;headerlink&quot; title=&quot;复习思考题&quot;&gt;&lt;/a&gt;复习思考题&lt;/h2&gt;&lt;p&gt;1. GDI+与 GDI 是什么关系？&lt;/p&gt;
&lt;p&gt;2. GDI+有哪两种封装？它们的基础是什么？&lt;/p&gt;
&lt;p&gt;3. GDI+有哪些新增功能？&lt;/p&gt;
&lt;p&gt;4. GDI+的绘图方式与 GDI 有什么不同？&lt;/p&gt;
&lt;p&gt;5. 用 MFC 编写 GDI+程序需要做那些装备工作？对 VC08 SP1 及 VC10 版有什么不同？&lt;/p&gt;
&lt;p&gt;6. 如何对 GDI+进行初始化和清除？需要特别注意什么？&lt;/p&gt;
&lt;p&gt;7. 怎么解决 GDI+编程中 new 操作符问题？&lt;/p&gt;
&lt;p&gt;8. GDI+的几何辅助类与 GDI 的有哪些不同？&lt;/p&gt;
&lt;p&gt;9. 与 GDI 相比，GDI+的颜色哪些新内容？&lt;/p&gt;
&lt;p&gt;10. 有多少颜色枚举常量？如何使用它们？GDI+的 Graphics 类与 GDI 的 MFC 封装中的什么类相似？怎样创建 Graphics 对象？&lt;/p&gt;
&lt;p&gt;13. GDI+的绘图方法属于哪个类？&lt;/p&gt;
&lt;p&gt;14. GDI+的画线方法的名称都有什么共同的前缀？&lt;/p&gt;
&lt;p&gt;15. GDI+的画直线、矩形和椭圆的方法与 GDI 的对应方法有哪些不同？&lt;/p&gt;
&lt;p&gt;16. GDI+中的画填充图的方法都有什么共同的前缀？有例外吗？&lt;/p&gt;
&lt;p&gt;17. GDI+画填充多边形有哪两种填充模式？它们的差别在哪里？&lt;/p&gt;
&lt;p&gt;18. GDI+提供了哪两种由控制点列画曲线的方法？它们有什么差别？&lt;/p&gt;
&lt;p&gt;19. GDI+中有专门的清屏方法吗？GDI 中有没有？&lt;/p&gt;
&lt;p&gt;20. 与 GDI 相比，GDI+中的笔增加了哪些新功能？&lt;/p&gt;
&lt;p&gt;21. GDI+的条纹刷和纹理刷与 GDI 相比有哪些新加内容？&lt;/p&gt;
&lt;p&gt;22. GDI+新增加了哪些画刷种类？&lt;/p&gt;
&lt;p&gt;23. GDI+中有哪些字体类？&lt;/p&gt;
&lt;p&gt;24. 在 VC08 SP1 及 VC10 中直接使用 Font 类会出现什么编译错误？如何解决？&lt;/p&gt;
&lt;p&gt;25. 在 GDI+中如何使用字体？&lt;/p&gt;
&lt;p&gt;26. GDI+使用什么方法绘制文本？&lt;/p&gt;
&lt;p&gt;27. 如何实现阴影、条纹、纹理、渐变、空心和彩心等绘制美术字效果？&lt;/p&gt;
&lt;p&gt;28. 如何使用专用字体集？&lt;/p&gt;
&lt;h2 id=&quot;练习题&quot;&gt;&lt;a href=&quot;#练习题&quot; class=&quot;headerlink&quot; title=&quot;练习题&quot;&gt;&lt;/a&gt;练习题&lt;/h2&gt;&lt;p&gt;1. （选做题，例子）实现本章中的各例。&lt;/p&gt;
&lt;p&gt;2. （正叶曲线）编写一个画填充正叶曲线的通用程序。可以指定叶片数、颜色、圆心和叶长（半径）等。（参见 14.7.2 的 2．和图 14-31）&lt;/p&gt;
&lt;p&gt;3. （阴阳八卦图）编写一个绘制阴阳八卦图的通用程序。可指定各种颜色、圆心和半径等 等，参见图 14-51。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/gdip-编程基础/Image_078.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;图 14-51 阴阳八卦图&lt;/p&gt;
&lt;p&gt;4. （选做题，交互绘图）编写一个使用 GDI+接口的交互式绘图程序，实现 GDI+的所有 基本功能和各种新增加的功能。（提示，可以用 GDI 交互移动，用 GDI+成图。）&lt;/p&gt;
&lt;p&gt;5. （选做题，补充绘图方法）编写若干（带不同类型输入参数的）画（线框和填充）弓弦 和 圆 角 矩 形 的 GDI+ 方法 （ DrawChord 、 FillChord 、 DrawRoundRectangle 和 FillRoundRectangle）。&lt;/p&gt;
&lt;p&gt;6. （选做题，色块）绘制颜色枚举常量色块图。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;GDI+（Graphics Device Interface Plus，图形设备接口加）是 Windows XP 及以上版本操 作系统的图形子系统，也是传统.NET 框架的重要组成部分和窗体绘图的主要工具，负责在 屏幕和打印机上绘制图形图像和显示信息。顾名思义，GDI+是 Windows 早期版本所提供的 图形设备接口 GDI 的后续版本，是建立在 GDI 之上的一个高层图形子系统。&lt;/p&gt;
&lt;p&gt;GDI+是一种 API，分别通过一套 C++类和一套部署为托管代码的类来展现，这两套类 分别被称为 GDI+的“C++封装”和“托管类接口”。&lt;/p&gt;
&lt;p&gt;GDI+不但在功能上比 GDI 要强大很多，而且在代码编写方面也更简单，因此会成为 Windows 图形图像程序开发的主要工具之一。由于篇幅所限，本书只简单介绍利用 MFC 进 行 GDI+编程的一些基本内容，也不讲 GDI+的 API 编程。基于 GDI+托管封装的.NET 窗体 绘图，将在第 18 章中再介绍。对 GDI+编程有兴趣的读者，可以参考如下图书：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;周鸣杨、赵景亮. 精通 GDI+编程. 清华大学出版社，2004 年 2 月（C++ / MFC）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mahesh Chand（韩江等译）. GDI+图形程序设计. 电子工业出版社，2005 年 3 月（C# / .NET）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本章将介绍 GDI+的结构和组成，讨论 GDI+的几个主要新增特性与功能，说明 GDI+给 Windows 图形图像程序的开发模式带来的变化。介绍 C++封装的 GDI+ API 的具体使用方法， 主要讲解二维矢量图形绘制和文字显示等基本内容。
    
    </summary>
    
    
      <category term="cpp" scheme="http://it-ebooks.flygon.net/tags/cpp/"/>
    
      <category term="mfc" scheme="http://it-ebooks.flygon.net/tags/mfc/"/>
    
      <category term="gdip" scheme="http://it-ebooks.flygon.net/tags/gdip/"/>
    
  </entry>
  
  <entry>
    <title>android 逆向菜鸟速参手册（完蛋版）</title>
    <link href="http://it-ebooks.flygon.net/android-%E9%80%86%E5%90%91%E8%8F%9C%E9%B8%9F%E9%80%9F%E5%8F%82%E6%89%8B%E5%86%8C/"/>
    <id>http://it-ebooks.flygon.net/android-逆向菜鸟速参手册/</id>
    <published>2016-02-24T03:32:30.000Z</published>
    <updated>2016-03-03T07:19:13.550Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://attach.52pojie.cn/forum/201412/19/145917zj535lsh0lj45ons.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;格式：PDF&lt;/p&gt;
&lt;p&gt;手册整理者：PeterDocter or PeterChen[FCG] &lt;/p&gt;
&lt;p&gt;手册整理：2014-12-18 20:30 &lt;/p&gt;
&lt;p&gt;本逆向手册，一切教程来源至网络。我只是搬运工与装修工。。。 &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://pan.baidu.com/s/1c0kyazA&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度云下载&lt;/a&gt; 密码：kfac&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://vdisk.weibo.com/s/aADaW4YRjr5dM&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;微盘下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://1000eb.com/1ix8i&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;千易下载&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://attach.52pojie.cn/forum/201412/19/145917zj535lsh0lj45ons.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;格式：PDF&lt;/p&gt;
&lt;p&gt;手册整理者：PeterDocter or PeterChen[FCG] &lt;/p&gt;
&lt;p&gt;手册整理：2014-12-18 20:30 &lt;/p&gt;
&lt;p&gt;本逆向手册，一切教程来源至网络。我只是搬运工与装修工。。。 &lt;/p&gt;
    
    </summary>
    
    
      <category term="android" scheme="http://it-ebooks.flygon.net/tags/android/"/>
    
      <category term="逆向" scheme="http://it-ebooks.flygon.net/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>程序设计思想与方法</title>
    <link href="http://it-ebooks.flygon.net/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3%E4%B8%8E%E6%96%B9%E6%B3%95/"/>
    <id>http://it-ebooks.flygon.net/程序设计思想与方法/</id>
    <published>2016-02-22T12:23:22.000Z</published>
    <updated>2016-03-03T07:19:13.976Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/sjtu-cs902-courseware.jpg?build=1439249362341&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：陆朝俊&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;在线阅读&quot;&gt;&lt;a href=&quot;#在线阅读&quot; class=&quot;headerlink&quot; title=&quot;在线阅读&quot;&gt;&lt;/a&gt;在线阅读&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/wizardforcel/sjtu-cs902-courseware/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线阅读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/pdf/book/wizardforcel/sjtu-cs902-courseware&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/epub/book/wizardforcel/sjtu-cs902-courseware&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB格式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/download/mobi/book/wizardforcel/sjtu-cs902-courseware&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MOBI格式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ek8whxe.cloudimg.io/s/width/226/https://www.gitbook.com/cover/book/wizardforcel/sjtu-cs902-courseware.jpg?build=1439249362341&amp;amp;v=12.0.2&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;作者：陆朝俊&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://it-ebooks.flygon.net/tags/python/"/>
    
  </entry>
  
</feed>
